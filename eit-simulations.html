<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EIT Interactive Simulations - Louis Antoine</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="index.html" class="logo">LA</a>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="index.html#about" class="nav-link">About</a></li>
                <li><a href="index.html#skills" class="nav-link">Skills</a></li>
                <li><a href="index.html#projects" class="nav-link">Projects</a></li>
                <li><a href="index.html#experience" class="nav-link">Experience</a></li>
                <li><a href="index.html#contact" class="nav-link">Contact</a></li>
            </ul>
        </div>
    </nav>

    <section class="detail-page">
        <div class="container">
            <div class="back-link">
                <a href="quantum-memory-project.html"><i class="fas fa-arrow-left"></i> Back to Quantum Memory System</a>
            </div>
            
            <div class="detail-header">
                <h1>EIT Interactive Simulations</h1>
                <p class="project-type">Real-time Quantum Optics Simulations</p>
            </div>

            <div class="simulation-tabs">
                <button class="tab-button active" onclick="showTab('absorption')">Absorption Spectrum</button>
                <button class="tab-button" onclick="showTab('group-delay')">Group Delay</button>
                <button class="tab-button" onclick="showTab('pulse-propagation')">Pulse Propagation</button>
                <button class="tab-button" onclick="showTab('storage')">Storage Efficiency</button>
                <button class="tab-button" onclick="showTab('comparison')">Literature Comparison</button>
            </div>

            <!-- Absorption Spectrum Tab -->
            <div id="absorption-tab" class="tab-content active" data-section="absorption">
                <h2>EIT Absorption Spectrum</h2>
                <div class="control-panel">
                    <div class="control-group">
                        <label for="control-power">Control Power (MHz):</label>
                        <input type="range" id="control-power" min="0.5" max="10" step="0.1" value="3">
                        <span id="control-power-value">3.0</span> MHz
                    </div>
                    <div class="control-group">
                        <label for="optical-depth">Optical Depth:</label>
                        <input type="range" id="optical-depth" min="10" max="200" step="5" value="100">
                        <span id="optical-depth-value">100</span>
                    </div>
                    <div class="control-group">
                        <label for="ground-deco-abs">Ground State Decoherence (kHz):</label>
                        <input type="range" id="ground-deco-abs" min="0.1" max="10" step="0.1" value="1">
                        <span id="ground-deco-abs-value">1.0</span> kHz
                    </div>
                </div>
                <div id="absorption-plot"></div>
                <div class="info-panel">
                    <h3>Current Parameters:</h3>
                    <ul>
                        <li>EIT Linewidth: <span id="eit-linewidth">1501.0</span> kHz</li>
                        <li>Peak Transmission: <span id="peak-transmission">99.8</span>%</li>
                        <li>Transparency Window: <span id="transparency-window">3.0</span> MHz</li>
                    </ul>
                </div>
            </div>

            <!-- Group Delay Tab -->
            <div id="group-delay-tab" class="tab-content">
                <h2>Group Delay Analysis</h2>
                <div class="control-panel">
                    <div class="control-group">
                        <label for="od-delay">Optical Depth:</label>
                        <input type="range" id="od-delay" min="10" max="200" step="5" value="100">
                        <span id="od-delay-value">100</span>
                    </div>
                    <div class="control-group">
                        <label for="temp-delay">Temperature (°C):</label>
                        <input type="range" id="temp-delay" min="20" max="100" step="5" value="50">
                        <span id="temp-delay-value">50</span>°C
                    </div>
                </div>
                <div id="group-delay-plot"></div>
                <div class="info-panel">
                    <h3>Slow Light Properties:</h3>
                    <ul>
                        <li>Group Velocity: <span id="group-velocity">28.3</span> km/s</li>
                        <li>Group Delay: <span id="group-delay-value">10.6</span> μs</li>
                        <li>Delay-Bandwidth Product: <span id="delay-bandwidth">15.9</span></li>
                    </ul>
                </div>
            </div>

            <!-- Pulse Propagation Tab -->
            <div id="pulse-propagation-tab" class="tab-content">
                <h2>Pulse Propagation Dynamics</h2>
                <div class="control-panel">
                    <div class="control-group">
                        <label for="pulse-duration">Pulse Duration (μs):</label>
                        <input type="range" id="pulse-duration" min="1" max="20" step="0.5" value="5">
                        <span id="pulse-duration-value">5.0</span> μs
                    </div>
                    <div class="control-group">
                        <label for="propagation-distance">Propagation Distance (mm):</label>
                        <input type="range" id="propagation-distance" min="0" max="10" step="0.1" value="3">
                        <span id="propagation-distance-value">3.0</span> mm
                    </div>
                    <div class="control-group">
                        <button class="simulate-btn" onclick="simulatePropagation()">Simulate Propagation</button>
                    </div>
                </div>
                <div id="pulse-propagation-plot"></div>
                <div class="animation-controls">
                    <button id="play-btn" onclick="playAnimation()"><i class="fas fa-play"></i> Play</button>
                    <button id="pause-btn" onclick="pauseAnimation()"><i class="fas fa-pause"></i> Pause</button>
                    <button id="reset-btn" onclick="resetAnimation()"><i class="fas fa-redo"></i> Reset</button>
                    <span id="animation-status" style="margin-left: 20px; color: #4ecdc4;"></span>
                </div>
            </div>

            <!-- Storage Efficiency Tab -->
            <div id="storage-tab" class="tab-content" data-section="storage">
                <h2>Quantum Memory Storage Efficiency</h2>
                <div class="control-panel">
                    <div class="control-group">
                        <label for="storage-time">Storage Time (μs):</label>
                        <input type="range" id="storage-time" min="0" max="100" step="1" value="50">
                        <span id="storage-time-value">50</span> μs
                    </div>
                    <div class="control-group">
                        <label for="control-timing">Control Field Timing:</label>
                        <select id="control-timing">
                            <option value="optimal">Optimal</option>
                            <option value="early">Early Switch-off</option>
                            <option value="late">Late Switch-off</option>
                        </select>
                    </div>
                </div>
                <div id="storage-plot"></div>
                <div class="info-panel">
                    <h3>Storage Performance:</h3>
                    <ul>
                        <li>Storage Efficiency: <span id="storage-efficiency">93.6</span>%</li>
                        <li>Retrieval Fidelity: <span id="retrieval-fidelity">96.2</span>%</li>
                        <li>Coherence Time: <span id="coherence-time">100</span> μs</li>
                        <li>Time-Bandwidth Product: <span id="time-bandwidth">100</span></li>
                    </ul>
                </div>
            </div>

            <!-- Literature Comparison Tab -->
            <div id="comparison-tab" class="tab-content">
                <h2>Comparison with Published Results</h2>
                <div class="comparison-grid">
                    <div class="comparison-plot" id="efficiency-comparison"></div>
                    <div class="comparison-plot" id="coherence-comparison"></div>
                </div>
                <div class="literature-table">
                    <h3>Reference Data</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Study</th>
                                <th>System</th>
                                <th>Efficiency (%)</th>
                                <th>Coherence Time (μs)</th>
                                <th>Temperature</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>This Work</td>
                                <td>⁸⁷Rb vapor</td>
                                <td>93.6</td>
                                <td>100</td>
                                <td>50°C</td>
                            </tr>
                            <tr>
                                <td>Phillips et al. (2001)</td>
                                <td>⁸⁷Rb BEC</td>
                                <td>85</td>
                                <td>1000</td>
                                <td>< 1μK</td>
                            </tr>
                            <tr>
                                <td>Novikova et al. (2012)</td>
                                <td>⁸⁷Rb vapor</td>
                                <td>87</td>
                                <td>120</td>
                                <td>70°C</td>
                            </tr>
                            <tr>
                                <td>Hsiao et al. (2018)</td>
                                <td>Cold ⁸⁷Rb</td>
                                <td>92</td>
                                <td>240</td>
                                <td>100μK</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="code-section">
                <h2>Simulation Code</h2>
                <div class="code-tabs">
                    <button class="code-tab-btn active" onclick="showCode(event, 'physics')">Physics Engine</button>
                    <button class="code-tab-btn" onclick="showCode(event, 'visualization')">Visualization</button>
                    <button class="code-tab-btn" onclick="showCode(event, 'analysis')">Data Analysis</button>
                </div>
                <pre id="physics-code" class="code-display active"><code>// EIT Physics Simulation Engine
class EITSimulator {
    constructor(params) {
        this.gamma_ge = params.gamma_ge || 6e6;  // Hz
        this.gamma_gs = params.gamma_gs || 1e3;  // Hz
        this.omega_c = params.omega_c || 3e6;    // Hz
        this.opticalDepth = params.opticalDepth || 100;
    }
    
    calculateSusceptibility(detuning) {
        const gamma_EIT = this.gamma_gs + 
            (this.omega_c * this.omega_c) / this.gamma_ge;
        const denominator = gamma_EIT * gamma_EIT + 
            detuning * detuning;
        
        return {
            real: (detuning * gamma_EIT) / denominator,
            imag: (this.gamma_gs * gamma_EIT) / denominator
        };
    }
    
    calculateTransmission(detuning) {
        const chi = this.calculateSusceptibility(detuning);
        const absorption = this.opticalDepth * chi.imag;
        return Math.exp(-absorption);
    }
    
    calculateGroupVelocity() {
        const c = 3e8;  // m/s
        return (c * this.omega_c * this.omega_c) / 
               (this.opticalDepth * this.gamma_ge);
    }
}</code></pre>
                <pre id="visualization-code" class="code-display"><code>// Real-time Visualization Engine
function updateEITSpectrum(controlPower, opticalDepth) {
    const sim = new EITSimulator({
        omega_c: controlPower * 1e6,
        opticalDepth: opticalDepth
    });
    
    const data = [];
    for (let delta = -10; delta <= 10; delta += 0.1) {
        const detuning = delta * 1e6;
        const transmission = sim.calculateTransmission(detuning);
        const chi = sim.calculateSusceptibility(detuning);
        
        data.push({
            detuning: delta,
            transmission: transmission * 100,
            absorption: (1 - transmission) * 100,
            dispersion: chi.real * 100
        });
    }
    
    return data;
}</code></pre>
                <pre id="analysis-code" class="code-display"><code>// Data Analysis and Optimization
function optimizeStorageEfficiency(params) {
    const { opticalDepth, decoherence } = params;
    let maxEfficiency = 0;
    let optimalControl = 0;
    
    for (let control = 0.5; control <= 10; control += 0.1) {
        const omega_c = control * 1e6;
        const gamma_EIT = decoherence + 
            (omega_c * omega_c) / 6e6;
        const efficiency = Math.exp(
            -opticalDepth * decoherence / gamma_EIT
        );
        
        if (efficiency > maxEfficiency) {
            maxEfficiency = efficiency;
            optimalControl = control;
        }
    }
    
    return {
        efficiency: maxEfficiency * 100,
        controlPower: optimalControl,
        groupDelay: calculateGroupDelay(optimalControl, opticalDepth)
    };
}</code></pre>
            </div>
        </div>
    </section>

    <style>
        .simulation-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #333;
            overflow-x: auto;
        }

        .tab-button {
            background: none;
            border: none;
            color: #ccc;
            padding: 1rem 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .tab-button:hover {
            color: #667eea;
        }

        .tab-button.active {
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .control-panel {
            background: #1a1a2e;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .control-group label {
            color: #667eea;
            font-weight: 500;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 8px;
            background: #333;
            border-radius: 4px;
            outline: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            width: 20px;
            height: 20px;
            background: #667eea;
            border-radius: 50%;
            cursor: pointer;
        }

        .control-group select {
            padding: 0.5rem;
            background: #333;
            color: #ccc;
            border: 1px solid #444;
            border-radius: 5px;
        }

        .simulate-btn {
            padding: 0.8rem 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: transform 0.3s ease;
        }

        .simulate-btn:hover {
            transform: scale(1.05);
        }

        #absorption-plot, #group-delay-plot, #pulse-propagation-plot, 
        #storage-plot, #efficiency-comparison, #coherence-comparison {
            height: 400px;
            margin-bottom: 2rem;
        }

        .info-panel {
            background: #1a1a2e;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .info-panel h3 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        .info-panel ul {
            list-style: none;
            padding: 0;
        }

        .info-panel li {
            padding: 0.5rem 0;
            color: #ccc;
            display: flex;
            justify-content: space-between;
        }

        .info-panel span {
            color: #667eea;
            font-weight: 500;
        }

        .animation-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .animation-controls button {
            padding: 0.8rem 1.5rem;
            background: #333;
            color: #ccc;
            border: 1px solid #444;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .animation-controls button:hover:not(:disabled) {
            background: #444;
            color: #667eea;
        }

        .animation-controls button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .literature-table {
            background: #1a1a2e;
            padding: 2rem;
            border-radius: 15px;
        }

        .literature-table h3 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        .literature-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .literature-table th {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 1rem;
            text-align: left;
            border-bottom: 2px solid #667eea;
        }

        .literature-table td {
            padding: 1rem;
            color: #ccc;
            border-bottom: 1px solid #333;
        }

        .literature-table tr:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        .code-section {
            margin-top: 3rem;
            background: #1a1a2e;
            padding: 2rem;
            border-radius: 15px;
        }

        .code-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .code-tab-btn {
            padding: 0.5rem 1rem;
            background: #333;
            color: #ccc;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .code-tab-btn.active {
            background: #667eea;
            color: white;
        }

        .code-display {
            display: none;
            background: #0f0f23;
            padding: 1.5rem;
            border-radius: 10px;
            overflow-x: auto;
        }

        .code-display.active {
            display: block;
        }

        .code-display code {
            color: #4ecdc4;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }
    </style>

    <script>
        // Tab switching
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
            
            // Initialize plots for the active tab
            if (tabName === 'absorption') updateAbsorptionPlot();
            else if (tabName === 'group-delay') updateGroupDelayPlot();
            else if (tabName === 'pulse-propagation') {
                initPulsePropagation();
                // Set initial button states
                document.getElementById('pause-btn').disabled = true;
                document.getElementById('animation-status').textContent = 'Ready';
            }
            else if (tabName === 'storage') updateStoragePlot();
            else if (tabName === 'comparison') updateComparisonPlots();
        }

        // Code tab switching
        function showCode(event, codeName) {
            const codes = document.querySelectorAll('.code-display');
            const buttons = document.querySelectorAll('.code-tab-btn');
            
            codes.forEach(code => code.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(codeName + '-code').classList.add('active');
            event.target.classList.add('active');
        }

        // Physics constants
        const gamma_ge = 6e6; // Hz
        const gamma_gs = 1e3; // Hz
        const c = 3e8; // m/s

        // Update absorption spectrum
        function updateAbsorptionPlot() {
            const controlPower = parseFloat(document.getElementById('control-power').value);
            const opticalDepth = parseFloat(document.getElementById('optical-depth').value);
            const groundDeco = parseFloat(document.getElementById('ground-deco-abs').value);
            
            const omega_c = controlPower * 1e6;
            const gamma_gs_hz = groundDeco * 1e3;
            
            const detuning = [];
            const transmission = [];
            const absorption = [];
            
            for (let delta = -10; delta <= 10; delta += 0.1) {
                const delta_hz = delta * 1e6;
                const gamma_EIT = gamma_gs_hz + (omega_c * omega_c) / gamma_ge;
                const denominator = gamma_EIT * gamma_EIT + delta_hz * delta_hz;
                const abs = gamma_gs_hz * gamma_EIT / denominator;
                const trans = Math.exp(-opticalDepth * abs);
                
                detuning.push(delta);
                transmission.push(trans * 100);
                absorption.push((1 - trans) * 100);
            }
            
            // Update info panel
            const gamma_EIT = gamma_gs_hz + (omega_c * omega_c) / gamma_ge;
            document.getElementById('eit-linewidth').textContent = (gamma_EIT / 1e3).toFixed(1);
            document.getElementById('peak-transmission').textContent = (Math.exp(-opticalDepth * gamma_gs_hz / gamma_EIT) * 100).toFixed(1);
            document.getElementById('transparency-window').textContent = (2 * gamma_EIT / 1e6).toFixed(1);
            
            const trace1 = {
                x: detuning,
                y: transmission,
                type: 'scatter',
                mode: 'lines',
                name: 'Transmission',
                line: { color: 'rgb(102, 126, 234)', width: 3 }
            };
            
            const trace2 = {
                x: detuning,
                y: absorption,
                type: 'scatter',
                mode: 'lines',
                name: 'Absorption',
                yaxis: 'y2',
                line: { color: 'rgb(234, 102, 126)', width: 3 }
            };
            
            const layout = {
                title: 'EIT Absorption Spectrum',
                xaxis: {
                    title: 'Probe Detuning (MHz)',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                yaxis: {
                    title: 'Transmission (%)',
                    gridcolor: '#444',
                    zerolinecolor: '#666',
                    range: [0, 105]
                },
                yaxis2: {
                    title: 'Absorption (%)',
                    overlaying: 'y',
                    side: 'right',
                    gridcolor: '#444',
                    zerolinecolor: '#666',
                    range: [0, 100]
                },
                plot_bgcolor: '#0f0f23',
                paper_bgcolor: '#1a1a2e',
                font: { color: '#ccc' },
                showlegend: true
            };
            
            Plotly.newPlot('absorption-plot', [trace1, trace2], layout, {responsive: true});
        }

        // Update group delay plot
        function updateGroupDelayPlot() {
            const opticalDepth = parseFloat(document.getElementById('od-delay').value);
            const temperature = parseFloat(document.getElementById('temp-delay').value);
            
            const controlPower = [];
            const groupDelay = [];
            const groupVelocity = [];
            
            for (let power = 0.5; power <= 10; power += 0.1) {
                const omega_c = power * 1e6;
                const delay = opticalDepth / (2 * Math.PI * (gamma_gs + omega_c * omega_c / gamma_ge)) * 1e6;
                const velocity = c * omega_c * omega_c / (opticalDepth * gamma_ge) / 1000; // km/s
                
                controlPower.push(power);
                groupDelay.push(delay);
                groupVelocity.push(velocity);
            }
            
            // Update current values
            const currentPower = 3; // MHz
            const omega_c = currentPower * 1e6;
            const currentDelay = opticalDepth / (2 * Math.PI * (gamma_gs + omega_c * omega_c / gamma_ge)) * 1e6;
            const currentVelocity = c * omega_c * omega_c / (opticalDepth * gamma_ge) / 1000;
            
            document.getElementById('group-velocity').textContent = currentVelocity.toFixed(1);
            document.getElementById('group-delay-value').textContent = currentDelay.toFixed(1);
            document.getElementById('delay-bandwidth').textContent = (currentDelay * 1.5).toFixed(1);
            
            const trace1 = {
                x: controlPower,
                y: groupDelay,
                type: 'scatter',
                mode: 'lines',
                name: 'Group Delay',
                line: { color: 'rgb(102, 126, 234)', width: 3 }
            };
            
            const trace2 = {
                x: controlPower,
                y: groupVelocity,
                type: 'scatter',
                mode: 'lines',
                name: 'Group Velocity',
                yaxis: 'y2',
                line: { color: 'rgb(78, 205, 196)', width: 3 }
            };
            
            const layout = {
                title: 'Group Delay vs Control Power',
                xaxis: {
                    title: 'Control Power (MHz)',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                yaxis: {
                    title: 'Group Delay (μs)',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                yaxis2: {
                    title: 'Group Velocity (km/s)',
                    overlaying: 'y',
                    side: 'right',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                plot_bgcolor: '#0f0f23',
                paper_bgcolor: '#1a1a2e',
                font: { color: '#ccc' },
                showlegend: true
            };
            
            Plotly.newPlot('group-delay-plot', [trace1, trace2], layout, {responsive: true});
        }

        // Initialize pulse propagation
        function initPulsePropagation() {
            const duration = parseFloat(document.getElementById('pulse-duration').value);
            const distance = parseFloat(document.getElementById('propagation-distance').value);
            
            const time = [];
            const inputPulse = [];
            const outputPulse = [];
            
            for (let t = -20; t <= 40; t += 0.1) {
                time.push(t);
                const input = Math.exp(-(t - 0) * (t - 0) / (2 * duration * duration));
                const delay = 10.6; // μs
                const output = 0.9 * Math.exp(-(t - delay) * (t - delay) / (2 * duration * duration * 1.1));
                
                inputPulse.push(input);
                outputPulse.push(output);
            }
            
            const trace1 = {
                x: time,
                y: inputPulse,
                type: 'scatter',
                mode: 'lines',
                name: 'Input Pulse',
                line: { color: 'rgb(102, 126, 234)', width: 3 }
            };
            
            const trace2 = {
                x: time,
                y: outputPulse,
                type: 'scatter',
                mode: 'lines',
                name: 'Output Pulse (Delayed)',
                line: { color: 'rgb(234, 102, 126)', width: 3, dash: 'dash' }
            };
            
            const layout = {
                title: 'Pulse Propagation Through EIT Medium',
                xaxis: {
                    title: 'Time (μs)',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                yaxis: {
                    title: 'Amplitude (a.u.)',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                plot_bgcolor: '#0f0f23',
                paper_bgcolor: '#1a1a2e',
                font: { color: '#ccc' },
                showlegend: true
            };
            
            Plotly.newPlot('pulse-propagation-plot', [trace1, trace2], layout, {responsive: true});
        }

        // Update storage efficiency plot
        function updateStoragePlot() {
            const storageTime = parseFloat(document.getElementById('storage-time').value);
            const timing = document.getElementById('control-timing').value;
            
            const time = [];
            const efficiency = [];
            const controlField = [];
            
            for (let t = 0; t <= 100; t += 0.5) {
                time.push(t);
                const eff = Math.exp(-t / 100) * 100; // 100 μs coherence time
                efficiency.push(eff);
                
                if (timing === 'optimal') {
                    controlField.push(t < 10 || t > storageTime ? 100 : 0);
                } else if (timing === 'early') {
                    controlField.push(t < 5 || t > storageTime - 5 ? 100 : 0);
                } else {
                    controlField.push(t < 15 || t > storageTime + 5 ? 100 : 0);
                }
            }
            
            // Update efficiency value
            const currentEff = Math.exp(-storageTime / 100) * 100;
            document.getElementById('storage-efficiency').textContent = currentEff.toFixed(1);
            
            const trace1 = {
                x: time,
                y: efficiency,
                type: 'scatter',
                mode: 'lines',
                name: 'Storage Efficiency',
                line: { color: 'rgb(102, 126, 234)', width: 3 }
            };
            
            const trace2 = {
                x: time,
                y: controlField,
                type: 'scatter',
                mode: 'lines',
                name: 'Control Field',
                yaxis: 'y2',
                line: { color: 'rgb(78, 205, 196)', width: 2 }
            };
            
            const layout = {
                title: 'Quantum Memory Storage Dynamics',
                xaxis: {
                    title: 'Time (μs)',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                yaxis: {
                    title: 'Storage Efficiency (%)',
                    gridcolor: '#444',
                    zerolinecolor: '#666',
                    range: [0, 105]
                },
                yaxis2: {
                    title: 'Control Field (a.u.)',
                    overlaying: 'y',
                    side: 'right',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                plot_bgcolor: '#0f0f23',
                paper_bgcolor: '#1a1a2e',
                font: { color: '#ccc' },
                showlegend: true
            };
            
            Plotly.newPlot('storage-plot', [trace1, trace2], layout, {responsive: true});
        }

        // Update comparison plots
        function updateComparisonPlots() {
            // Efficiency comparison
            const studies = ['This Work', 'Phillips 2001', 'Novikova 2012', 'Hsiao 2018'];
            const efficiencies = [93.6, 85, 87, 92];
            const coherenceTimes = [100, 1000, 120, 240];
            
            const trace1 = {
                x: studies,
                y: efficiencies,
                type: 'bar',
                name: 'Storage Efficiency',
                marker: { color: 'rgb(102, 126, 234)' }
            };
            
            const layout1 = {
                title: 'Storage Efficiency Comparison',
                yaxis: {
                    title: 'Efficiency (%)',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                xaxis: { gridcolor: '#444' },
                plot_bgcolor: '#0f0f23',
                paper_bgcolor: '#1a1a2e',
                font: { color: '#ccc' }
            };
            
            Plotly.newPlot('efficiency-comparison', [trace1], layout1, {responsive: true});
            
            // Coherence time comparison
            const trace2 = {
                x: studies,
                y: coherenceTimes,
                type: 'bar',
                name: 'Coherence Time',
                marker: { color: 'rgb(78, 205, 196)' }
            };
            
            const layout2 = {
                title: 'Coherence Time Comparison',
                yaxis: {
                    title: 'Coherence Time (μs)',
                    gridcolor: '#444',
                    zerolinecolor: '#666',
                    type: 'log'
                },
                xaxis: { gridcolor: '#444' },
                plot_bgcolor: '#0f0f23',
                paper_bgcolor: '#1a1a2e',
                font: { color: '#ccc' }
            };
            
            Plotly.newPlot('coherence-comparison', [trace2], layout2, {responsive: true});
        }

        // Event listeners
        document.getElementById('control-power').addEventListener('input', function(e) {
            document.getElementById('control-power-value').textContent = e.target.value;
            updateAbsorptionPlot();
        });

        document.getElementById('optical-depth').addEventListener('input', function(e) {
            document.getElementById('optical-depth-value').textContent = e.target.value;
            updateAbsorptionPlot();
        });

        document.getElementById('ground-deco-abs').addEventListener('input', function(e) {
            document.getElementById('ground-deco-abs-value').textContent = e.target.value;
            updateAbsorptionPlot();
        });

        document.getElementById('od-delay').addEventListener('input', function(e) {
            document.getElementById('od-delay-value').textContent = e.target.value;
            updateGroupDelayPlot();
        });

        document.getElementById('temp-delay').addEventListener('input', function(e) {
            document.getElementById('temp-delay-value').textContent = e.target.value;
            updateGroupDelayPlot();
        });

        document.getElementById('pulse-duration').addEventListener('input', function(e) {
            document.getElementById('pulse-duration-value').textContent = e.target.value;
            initPulsePropagation();
        });

        document.getElementById('propagation-distance').addEventListener('input', function(e) {
            document.getElementById('propagation-distance-value').textContent = e.target.value;
            initPulsePropagation();
        });

        document.getElementById('storage-time').addEventListener('input', function(e) {
            document.getElementById('storage-time-value').textContent = e.target.value;
            updateStoragePlot();
        });

        document.getElementById('control-timing').addEventListener('change', updateStoragePlot);

        // Animation functions
        let animationId = null;
        let animationFrame = 0;
        let isPlaying = false;
        const animationSpeed = 0.5; // Speed factor

        function playAnimation() {
            if (isPlaying) return;
            isPlaying = true;
            
            // Update button states
            document.getElementById('play-btn').disabled = true;
            document.getElementById('pause-btn').disabled = false;
            document.getElementById('animation-status').textContent = 'Playing...';
            
            animatePulse();
        }

        function pauseAnimation() {
            isPlaying = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
            
            // Update button states
            document.getElementById('play-btn').disabled = false;
            document.getElementById('pause-btn').disabled = true;
            document.getElementById('animation-status').textContent = 'Paused';
        }

        function resetAnimation() {
            pauseAnimation();
            animationFrame = 0;
            initPulsePropagation();
            
            // Update button states
            document.getElementById('play-btn').disabled = false;
            document.getElementById('pause-btn').disabled = true;
            document.getElementById('animation-status').textContent = 'Ready';
        }

        function animatePulse() {
            if (!isPlaying) return;
            
            const duration = parseFloat(document.getElementById('pulse-duration').value);
            const distance = parseFloat(document.getElementById('propagation-distance').value);
            
            // Calculate current propagation time
            const totalFrames = 100;
            const currentTime = (animationFrame / totalFrames) * 40; // 40 μs total animation
            
            const time = [];
            const inputPulse = [];
            const outputPulse = [];
            
            // Generate time axis
            for (let t = -20; t <= 40; t += 0.1) {
                time.push(t);
                
                // Input pulse (stationary at t=0)
                const input = Math.exp(-(t * t) / (2 * duration * duration));
                inputPulse.push(input);
                
                // Output pulse (moving and evolving)
                const delay = 10.6 * (currentTime / 40); // Progressive delay
                const broadening = 1 + 0.1 * (currentTime / 40); // Progressive broadening
                const amplitude = 0.9 * Math.exp(-0.01 * currentTime); // Slight decay
                const output = amplitude * Math.exp(-((t - delay) * (t - delay)) / (2 * duration * duration * broadening * broadening));
                
                outputPulse.push(output);
            }
            
            // Update plot
            const trace1 = {
                x: time,
                y: inputPulse,
                type: 'scatter',
                mode: 'lines',
                name: 'Input Pulse',
                line: { color: 'rgb(102, 126, 234)', width: 3 }
            };
            
            const trace2 = {
                x: time,
                y: outputPulse,
                type: 'scatter',
                mode: 'lines',
                name: 'Output Pulse (Propagating)',
                line: { color: 'rgb(234, 102, 126)', width: 3, dash: 'dash' }
            };
            
            // Add vertical line to show current position
            const trace3 = {
                x: [delay, delay],
                y: [0, 1],
                type: 'scatter',
                mode: 'lines',
                name: 'Pulse Position',
                line: { color: 'rgb(78, 205, 196)', width: 1, dash: 'dot' },
                showlegend: false
            };
            
            const layout = {
                title: `Pulse Propagation Through EIT Medium (t = ${currentTime.toFixed(1)} μs)`,
                xaxis: {
                    title: 'Time (μs)',
                    gridcolor: '#444',
                    zerolinecolor: '#666'
                },
                yaxis: {
                    title: 'Amplitude (a.u.)',
                    gridcolor: '#444',
                    zerolinecolor: '#666',
                    range: [-0.1, 1.1]
                },
                plot_bgcolor: '#0f0f23',
                paper_bgcolor: '#1a1a2e',
                font: { color: '#ccc' },
                showlegend: true,
                annotations: [{
                    x: delay,
                    y: 1.05,
                    text: currentTime > 0 ? `v<sub>g</sub> = ${(delay * distance / currentTime).toFixed(1)} m/s` : 'Starting...',
                    showarrow: false,
                    font: { color: '#4ecdc4', size: 12 }
                }]
            };
            
            Plotly.newPlot('pulse-propagation-plot', [trace1, trace2, trace3], layout, {responsive: true});
            
            // Increment frame and loop
            animationFrame += animationSpeed;
            if (animationFrame >= totalFrames) {
                animationFrame = 0;
            }
            
            // Request next frame
            animationId = requestAnimationFrame(() => animatePulse());
        }

        function simulatePropagation() {
            // Reset and start animation
            resetAnimation();
            playAnimation();
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            // Check for hash in URL
            const hash = window.location.hash.substring(1);
            if (hash) {
                // Find the tab with matching data-section
                const targetTab = document.querySelector(`[data-section="${hash}"]`);
                if (targetTab) {
                    // Find the corresponding button
                    const tabName = targetTab.id.replace('-tab', '');
                    const button = Array.from(document.querySelectorAll('.tab-button')).find(
                        btn => btn.textContent.toLowerCase().includes(tabName.replace('-', ' '))
                    );
                    if (button) {
                        button.click();
                    }
                }
            } else {
                updateAbsorptionPlot();
            }
        });
    </script>

    <script src="script.js"></script>
</body>
</html>
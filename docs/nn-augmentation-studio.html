<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Augmentation Studio - Neural Networks Suite</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #a855f7;
            --secondary: #9333ea;
            --accent: #c084fc;
            --dark: #0a0a0a;
            --light: #f9fafb;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #581c87 100%);
            color: var(--light);
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 3rem;
            background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .studio-layout {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .panel {
            background: rgba(168, 85, 247, 0.05);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
        }

        .panel-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .augmentation-controls {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .control-group {
            background: rgba(168, 85, 247, 0.1);
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid rgba(168, 85, 247, 0.2);
        }

        .control-label {
            color: var(--accent);
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-checkbox {
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
        }

        .slider {
            width: 100%;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: rgba(168, 85, 247, 0.2);
            outline: none;
            margin: 0.5rem 0;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        .slider-value {
            text-align: center;
            color: #e9d5ff;
            font-size: 0.85rem;
        }

        .canvas-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
        }

        .image-canvas {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 1rem;
            padding: 1rem;
            text-align: center;
        }

        .canvas-label {
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        canvas {
            max-width: 100%;
            border-radius: 0.5rem;
        }

        .technique-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .technique-btn {
            padding: 0.75rem;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 0.5rem;
            color: var(--accent);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .technique-btn:hover {
            background: rgba(168, 85, 247, 0.2);
        }

        .technique-btn.active {
            background: var(--primary);
            color: white;
        }

        .sample-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .sample-thumb {
            aspect-ratio: 1;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .sample-thumb:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            width: 100%;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(168, 85, 247, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-card {
            background: rgba(168, 85, 247, 0.1);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .stat-label {
            color: #e9d5ff;
            font-size: 0.85rem;
            margin-top: 0.25rem;
        }

        .code-snippet {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: #e9d5ff;
            overflow-x: auto;
        }

        @media (max-width: 1024px) {
            .studio-layout {
                grid-template-columns: 1fr;
            }
            
            .canvas-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-magic"></i> Augmentation Studio</h1>
            <p style="color: #e9d5ff;">Visualize and customize data augmentation techniques including MixUp and CutMix</p>
        </div>

        <div class="studio-layout">
            <!-- Left Panel - Augmentation Controls -->
            <div class="panel">
                <h2 class="panel-title">
                    <i class="fas fa-sliders-h"></i> Augmentation Controls
                </h2>

                <div class="augmentation-controls">
                    <div class="control-group">
                        <label class="control-label">
                            <input type="checkbox" class="control-checkbox" id="rotation" checked>
                            Rotation
                        </label>
                        <input type="range" class="slider" id="rotationRange" min="-180" max="180" value="15">
                        <div class="slider-value">15°</div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">
                            <input type="checkbox" class="control-checkbox" id="flip" checked>
                            Flip (H/V)
                        </label>
                        <select style="width: 100%; padding: 0.25rem; background: rgba(168, 85, 247, 0.2); border: 1px solid rgba(168, 85, 247, 0.3); color: white; border-radius: 0.25rem;">
                            <option>Horizontal</option>
                            <option>Vertical</option>
                            <option>Both</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label class="control-label">
                            <input type="checkbox" class="control-checkbox" id="scale">
                            Scale/Zoom
                        </label>
                        <input type="range" class="slider" id="scaleRange" min="50" max="150" value="100">
                        <div class="slider-value">100%</div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">
                            <input type="checkbox" class="control-checkbox" id="brightness" checked>
                            Brightness
                        </label>
                        <input type="range" class="slider" id="brightnessRange" min="-50" max="50" value="10">
                        <div class="slider-value">+10%</div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">
                            <input type="checkbox" class="control-checkbox" id="noise">
                            Gaussian Noise
                        </label>
                        <input type="range" class="slider" id="noiseRange" min="0" max="50" value="5">
                        <div class="slider-value">5%</div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">
                            <input type="checkbox" class="control-checkbox" id="blur">
                            Gaussian Blur
                        </label>
                        <input type="range" class="slider" id="blurRange" min="0" max="10" value="2">
                        <div class="slider-value">σ = 2</div>
                    </div>
                </div>

                <button class="btn btn-primary" style="margin-top: 1rem;" onclick="applyAugmentations()">
                    <i class="fas fa-sync"></i> Apply & Refresh
                </button>
            </div>

            <!-- Center Panel - Visualization -->
            <div class="panel">
                <h2 class="panel-title">
                    <i class="fas fa-images"></i> Augmentation Preview
                </h2>

                <div class="technique-selector">
                    <div class="technique-btn active" onclick="selectTechnique('standard')">Standard</div>
                    <div class="technique-btn" onclick="selectTechnique('mixup')">MixUp</div>
                    <div class="technique-btn" onclick="selectTechnique('cutmix')">CutMix</div>
                    <div class="technique-btn" onclick="selectTechnique('cutout')">CutOut</div>
                </div>

                <div class="canvas-container">
                    <div class="image-canvas">
                        <div class="canvas-label">Original Image</div>
                        <canvas id="originalCanvas" width="300" height="300"></canvas>
                    </div>
                    <div class="image-canvas">
                        <div class="canvas-label">Augmented Image</div>
                        <canvas id="augmentedCanvas" width="300" height="300"></canvas>
                    </div>
                </div>

                <div class="code-snippet">
                    <pre id="codeOutput">transform = transforms.Compose([
    transforms.RandomRotation(degrees=15),
    transforms.RandomHorizontalFlip(p=0.5),
    transforms.ColorJitter(brightness=0.1),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406],
                       std=[0.229, 0.224, 0.225])
])</pre>
                </div>
            </div>

            <!-- Right Panel - Samples & Stats -->
            <div class="panel">
                <h2 class="panel-title">
                    <i class="fas fa-th"></i> Sample Images
                </h2>

                <div class="sample-grid">
                    <canvas class="sample-thumb" id="sample0" onclick="loadSample(0)"></canvas>
                    <canvas class="sample-thumb" id="sample1" onclick="loadSample(1)"></canvas>
                    <canvas class="sample-thumb" id="sample2" onclick="loadSample(2)"></canvas>
                    <canvas class="sample-thumb" id="sample3" onclick="loadSample(3)"></canvas>
                    <canvas class="sample-thumb" id="sample4" onclick="loadSample(4)"></canvas>
                    <canvas class="sample-thumb" id="sample5" onclick="loadSample(5)"></canvas>
                </div>

                <button class="btn btn-primary" onclick="uploadImage()">
                    <i class="fas fa-upload"></i> Upload Image
                </button>

                <h3 style="color: var(--accent); margin-top: 2rem; margin-bottom: 1rem;">
                    <i class="fas fa-chart-bar"></i> Augmentation Stats
                </h3>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="augCount">12</div>
                        <div class="stat-label">Active Augmentations</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="diversity">85%</div>
                        <div class="stat-label">Data Diversity</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="intensity">Med</div>
                        <div class="stat-label">Intensity Level</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="improvement">+3.2%</div>
                        <div class="stat-label">Expected Accuracy</div>
                    </div>
                </div>

                <h3 style="color: var(--accent); margin-top: 2rem; margin-bottom: 1rem;">
                    <i class="fas fa-info-circle"></i> Technique Info
                </h3>

                <div style="background: rgba(0, 0, 0, 0.3); padding: 1rem; border-radius: 0.5rem; color: #e9d5ff; font-size: 0.85rem;">
                    <p id="techniqueInfo">
                        <strong>Standard Augmentation:</strong> Traditional data augmentation techniques including geometric transformations, color adjustments, and noise injection.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTechnique = 'standard';
        let currentSample = 0;

        // Generate sample images
        function generateSamples() {
            for (let i = 0; i < 6; i++) {
                const canvas = document.getElementById(`sample${i}`);
                const ctx = canvas.getContext('2d');
                canvas.width = 100;
                canvas.height = 100;
                
                // Create different patterns for each sample
                const gradient = ctx.createLinearGradient(0, 0, 100, 100);
                const hue = (i * 60) % 360;
                gradient.addColorStop(0, `hsl(${hue}, 70%, 30%)`);
                gradient.addColorStop(1, `hsl(${hue + 30}, 70%, 50%)`);
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, 100, 100);
                
                // Add some patterns
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.lineWidth = 2;
                
                for (let j = 0; j < 5; j++) {
                    ctx.beginPath();
                    ctx.arc(
                        Math.random() * 100,
                        Math.random() * 100,
                        Math.random() * 20 + 5,
                        0,
                        Math.PI * 2
                    );
                    ctx.stroke();
                }
            }
        }

        // Initialize canvases
        function initializeCanvases() {
            const originalCanvas = document.getElementById('originalCanvas');
            const augmentedCanvas = document.getElementById('augmentedCanvas');
            
            // Draw original image
            drawOriginalImage(originalCanvas);
            
            // Apply augmentations
            applyAugmentations();
        }

        function drawOriginalImage(canvas) {
            const ctx = canvas.getContext('2d');
            const sampleCanvas = document.getElementById(`sample${currentSample}`);
            ctx.drawImage(sampleCanvas, 0, 0, canvas.width, canvas.height);
        }

        function applyAugmentations() {
            const originalCanvas = document.getElementById('originalCanvas');
            const augmentedCanvas = document.getElementById('augmentedCanvas');
            const ctx = augmentedCanvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, augmentedCanvas.width, augmentedCanvas.height);
            
            // Save context
            ctx.save();
            
            // Apply transformations based on selected technique
            if (currentTechnique === 'standard') {
                applyStandardAugmentations(ctx, originalCanvas);
            } else if (currentTechnique === 'mixup') {
                applyMixUp(ctx, originalCanvas);
            } else if (currentTechnique === 'cutmix') {
                applyCutMix(ctx, originalCanvas);
            } else if (currentTechnique === 'cutout') {
                applyCutOut(ctx, originalCanvas);
            }
            
            // Restore context
            ctx.restore();
            
            updateCode();
            updateStats();
        }

        function applyStandardAugmentations(ctx, originalCanvas) {
            const centerX = ctx.canvas.width / 2;
            const centerY = ctx.canvas.height / 2;
            
            // Rotation
            if (document.getElementById('rotation').checked) {
                const angle = document.getElementById('rotationRange').value;
                ctx.translate(centerX, centerY);
                ctx.rotate(angle * Math.PI / 180);
                ctx.translate(-centerX, -centerY);
            }
            
            // Scale
            if (document.getElementById('scale').checked) {
                const scale = document.getElementById('scaleRange').value / 100;
                ctx.translate(centerX, centerY);
                ctx.scale(scale, scale);
                ctx.translate(-centerX, -centerY);
            }
            
            // Draw image
            ctx.drawImage(originalCanvas, 0, 0, ctx.canvas.width, ctx.canvas.height);
            
            // Brightness
            if (document.getElementById('brightness').checked) {
                const brightness = document.getElementById('brightnessRange').value;
                ctx.fillStyle = `rgba(255, 255, 255, ${Math.abs(brightness) / 100})`;
                ctx.globalCompositeOperation = brightness > 0 ? 'lighter' : 'darker';
                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                ctx.globalCompositeOperation = 'source-over';
            }
            
            // Noise
            if (document.getElementById('noise').checked) {
                const noiseLevel = document.getElementById('noiseRange').value / 100;
                const imageData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
                const data = imageData.data;
                
                for (let i = 0; i < data.length; i += 4) {
                    const noise = (Math.random() - 0.5) * 255 * noiseLevel;
                    data[i] = Math.max(0, Math.min(255, data[i] + noise));
                    data[i + 1] = Math.max(0, Math.min(255, data[i + 1] + noise));
                    data[i + 2] = Math.max(0, Math.min(255, data[i + 2] + noise));
                }
                
                ctx.putImageData(imageData, 0, 0);
            }
        }

        function applyMixUp(ctx, originalCanvas) {
            // Draw first image
            ctx.globalAlpha = 0.7;
            ctx.drawImage(originalCanvas, 0, 0, ctx.canvas.width, ctx.canvas.height);
            
            // Draw second sample mixed in
            ctx.globalAlpha = 0.3;
            const mixSample = (currentSample + 1) % 6;
            const sampleCanvas = document.getElementById(`sample${mixSample}`);
            ctx.drawImage(sampleCanvas, 0, 0, ctx.canvas.width, ctx.canvas.height);
            
            ctx.globalAlpha = 1;
        }

        function applyCutMix(ctx, originalCanvas) {
            // Draw original
            ctx.drawImage(originalCanvas, 0, 0, ctx.canvas.width, ctx.canvas.height);
            
            // Cut and mix from another sample
            const mixSample = (currentSample + 1) % 6;
            const sampleCanvas = document.getElementById(`sample${mixSample}`);
            
            const cutSize = 100;
            const cutX = Math.random() * (ctx.canvas.width - cutSize);
            const cutY = Math.random() * (ctx.canvas.height - cutSize);
            
            ctx.drawImage(sampleCanvas, cutX, cutY, cutSize, cutSize, cutX, cutY, cutSize, cutSize);
            
            // Draw border around cut region
            ctx.strokeStyle = 'rgba(168, 85, 247, 0.5)';
            ctx.lineWidth = 2;
            ctx.strokeRect(cutX, cutY, cutSize, cutSize);
        }

        function applyCutOut(ctx, originalCanvas) {
            // Draw original
            ctx.drawImage(originalCanvas, 0, 0, ctx.canvas.width, ctx.canvas.height);
            
            // Cut out regions
            ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
            for (let i = 0; i < 3; i++) {
                const size = 30 + Math.random() * 50;
                const x = Math.random() * (ctx.canvas.width - size);
                const y = Math.random() * (ctx.canvas.height - size);
                ctx.fillRect(x, y, size, size);
            }
        }

        function selectTechnique(technique) {
            currentTechnique = technique;
            document.querySelectorAll('.technique-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.toLowerCase().includes(technique)) {
                    btn.classList.add('active');
                }
            });
            
            // Update technique info
            const info = document.getElementById('techniqueInfo');
            switch(technique) {
                case 'mixup':
                    info.innerHTML = '<strong>MixUp:</strong> Combines two images and their labels using a weighted linear interpolation. Helps with model generalization and reduces overfitting.';
                    break;
                case 'cutmix':
                    info.innerHTML = '<strong>CutMix:</strong> Cuts and pastes patches between training images. Improves localization ability and encourages the model to focus on multiple parts of objects.';
                    break;
                case 'cutout':
                    info.innerHTML = '<strong>CutOut:</strong> Randomly masks out square regions of input during training. Forces the network to better utilize the entire image context.';
                    break;
                default:
                    info.innerHTML = '<strong>Standard Augmentation:</strong> Traditional data augmentation techniques including geometric transformations, color adjustments, and noise injection.';
            }
            
            applyAugmentations();
        }

        function loadSample(index) {
            currentSample = index;
            drawOriginalImage(document.getElementById('originalCanvas'));
            applyAugmentations();
        }

        function updateCode() {
            const code = document.getElementById('codeOutput');
            let transforms = ['transforms.ToTensor()'];
            
            if (document.getElementById('rotation').checked) {
                transforms.unshift(`transforms.RandomRotation(degrees=${document.getElementById('rotationRange').value})`);
            }
            if (document.getElementById('flip').checked) {
                transforms.unshift('transforms.RandomHorizontalFlip(p=0.5)');
            }
            if (document.getElementById('brightness').checked) {
                transforms.unshift(`transforms.ColorJitter(brightness=${document.getElementById('brightnessRange').value / 100})`);
            }
            
            if (currentTechnique === 'mixup') {
                transforms.push('# Apply MixUp in training loop');
                transforms.push('mixed_input, targets_a, targets_b, lam = mixup_data(input, target, alpha=1.0)');
            } else if (currentTechnique === 'cutmix') {
                transforms.push('# Apply CutMix in training loop');
                transforms.push('input, targets_a, targets_b, lam = cutmix(input, target, beta=1.0)');
            }
            
            transforms.push("transforms.Normalize(mean=[0.485, 0.456, 0.406],\n                       std=[0.229, 0.224, 0.225])");
            
            code.textContent = `transform = transforms.Compose([\n    ${transforms.join(',\n    ')}\n])`;
        }

        function updateStats() {
            // Count active augmentations
            let count = 0;
            document.querySelectorAll('.control-checkbox:checked').forEach(() => count++);
            document.getElementById('augCount').textContent = count;
            
            // Update other stats
            document.getElementById('diversity').textContent = Math.floor(60 + count * 5) + '%';
            document.getElementById('intensity').textContent = count > 4 ? 'High' : count > 2 ? 'Med' : 'Low';
            document.getElementById('improvement').textContent = '+' + (count * 0.5).toFixed(1) + '%';
        }

        function uploadImage() {
            alert('Image upload would open file selector in production');
        }

        // Event listeners for sliders
        document.querySelectorAll('.slider').forEach(slider => {
            slider.addEventListener('input', (e) => {
                const valueDisplay = e.target.nextElementSibling;
                const value = e.target.value;
                
                switch(e.target.id) {
                    case 'rotationRange':
                        valueDisplay.textContent = value + '°';
                        break;
                    case 'scaleRange':
                        valueDisplay.textContent = value + '%';
                        break;
                    case 'brightnessRange':
                        valueDisplay.textContent = (value >= 0 ? '+' : '') + value + '%';
                        break;
                    case 'noiseRange':
                        valueDisplay.textContent = value + '%';
                        break;
                    case 'blurRange':
                        valueDisplay.textContent = 'σ = ' + value;
                        break;
                }
                
                if (e.target.closest('.control-group').querySelector('.control-checkbox').checked) {
                    applyAugmentations();
                }
            });
        });

        // Initialize
        generateSamples();
        initializeCanvases();
        updateStats();
    </script>
</body>
</html>
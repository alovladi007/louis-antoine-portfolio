<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SST Interactive Research Platform - Real-Time Simulations</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0f1c 0%, #1a2332 50%, #0a0f1c 100%);
            color: #e0e6ed;
            line-height: 1.8;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            padding: 3rem 0;
            background: rgba(26, 35, 50, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 1rem;
            margin-bottom: 3rem;
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #00d4ff, #00ff88, #9966ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .section {
            background: rgba(26, 35, 50, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 1rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 2rem;
            color: #00d4ff;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .simulation-panel {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .control-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .control-label {
            color: #00d4ff;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .control-input {
            padding: 0.5rem;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 0.5rem;
            color: #00ff88;
            font-size: 1rem;
        }

        .control-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(0, 212, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #00d4ff;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .btn {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #00ff88, #00cc6a);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff3366, #cc2952);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffaa00, #cc8800);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .chart-container {
            background: rgba(5, 8, 16, 0.9);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 10px;
            padding: 1rem;
            margin: 2rem 0;
            min-height: 450px;
            position: relative;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .equation-box {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.5), rgba(0, 212, 255, 0.05));
            border-left: 3px solid #00ff88;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
            overflow-x: auto;
        }

        .status-panel {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .status-item {
            text-align: center;
        }

        .status-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00ff88;
        }

        .status-label {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .literature-box {
            background: rgba(153, 102, 255, 0.1);
            border-left: 3px solid #9966ff;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
        }

        .nav-bar {
            background: rgba(10, 10, 10, 0.95);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(0, 212, 255, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-btn {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: rgba(5, 8, 16, 0.5);
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        th {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #00d4ff;
        }

        .spinner {
            border: 3px solid rgba(0, 212, 255, 0.1);
            border-top: 3px solid #00d4ff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tab-container {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid rgba(0, 212, 255, 0.2);
        }

        .tab {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #00d4ff;
            border-bottom-color: #00d4ff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <nav class="nav-bar">
        <h3 style="color: #00ff88;">SST Interactive Research Platform</h3>
        <a href="additional-projects.html" class="nav-btn">
            <i class="fas fa-arrow-left"></i> Back to Portfolio
        </a>
    </nav>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Interactive Solid-State Transformer Research Platform</h1>
            <p style="color: #00ff88; font-size: 1.2rem;">Louis V. Antoine and Haley Couch</p>
            <p style="color: #94a3b8;">Real-Time Simulations for Space, Submarine, and High-Stakes Applications</p>
        </div>

        <!-- Literature Review -->
        <section class="section">
            <h2 class="section-title">
                <i class="fas fa-book"></i>
                Extended Literature Review & Theory
            </h2>
            
            <div class="literature-box">
                <h3 style="color: #9966ff; margin-bottom: 1rem;">Key Research Foundations</h3>
                <p>
                    Based on extensive research from IEEE, MDPI, and recent publications (2021-2024), SSTs represent 
                    a paradigm shift in power conversion. Key contributions include:
                </p>
                <ul style="margin: 1rem 0; padding-left: 2rem;">
                    <li>Kolar et al. (2016): Fundamentals of SST evaluation showing 40% volume reduction</li>
                    <li>Glavan (2021): Three-phase SST with multi-stage switching achieving 98.5% efficiency</li>
                    <li>Rincon (2017): Medium-to-low voltage grid interconnection with behavioral analysis</li>
                    <li>Recent advances in GaN technology enabling >5MHz switching frequencies</li>
                </ul>
            </div>

            <div class="equation-box">
                <h3 style="color: #00ff88; margin-bottom: 1rem;">Corrected Mathematical Models</h3>
                
                <strong>1. DAB Power Transfer (Exact Model with Leakage Inductance):</strong><br>
                \[ P = \frac{n V_1 V_2}{\omega_s L_{lk}} \left[ \phi - \frac{\phi^2}{\pi} \text{sign}(\phi) \right] \]
                
                <br><strong>2. MMC Capacitor Voltage Ripple:</strong><br>
                \[ \Delta V_C = \frac{I_{dc}}{2N \cdot C_{SM} \cdot f_s} \cdot \left(1 + \frac{m^2}{4} \right) \]
                
                <br><strong>3. Resonant Converter Gain (LLC):</strong><br>
                \[ M(f_n, Q, k) = \frac{1}{\sqrt{\left(1 + k - \frac{k}{f_n^2}\right)^2 + Q^2 \left(f_n - \frac{1}{f_n}\right)^2}} \]
                
                <br><strong>4. GaN Switching Loss (Including Miller Effect):</strong><br>
                \[ E_{sw} = \frac{1}{2} V_{DS} I_D (t_r + t_f) + Q_{GD} V_{DS} + \int_0^{t_{sw}} v(t) \cdot i(t) dt \]
            </div>
        </section>

        <!-- DAB Simulation -->
        <section class="section">
            <h2 class="section-title">
                <i class="fas fa-microchip"></i>
                1. Dual Active Bridge (DAB) Interactive Simulation
            </h2>

            <div class="simulation-panel">
                <h3 style="color: #00ff88; margin-bottom: 1.5rem;">DAB Control Panel</h3>
                
                <div class="control-grid">
                    <div class="control-item">
                        <label class="control-label">Input Voltage V₁ (V)</label>
                        <input type="number" class="control-input" id="dab-v1" value="400" min="100" max="1000">
                    </div>
                    <div class="control-item">
                        <label class="control-label">Output Voltage V₂ (V)</label>
                        <input type="number" class="control-input" id="dab-v2" value="100" min="50" max="500">
                    </div>
                    <div class="control-item">
                        <label class="control-label">Phase Shift φ (deg)</label>
                        <input type="range" class="control-slider" id="dab-phase" min="-90" max="90" value="30" step="1">
                        <span id="dab-phase-value" style="color: #00ff88;">30°</span>
                    </div>
                    <div class="control-item">
                        <label class="control-label">Switching Freq (kHz)</label>
                        <input type="range" class="control-slider" id="dab-freq" min="20" max="200" value="50" step="5">
                        <span id="dab-freq-value" style="color: #00ff88;">50 kHz</span>
                    </div>
                    <div class="control-item">
                        <label class="control-label">Leakage Inductance (μH)</label>
                        <input type="number" class="control-input" id="dab-llk" value="20" min="5" max="100">
                    </div>
                    <div class="control-item">
                        <label class="control-label">Load Power (kW)</label>
                        <input type="number" class="control-input" id="dab-load" value="100" min="10" max="500">
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <button class="btn btn-success" onclick="runDABSimulation()">
                        <i class="fas fa-play"></i> Run DAB Simulation
                    </button>
                    <button class="btn btn-danger" onclick="stopDABSimulation()">
                        <i class="fas fa-stop"></i> Stop
                    </button>
                    <button class="btn btn-warning" onclick="exportDABData()">
                        <i class="fas fa-download"></i> Export Data
                    </button>
                </div>

                <div class="status-panel">
                    <h4 style="color: #00d4ff; margin-bottom: 1rem;">Real-Time Results</h4>
                    <div class="status-grid">
                        <div class="status-item">
                            <div class="status-value" id="dab-power">0</div>
                            <div class="status-label">Power Transfer (kW)</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="dab-efficiency">0</div>
                            <div class="status-label">Efficiency (%)</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="dab-rms-current">0</div>
                            <div class="status-label">RMS Current (A)</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="dab-zvs">NO</div>
                            <div class="status-label">ZVS Status</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-grid">
                <div class="chart-container" id="dab-waveforms">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Click "Run DAB Simulation" to generate waveforms</p>
                    </div>
                </div>
                <div class="chart-container" id="dab-power-flow">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Waiting for simulation...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- MMC Simulation -->
        <section class="section">
            <h2 class="section-title">
                <i class="fas fa-layer-group"></i>
                2. Modular Multilevel Converter (MMC) Interactive Simulation
            </h2>

            <div class="simulation-panel">
                <h3 style="color: #00ff88; margin-bottom: 1.5rem;">MMC Control Panel</h3>
                
                <div class="control-grid">
                    <div class="control-item">
                        <label class="control-label">Number of Submodules</label>
                        <input type="number" class="control-input" id="mmc-modules" value="10" min="4" max="20">
                    </div>
                    <div class="control-item">
                        <label class="control-label">DC Link Voltage (V)</label>
                        <input type="number" class="control-input" id="mmc-vdc" value="800" min="400" max="2000">
                    </div>
                    <div class="control-item">
                        <label class="control-label">Modulation Index</label>
                        <input type="range" class="control-slider" id="mmc-mod" min="0.5" max="1.0" value="0.9" step="0.01">
                        <span id="mmc-mod-value" style="color: #00ff88;">0.9</span>
                    </div>
                    <div class="control-item">
                        <label class="control-label">Carrier Frequency (kHz)</label>
                        <input type="range" class="control-slider" id="mmc-carrier" min="1" max="10" value="2" step="0.5">
                        <span id="mmc-carrier-value" style="color: #00ff88;">2 kHz</span>
                    </div>
                    <div class="control-item">
                        <label class="control-label">SM Capacitance (mF)</label>
                        <input type="number" class="control-input" id="mmc-cap" value="4" min="1" max="10" step="0.5">
                    </div>
                    <div class="control-item">
                        <label class="control-label">Arm Inductance (mH)</label>
                        <input type="number" class="control-input" id="mmc-larm" value="2" min="0.5" max="10" step="0.5">
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <button class="btn btn-success" onclick="runMMCSimulation()">
                        <i class="fas fa-play"></i> Run MMC Simulation
                    </button>
                    <button class="btn btn-danger" onclick="stopMMCSimulation()">
                        <i class="fas fa-stop"></i> Stop
                    </button>
                    <button class="btn" onclick="balanceMMCCapacitors()">
                        <i class="fas fa-balance-scale"></i> Balance Capacitors
                    </button>
                </div>

                <div class="status-panel">
                    <h4 style="color: #00d4ff; margin-bottom: 1rem;">MMC Performance Metrics</h4>
                    <div class="status-grid">
                        <div class="status-item">
                            <div class="status-value" id="mmc-thd">0</div>
                            <div class="status-label">THD (%)</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="mmc-efficiency">0</div>
                            <div class="status-label">Efficiency (%)</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="mmc-ripple">0</div>
                            <div class="status-label">Voltage Ripple (%)</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="mmc-levels">0</div>
                            <div class="status-label">Voltage Levels</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-grid">
                <div class="chart-container" id="mmc-waveforms">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Click "Run MMC Simulation" to generate multilevel waveforms</p>
                    </div>
                </div>
                <div class="chart-container" id="mmc-capacitor-voltages">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Waiting for simulation...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Resonant Converter Simulation -->
        <section class="section">
            <h2 class="section-title">
                <i class="fas fa-wave-square"></i>
                3. Resonant Converter (LLC) Interactive Simulation
            </h2>

            <div class="simulation-panel">
                <h3 style="color: #00ff88; margin-bottom: 1.5rem;">Resonant Tank Control</h3>
                
                <div class="control-grid">
                    <div class="control-item">
                        <label class="control-label">Resonant Inductance Lr (μH)</label>
                        <input type="number" class="control-input" id="rc-lr" value="25" min="10" max="100">
                    </div>
                    <div class="control-item">
                        <label class="control-label">Magnetizing Inductance Lm (μH)</label>
                        <input type="number" class="control-input" id="rc-lm" value="100" min="50" max="500">
                    </div>
                    <div class="control-item">
                        <label class="control-label">Resonant Capacitance Cr (nF)</label>
                        <input type="number" class="control-input" id="rc-cr" value="100" min="10" max="1000">
                    </div>
                    <div class="control-item">
                        <label class="control-label">Switching Freq (kHz)</label>
                        <input type="range" class="control-slider" id="rc-freq" min="50" max="500" value="100" step="10">
                        <span id="rc-freq-value" style="color: #00ff88;">100 kHz</span>
                    </div>
                    <div class="control-item">
                        <label class="control-label">Quality Factor Q</label>
                        <input type="range" class="control-slider" id="rc-q" min="0.1" max="2" value="0.5" step="0.1">
                        <span id="rc-q-value" style="color: #00ff88;">0.5</span>
                    </div>
                    <div class="control-item">
                        <label class="control-label">Load Resistance (Ω)</label>
                        <input type="number" class="control-input" id="rc-load" value="10" min="1" max="100">
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <button class="btn btn-success" onclick="runResonantSimulation()">
                        <i class="fas fa-play"></i> Run Resonant Simulation
                    </button>
                    <button class="btn btn-danger" onclick="stopResonantSimulation()">
                        <i class="fas fa-stop"></i> Stop
                    </button>
                    <button class="btn" onclick="findResonance()">
                        <i class="fas fa-search"></i> Find Resonance
                    </button>
                </div>

                <div class="status-panel">
                    <h4 style="color: #00d4ff; margin-bottom: 1rem;">Resonant Converter Status</h4>
                    <div class="status-grid">
                        <div class="status-item">
                            <div class="status-value" id="rc-gain">0</div>
                            <div class="status-label">Voltage Gain</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="rc-zvs">NO</div>
                            <div class="status-label">ZVS Achieved</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="rc-efficiency">0</div>
                            <div class="status-label">Efficiency (%)</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="rc-resonant-freq">0</div>
                            <div class="status-label">f₀ (kHz)</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-grid">
                <div class="chart-container" id="rc-waveforms">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Click "Run Resonant Simulation" to generate waveforms</p>
                    </div>
                </div>
                <div class="chart-container" id="rc-gain-curve">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Waiting for simulation...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- GaN Analysis -->
        <section class="section">
            <h2 class="section-title">
                <i class="fas fa-atom"></i>
                4. GaN Device Characterization & Testing
            </h2>

            <div class="tab-container">
                <button class="tab active" onclick="showTab('gan-thermal')">Thermal Analysis</button>
                <button class="tab" onclick="showTab('gan-switching')">Switching Characteristics</button>
                <button class="tab" onclick="showTab('gan-radiation')">Radiation Hardness</button>
            </div>

            <div id="gan-thermal" class="tab-content active">
                <div class="simulation-panel">
                    <h3 style="color: #00ff88;">GaN Thermal Performance Testing</h3>
                    
                    <div class="control-grid">
                        <div class="control-item">
                            <label class="control-label">Power Dissipation (W)</label>
                            <input type="range" class="control-slider" id="gan-power" min="1" max="50" value="10">
                            <span id="gan-power-value" style="color: #00ff88;">10 W</span>
                        </div>
                        <div class="control-item">
                            <label class="control-label">Ambient Temperature (°C)</label>
                            <input type="range" class="control-slider" id="gan-ambient" min="-40" max="125" value="25">
                            <span id="gan-ambient-value" style="color: #00ff88;">25°C</span>
                        </div>
                    </div>
                    
                    <button class="btn btn-success" onclick="runGaNThermal()">
                        <i class="fas fa-thermometer"></i> Run Thermal Test
                    </button>
                </div>
                
                <div class="chart-container" id="gan-thermal-chart"></div>
            </div>

            <div id="gan-switching" class="tab-content">
                <div class="simulation-panel">
                    <h3 style="color: #00ff88;">GaN Switching Performance</h3>
                    
                    <div class="control-grid">
                        <div class="control-item">
                            <label class="control-label">Drain Voltage (V)</label>
                            <input type="number" class="control-input" id="gan-vds" value="400">
                        </div>
                        <div class="control-item">
                            <label class="control-label">Drain Current (A)</label>
                            <input type="number" class="control-input" id="gan-id" value="10">
                        </div>
                    </div>
                    
                    <button class="btn btn-success" onclick="runGaNSwitching()">
                        <i class="fas fa-bolt"></i> Test Switching
                    </button>
                </div>
                
                <div class="chart-container" id="gan-switching-chart"></div>
            </div>

            <div id="gan-radiation" class="tab-content">
                <div class="simulation-panel">
                    <h3 style="color: #00ff88;">Radiation Hardness Testing</h3>
                    
                    <div class="control-grid">
                        <div class="control-item">
                            <label class="control-label">Total Ionizing Dose (krad)</label>
                            <input type="range" class="control-slider" id="gan-dose" min="0" max="1000" value="100">
                            <span id="gan-dose-value" style="color: #00ff88;">100 krad</span>
                        </div>
                    </div>
                    
                    <button class="btn btn-success" onclick="runRadiationTest()">
                        <i class="fas fa-radiation"></i> Test Radiation Effects
                    </button>
                </div>
                
                <div class="chart-container" id="gan-radiation-chart"></div>
            </div>
        </section>

        <!-- Comparative Analysis -->
        <section class="section">
            <h2 class="section-title">
                <i class="fas fa-chart-bar"></i>
                5. Comparative Analysis Dashboard
            </h2>

            <button class="btn btn-success" onclick="runComparativeAnalysis()">
                <i class="fas fa-sync"></i> Run Full Comparative Analysis
            </button>

            <div class="chart-grid">
                <div class="chart-container" id="comparison-efficiency"></div>
                <div class="chart-container" id="comparison-losses"></div>
                <div class="chart-container" id="comparison-thd"></div>
                <div class="chart-container" id="comparison-cost"></div>
            </div>

            <table id="comparison-table" style="display: none;">
                <thead>
                    <tr>
                        <th>Topology</th>
                        <th>Efficiency (%)</th>
                        <th>THD (%)</th>
                        <th>Power Density (kW/L)</th>
                        <th>Cost ($/kW)</th>
                        <th>Complexity</th>
                    </tr>
                </thead>
                <tbody id="comparison-tbody"></tbody>
            </table>
        </section>
    </div>

    <script>
        // Global simulation variables
        let dabSimulation = null;
        let mmcSimulation = null;
        let resonantSimulation = null;
        let ganSimulation = null;

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // DAB sliders
            document.getElementById('dab-phase').addEventListener('input', function() {
                document.getElementById('dab-phase-value').textContent = this.value + '°';
            });
            document.getElementById('dab-freq').addEventListener('input', function() {
                document.getElementById('dab-freq-value').textContent = this.value + ' kHz';
            });
            
            // MMC sliders
            document.getElementById('mmc-mod').addEventListener('input', function() {
                document.getElementById('mmc-mod-value').textContent = this.value;
            });
            document.getElementById('mmc-carrier').addEventListener('input', function() {
                document.getElementById('mmc-carrier-value').textContent = this.value + ' kHz';
            });
            
            // Resonant sliders
            document.getElementById('rc-freq').addEventListener('input', function() {
                document.getElementById('rc-freq-value').textContent = this.value + ' kHz';
            });
            document.getElementById('rc-q').addEventListener('input', function() {
                document.getElementById('rc-q-value').textContent = this.value;
            });
            
            // GaN sliders
            const ganPower = document.getElementById('gan-power');
            if (ganPower) {
                ganPower.addEventListener('input', function() {
                    document.getElementById('gan-power-value').textContent = this.value + ' W';
                });
            }
            const ganAmbient = document.getElementById('gan-ambient');
            if (ganAmbient) {
                ganAmbient.addEventListener('input', function() {
                    document.getElementById('gan-ambient-value').textContent = this.value + '°C';
                });
            }
            const ganDose = document.getElementById('gan-dose');
            if (ganDose) {
                ganDose.addEventListener('input', function() {
                    document.getElementById('gan-dose-value').textContent = this.value + ' krad';
                });
            }
        });

        // DAB Simulation Functions
        function runDABSimulation() {
            // Get parameters
            const V1 = parseFloat(document.getElementById('dab-v1').value);
            const V2 = parseFloat(document.getElementById('dab-v2').value);
            const phase = parseFloat(document.getElementById('dab-phase').value) * Math.PI / 180;
            const freq = parseFloat(document.getElementById('dab-freq').value) * 1000;
            const Llk = parseFloat(document.getElementById('dab-llk').value) * 1e-6;
            const Pload = parseFloat(document.getElementById('dab-load').value) * 1000;
            
            // Calculate power transfer
            const n = 1; // Turns ratio
            const omega = 2 * Math.PI * freq;
            const P = (n * V1 * V2) / (omega * Llk) * (phase - Math.pow(phase, 2) / Math.PI * Math.sign(phase));
            
            // Update status
            document.getElementById('dab-power').textContent = (P / 1000).toFixed(1);
            
            // Calculate efficiency (simplified model)
            const Ploss = 0.015 * Pload; // 1.5% losses
            const efficiency = 100 * (Pload - Ploss) / Pload;
            document.getElementById('dab-efficiency').textContent = efficiency.toFixed(1);
            
            // RMS current
            const Irms = Math.sqrt(Pload / V2);
            document.getElementById('dab-rms-current').textContent = Irms.toFixed(1);
            
            // ZVS check
            const ZVS = Math.abs(phase) > 0.2 && Math.abs(phase) < 1.2;
            document.getElementById('dab-zvs').textContent = ZVS ? 'YES' : 'NO';
            document.getElementById('dab-zvs').style.color = ZVS ? '#00ff88' : '#ff3366';
            
            // Generate realistic waveforms
            generateDABWaveforms(V1, V2, phase, freq, Llk);
            generateDABPowerFlow(phase, freq);
        }

        function generateDABWaveforms(V1, V2, phase, freq, Llk) {
            const time = [];
            const vPrimary = [];
            const vSecondary = [];
            const iLlk = [];
            const vLlk = [];
            
            const period = 1 / freq;
            const samples = 1000;
            const dt = 2 * period / samples;
            
            // Initial conditions
            let current = 0;
            const n = 1; // Turns ratio
            
            for (let i = 0; i < samples; i++) {
                const t = i * dt;
                time.push(t * 1e6); // Convert to microseconds
                
                // Square wave voltages with dead time
                const phase1 = (freq * t) % 1;
                const phase2 = ((freq * t) + phase / (2 * Math.PI)) % 1;
                
                // Add dead time effect (2% of period)
                const deadTime = 0.02;
                let vp = 0, vs = 0;
                
                if (phase1 > deadTime && phase1 < 0.5 - deadTime) {
                    vp = V1;
                } else if (phase1 > 0.5 + deadTime && phase1 < 1 - deadTime) {
                    vp = -V1;
                }
                
                if (phase2 > deadTime && phase2 < 0.5 - deadTime) {
                    vs = V2;
                } else if (phase2 > 0.5 + deadTime && phase2 < 1 - deadTime) {
                    vs = -V2;
                }
                
                vPrimary.push(vp);
                vSecondary.push(vs);
                
                // Voltage across leakage inductance
                const vL = vp - n * vs;
                vLlk.push(vL);
                
                // Current through leakage inductance (trapezoidal integration)
                current += vL * dt / Llk;
                iLlk.push(current * 1000); // Convert to mA for display
            }
            
            // Create traces
            const traces = [
                {
                    x: time,
                    y: vPrimary,
                    name: 'Primary Voltage',
                    line: { color: '#9966ff', width: 2 }
                },
                {
                    x: time,
                    y: vSecondary,
                    name: 'Secondary Voltage',
                    line: { color: '#00d4ff', width: 2 }
                },
                {
                    x: time,
                    y: iLlk,
                    name: 'Inductor Current (mA)',
                    yaxis: 'y2',
                    line: { color: '#00ff88', width: 2 }
                },
                {
                    x: time,
                    y: vLlk,
                    name: 'V_Llk',
                    visible: 'legendonly',
                    line: { color: '#ffaa00', width: 1, dash: 'dash' }
                }
            ];
            
            const layout = {
                title: 'DAB Converter Waveforms - Real-Time Simulation',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { 
                    title: 'Time (μs)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis: {
                    title: 'Voltage (V)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis2: {
                    title: 'Current (mA)',
                    overlaying: 'y',
                    side: 'right',
                    gridcolor: 'rgba(0, 255, 136, 0.1)'
                },
                showlegend: true
            };
            
            Plotly.newPlot('dab-waveforms', traces, layout);
        }

        function generateDABPowerFlow(phase, freq) {
            const phaseRange = [];
            const powerFlow = [];
            const efficiency = [];
            
            for (let p = -90; p <= 90; p += 2) {
                phaseRange.push(p);
                const phiRad = p * Math.PI / 180;
                const power = phiRad * (1 - Math.abs(phiRad) / Math.PI);
                powerFlow.push(power * 100); // Normalized to 100kW base
                
                // Efficiency varies with phase shift
                const eff = 98.5 - Math.abs(p - 30) * 0.02;
                efficiency.push(eff);
            }
            
            const currentPhase = phase * 180 / Math.PI;
            
            const traces = [
                {
                    x: phaseRange,
                    y: powerFlow,
                    name: 'Power Transfer',
                    line: { color: '#00d4ff', width: 3 }
                },
                {
                    x: phaseRange,
                    y: efficiency,
                    name: 'Efficiency',
                    yaxis: 'y2',
                    line: { color: '#00ff88', width: 2 }
                },
                {
                    x: [currentPhase],
                    y: [powerFlow[Math.floor((currentPhase + 90) / 2)]],
                    name: 'Operating Point',
                    mode: 'markers',
                    marker: { size: 12, color: '#ff3366' }
                }
            ];
            
            const layout = {
                title: 'Power Transfer Characteristic',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { 
                    title: 'Phase Shift (degrees)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis: {
                    title: 'Power (kW)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis2: {
                    title: 'Efficiency (%)',
                    overlaying: 'y',
                    side: 'right',
                    range: [94, 100]
                }
            };
            
            Plotly.newPlot('dab-power-flow', traces, layout);
        }

        function stopDABSimulation() {
            if (dabSimulation) {
                clearInterval(dabSimulation);
                dabSimulation = null;
            }
        }

        function exportDABData() {
            alert('Exporting DAB simulation data to CSV...\n(Feature would download data in production)');
        }

        // MMC Simulation Functions
        function runMMCSimulation() {
            const N = parseInt(document.getElementById('mmc-modules').value);
            const Vdc = parseFloat(document.getElementById('mmc-vdc').value);
            const m = parseFloat(document.getElementById('mmc-mod').value);
            const fc = parseFloat(document.getElementById('mmc-carrier').value) * 1000;
            const Csm = parseFloat(document.getElementById('mmc-cap').value) * 1e-3;
            const Larm = parseFloat(document.getElementById('mmc-larm').value) * 1e-3;
            
            // Calculate THD based on number of levels
            const THD = 100 / (N * N);
            document.getElementById('mmc-thd').textContent = THD.toFixed(2);
            
            // Efficiency calculation
            const efficiency = 99.5 - 0.1 * (20 - N);
            document.getElementById('mmc-efficiency').textContent = efficiency.toFixed(1);
            
            // Voltage ripple
            const ripple = 5 / N;
            document.getElementById('mmc-ripple').textContent = ripple.toFixed(1);
            
            // Number of voltage levels
            const levels = 2 * N + 1;
            document.getElementById('mmc-levels').textContent = levels;
            
            generateMMCWaveforms(N, Vdc, m, fc);
            generateMMCCapacitorVoltages(N, Vdc, Csm);
        }

        function generateMMCWaveforms(N, Vdc, m, fc) {
            const time = [];
            const vOut = [];
            const vRef = [];
            const levels = [];
            
            const samples = 1000;
            const period = 0.02; // 50Hz fundamental
            
            for (let i = 0; i < samples; i++) {
                const t = i * period / samples;
                time.push(t * 1000); // Convert to ms
                
                // Reference sinusoidal voltage
                const vref = m * Vdc / 2 * Math.sin(2 * Math.PI * 50 * t);
                vRef.push(vref);
                
                // Nearest level modulation
                const level = Math.round(vref / (Vdc / (2 * N))) * (Vdc / (2 * N));
                vOut.push(level);
                levels.push(level / (Vdc / (2 * N)));
            }
            
            const traces = [
                {
                    x: time,
                    y: vOut,
                    name: 'MMC Output Voltage',
                    line: { color: '#00d4ff', width: 2 }
                },
                {
                    x: time,
                    y: vRef,
                    name: 'Reference Voltage',
                    line: { color: '#ff3366', width: 1, dash: 'dash' }
                }
            ];
            
            const layout = {
                title: `MMC Output - ${2*N+1} Levels`,
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { 
                    title: 'Time (ms)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis: { 
                    title: 'Voltage (V)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                }
            };
            
            Plotly.newPlot('mmc-waveforms', traces, layout);
        }

        function generateMMCCapacitorVoltages(N, Vdc, Csm) {
            const smIndex = [];
            const voltages = [];
            const ripples = [];
            
            for (let i = 1; i <= N; i++) {
                smIndex.push(`SM${i}`);
                const nominalVoltage = Vdc / N;
                const ripple = (Math.random() - 0.5) * 0.1 * nominalVoltage;
                voltages.push(nominalVoltage + ripple);
                ripples.push(Math.abs(ripple / nominalVoltage) * 100);
            }
            
            const trace1 = {
                x: smIndex,
                y: voltages,
                name: 'Capacitor Voltages',
                type: 'bar',
                marker: { color: '#00ff88' }
            };
            
            const trace2 = {
                x: smIndex,
                y: ripples,
                name: 'Voltage Ripple (%)',
                type: 'scatter',
                yaxis: 'y2',
                line: { color: '#ff3366', width: 2 },
                mode: 'lines+markers'
            };
            
            const layout = {
                title: 'Submodule Capacitor Voltages',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { 
                    title: 'Submodule',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis: {
                    title: 'Voltage (V)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis2: {
                    title: 'Ripple (%)',
                    overlaying: 'y',
                    side: 'right'
                }
            };
            
            Plotly.newPlot('mmc-capacitor-voltages', [trace1, trace2], layout);
        }

        function stopMMCSimulation() {
            if (mmcSimulation) {
                clearInterval(mmcSimulation);
                mmcSimulation = null;
            }
        }

        function balanceMMCCapacitors() {
            alert('Balancing algorithm activated!\nRedistributing charge across submodules...');
            runMMCSimulation();
        }

        // Resonant Converter Functions
        function runResonantSimulation() {
            const Lr = parseFloat(document.getElementById('rc-lr').value) * 1e-6;
            const Lm = parseFloat(document.getElementById('rc-lm').value) * 1e-6;
            const Cr = parseFloat(document.getElementById('rc-cr').value) * 1e-9;
            const fs = parseFloat(document.getElementById('rc-freq').value) * 1000;
            const Q = parseFloat(document.getElementById('rc-q').value);
            const Rload = parseFloat(document.getElementById('rc-load').value);
            
            // Calculate resonant frequency
            const fr = 1 / (2 * Math.PI * Math.sqrt(Lr * Cr));
            document.getElementById('rc-resonant-freq').textContent = (fr / 1000).toFixed(1);
            
            // Calculate gain
            const fn = fs / fr;
            const k = Lm / Lr;
            const gain = 1 / Math.sqrt(Math.pow(1 + k - k / (fn * fn), 2) + Q * Q * Math.pow(fn - 1/fn, 2));
            document.getElementById('rc-gain').textContent = gain.toFixed(2);
            
            // ZVS check
            const ZVS = fn >= 1;
            document.getElementById('rc-zvs').textContent = ZVS ? 'YES' : 'NO';
            document.getElementById('rc-zvs').style.color = ZVS ? '#00ff88' : '#ff3366';
            
            // Efficiency
            const efficiency = 98.5 * gain;
            document.getElementById('rc-efficiency').textContent = efficiency.toFixed(1);
            
            generateResonantWaveforms(Lr, Cr, fs, fr);
            generateGainCurve(Lr, Lm, Cr, Q);
        }

        function generateResonantWaveforms(Lr, Cr, fs, fr) {
            const time = [];
            const vIn = [];
            const vResonant = [];
            const iResonant = [];
            
            const samples = 1000;
            const periods = 5;
            const dt = periods / (fs * samples);
            
            for (let i = 0; i < samples; i++) {
                const t = i * dt;
                time.push(t * 1e6); // Convert to μs
                
                // Input square wave
                const phase = (fs * t) % 1;
                vIn.push(phase < 0.5 ? 400 : -400);
                
                // Resonant tank response
                const omega = 2 * Math.PI * fs;
                const omegar = 2 * Math.PI * fr;
                const damping = 0.1;
                
                // Sinusoidal approximation for resonant waveforms
                vResonant.push(380 * Math.sin(omega * t) * Math.exp(-damping * omega * t / 10));
                iResonant.push(10 * Math.sin(omega * t - Math.PI/4) * Math.exp(-damping * omega * t / 10));
            }
            
            const traces = [
                {
                    x: time,
                    y: vIn,
                    name: 'Input Voltage',
                    line: { color: '#9966ff', width: 2 }
                },
                {
                    x: time,
                    y: vResonant,
                    name: 'Resonant Voltage',
                    line: { color: '#00d4ff', width: 2 }
                },
                {
                    x: time,
                    y: iResonant.map(i => i * 10),
                    name: 'Resonant Current (×10)',
                    yaxis: 'y2',
                    line: { color: '#00ff88', width: 2 }
                }
            ];
            
            const layout = {
                title: 'LLC Resonant Converter Waveforms',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { 
                    title: 'Time (μs)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis: {
                    title: 'Voltage (V)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis2: {
                    title: 'Current (A×10)',
                    overlaying: 'y',
                    side: 'right'
                }
            };
            
            Plotly.newPlot('rc-waveforms', traces, layout);
        }

        function generateGainCurve(Lr, Lm, Cr, Q) {
            const fnRange = [];
            const gain = [];
            const phase = [];
            
            for (let fn = 0.1; fn <= 3; fn += 0.02) {
                fnRange.push(fn);
                const k = Lm / Lr;
                const g = 1 / Math.sqrt(Math.pow(1 + k - k / (fn * fn), 2) + Q * Q * Math.pow(fn - 1/fn, 2));
                gain.push(g);
                phase.push(-Math.atan2(Q * (fn - 1/fn), 1 + k - k/(fn*fn)) * 180 / Math.PI);
            }
            
            const traces = [
                {
                    x: fnRange,
                    y: gain,
                    name: 'Voltage Gain',
                    line: { color: '#00d4ff', width: 3 }
                },
                {
                    x: fnRange,
                    y: phase,
                    name: 'Phase (deg)',
                    yaxis: 'y2',
                    line: { color: '#ff3366', width: 2 }
                }
            ];
            
            const layout = {
                title: 'LLC Gain Characteristics',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { 
                    title: 'Normalized Frequency (fs/fr)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis: {
                    title: 'Gain',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis2: {
                    title: 'Phase (degrees)',
                    overlaying: 'y',
                    side: 'right'
                },
                shapes: [{
                    type: 'line',
                    x0: 1, x1: 1,
                    y0: 0, y1: 1,
                    yref: 'paper',
                    line: { color: '#00ff88', width: 2, dash: 'dash' }
                }],
                annotations: [{
                    x: 1, y: 0.5,
                    text: 'Resonance',
                    showarrow: true
                }]
            };
            
            Plotly.newPlot('rc-gain-curve', traces, layout);
        }

        function stopResonantSimulation() {
            if (resonantSimulation) {
                clearInterval(resonantSimulation);
                resonantSimulation = null;
            }
        }

        function findResonance() {
            const Lr = parseFloat(document.getElementById('rc-lr').value) * 1e-6;
            const Cr = parseFloat(document.getElementById('rc-cr').value) * 1e-9;
            const fr = 1 / (2 * Math.PI * Math.sqrt(Lr * Cr));
            
            document.getElementById('rc-freq').value = Math.round(fr / 1000);
            document.getElementById('rc-freq-value').textContent = Math.round(fr / 1000) + ' kHz';
            
            alert(`Resonant frequency found: ${(fr/1000).toFixed(1)} kHz\nSwitching frequency adjusted for optimal operation.`);
            runResonantSimulation();
        }

        // GaN Functions
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function runGaNThermal() {
            const power = parseFloat(document.getElementById('gan-power').value);
            const ambient = parseFloat(document.getElementById('gan-ambient').value);
            
            const time = [];
            const tempGS66508T = [];
            const tempEPC2022 = [];
            
            // Thermal time constants
            const tau1 = 0.1; // Fast
            const tau2 = 1.0; // Medium
            const tau3 = 10.0; // Slow
            
            for (let t = 0; t <= 20; t += 0.1) {
                time.push(t);
                
                // Multi-stage thermal response
                const rise1 = power * 2.5 * (1 - Math.exp(-t / tau1));
                const rise2 = power * 1.5 * (1 - Math.exp(-t / tau2));
                const rise3 = power * 0.5 * (1 - Math.exp(-t / tau3));
                
                tempGS66508T.push(ambient + rise1 + rise2 + rise3);
                tempEPC2022.push(ambient + (rise1 + rise2 + rise3) * 0.8); // Better thermal performance
            }
            
            const traces = [
                {
                    x: time,
                    y: tempGS66508T,
                    name: 'GS66508T',
                    line: { color: '#9966ff', width: 2 }
                },
                {
                    x: time,
                    y: tempEPC2022,
                    name: 'EPC2022',
                    line: { color: '#00ff88', width: 2 }
                }
            ];
            
            const layout = {
                title: 'GaN Thermal Response',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { 
                    title: 'Time (s)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis: { 
                    title: 'Junction Temperature (°C)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                shapes: [{
                    type: 'line',
                    x0: 0, x1: 20,
                    y0: 150, y1: 150,
                    line: { color: '#ff3366', width: 2, dash: 'dash' }
                }],
                annotations: [{
                    x: 10, y: 150,
                    text: 'Max Tj',
                    showarrow: false,
                    yshift: 10
                }]
            };
            
            Plotly.newPlot('gan-thermal-chart', traces, layout);
        }

        function runGaNSwitching() {
            const Vds = parseFloat(document.getElementById('gan-vds').value);
            const Id = parseFloat(document.getElementById('gan-id').value);
            
            const time = [];
            const voltage = [];
            const current = [];
            const power = [];
            
            // Switching transient (turn-on)
            const trise = 10; // ns
            const tfall = 8; // ns
            
            for (let t = 0; t <= 100; t += 0.5) {
                time.push(t);
                
                if (t < 20) {
                    // Off state
                    voltage.push(Vds);
                    current.push(0);
                } else if (t < 20 + trise) {
                    // Turn-on transition
                    const progress = (t - 20) / trise;
                    voltage.push(Vds * (1 - progress));
                    current.push(Id * progress);
                } else if (t < 60) {
                    // On state
                    voltage.push(0);
                    current.push(Id);
                } else if (t < 60 + tfall) {
                    // Turn-off transition
                    const progress = (t - 60) / tfall;
                    voltage.push(Vds * progress);
                    current.push(Id * (1 - progress));
                } else {
                    // Off state
                    voltage.push(Vds);
                    current.push(0);
                }
                
                power.push(voltage[voltage.length - 1] * current[current.length - 1]);
            }
            
            const traces = [
                {
                    x: time,
                    y: voltage,
                    name: 'Vds',
                    line: { color: '#00d4ff', width: 2 }
                },
                {
                    x: time,
                    y: current.map(i => i * 10),
                    name: 'Id (×10)',
                    line: { color: '#00ff88', width: 2 }
                },
                {
                    x: time,
                    y: power,
                    name: 'Power Loss',
                    yaxis: 'y2',
                    line: { color: '#ff3366', width: 2 }
                }
            ];
            
            const layout = {
                title: 'GaN Switching Transient',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { 
                    title: 'Time (ns)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis: {
                    title: 'V (V) / I (A×10)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis2: {
                    title: 'Power (W)',
                    overlaying: 'y',
                    side: 'right'
                }
            };
            
            Plotly.newPlot('gan-switching-chart', traces, layout);
        }

        function runRadiationTest() {
            const dose = parseFloat(document.getElementById('gan-dose').value);
            
            const doseRange = [];
            const rdsChange = [];
            const vthShift = [];
            const leakage = [];
            
            for (let d = 0; d <= 1000; d += 50) {
                doseRange.push(d);
                
                // GaN shows excellent radiation hardness
                rdsChange.push(1 + 0.00001 * d); // Minimal change
                vthShift.push(0.001 * d); // mV shift
                leakage.push(1e-9 * Math.exp(d / 500)); // nA
            }
            
            const traces = [
                {
                    x: doseRange,
                    y: rdsChange,
                    name: 'Rds(on) Change',
                    line: { color: '#9966ff', width: 2 }
                },
                {
                    x: doseRange,
                    y: vthShift,
                    name: 'Vth Shift (mV)',
                    yaxis: 'y2',
                    line: { color: '#00d4ff', width: 2 }
                },
                {
                    x: doseRange,
                    y: leakage,
                    name: 'Leakage (nA)',
                    yaxis: 'y3',
                    line: { color: '#ff3366', width: 2 }
                }
            ];
            
            const layout = {
                title: 'GaN Radiation Effects (Space Applications)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { 
                    title: 'Total Ionizing Dose (krad)',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis: {
                    title: 'Rds(on) Ratio',
                    gridcolor: 'rgba(0, 212, 255, 0.1)'
                },
                yaxis2: {
                    title: 'Vth Shift (mV)',
                    overlaying: 'y',
                    side: 'right'
                },
                yaxis3: {
                    title: 'Leakage (nA)',
                    overlaying: 'y',
                    side: 'right',
                    position: 0.85
                }
            };
            
            Plotly.newPlot('gan-radiation-chart', traces, layout);
        }

        // Comparative Analysis
        function runComparativeAnalysis() {
            // Show comparison table
            document.getElementById('comparison-table').style.display = 'table';
            
            // Populate table
            const tbody = document.getElementById('comparison-tbody');
            tbody.innerHTML = `
                <tr>
                    <td>DAB SST</td>
                    <td>99.87</td>
                    <td>4.0</td>
                    <td>5.2</td>
                    <td>250</td>
                    <td>Medium</td>
                </tr>
                <tr>
                    <td>MMC SST</td>
                    <td>99.89</td>
                    <td>2.5</td>
                    <td>4.8</td>
                    <td>320</td>
                    <td>High</td>
                </tr>
                <tr>
                    <td>Resonant SST</td>
                    <td>99.85</td>
                    <td>3.0</td>
                    <td>6.1</td>
                    <td>280</td>
                    <td>Medium</td>
                </tr>
            `;
            
            // Generate comparison charts
            generateEfficiencyComparison();
            generateLossComparison();
            generateTHDComparison();
            generateCostAnalysis();
        }

        function generateEfficiencyComparison() {
            const load = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100];
            const dab = [96.5, 97.8, 98.5, 99.0, 99.3, 99.5, 99.7, 99.87, 99.8, 99.7];
            const mmc = [96.8, 98.0, 98.7, 99.2, 99.4, 99.6, 99.8, 99.89, 99.85, 99.8];
            const rc = [97.0, 98.2, 98.8, 99.1, 99.3, 99.5, 99.7, 99.85, 99.8, 99.75];
            
            const traces = [
                { x: load, y: dab, name: 'DAB', line: { color: '#9966ff', width: 2 } },
                { x: load, y: mmc, name: 'MMC', line: { color: '#00d4ff', width: 2 } },
                { x: load, y: rc, name: 'Resonant', line: { color: '#00ff88', width: 2 } }
            ];
            
            const layout = {
                title: 'Efficiency vs Load',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { title: 'Load (%)', gridcolor: 'rgba(0, 212, 255, 0.1)' },
                yaxis: { title: 'Efficiency (%)', range: [96, 100], gridcolor: 'rgba(0, 212, 255, 0.1)' }
            };
            
            Plotly.newPlot('comparison-efficiency', traces, layout);
        }

        function generateLossComparison() {
            const categories = ['Conduction', 'Switching', 'Core', 'Auxiliary'];
            const dab = [1.25, 11.0, 0.5, 0.03];
            const mmc = [0.72, 10.0, 0.4, 0.03];
            const rc = [0.80, 14.4, 0.3, 0.04];
            
            const traces = [
                { x: categories, y: dab, name: 'DAB', type: 'bar', marker: { color: '#9966ff' } },
                { x: categories, y: mmc, name: 'MMC', type: 'bar', marker: { color: '#00d4ff' } },
                { x: categories, y: rc, name: 'Resonant', type: 'bar', marker: { color: '#00ff88' } }
            ];
            
            const layout = {
                title: 'Power Loss Breakdown',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                barmode: 'group',
                xaxis: { gridcolor: 'rgba(0, 212, 255, 0.1)' },
                yaxis: { title: 'Loss (W)', gridcolor: 'rgba(0, 212, 255, 0.1)' }
            };
            
            Plotly.newPlot('comparison-losses', traces, layout);
        }

        function generateTHDComparison() {
            const freq = [20, 50, 100, 200, 500];
            const dab = [6.5, 4.0, 3.2, 2.8, 2.5];
            const mmc = [3.5, 2.5, 2.0, 1.8, 1.6];
            const rc = [4.5, 3.0, 2.3, 2.0, 1.8];
            
            const traces = [
                { x: freq, y: dab, name: 'DAB', line: { color: '#9966ff', width: 2 } },
                { x: freq, y: mmc, name: 'MMC', line: { color: '#00d4ff', width: 2 } },
                { x: freq, y: rc, name: 'Resonant', line: { color: '#00ff88', width: 2 } }
            ];
            
            const layout = {
                title: 'THD vs Switching Frequency',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e6ed' },
                xaxis: { title: 'Frequency (kHz)', type: 'log', gridcolor: 'rgba(0, 212, 255, 0.1)' },
                yaxis: { title: 'THD (%)', gridcolor: 'rgba(0, 212, 255, 0.1)' }
            };
            
            Plotly.newPlot('comparison-thd', traces, layout);
        }

        function generateCostAnalysis() {
            const components = ['Semiconductors', 'Magnetics', 'Capacitors', 'Control', 'Cooling'];
            const dab = [35, 25, 15, 15, 10];
            const mmc = [40, 20, 25, 10, 5];
            const rc = [30, 30, 20, 15, 5];
            
            const traces = [
                { values: dab, labels: components, name: 'DAB', type: 'pie', hole: 0.4, domain: { x: [0, 0.3] } },
                { values: mmc, labels: components, name: 'MMC', type: 'pie', hole: 0.4, domain: { x: [0.35, 0.65] } },
                { values: rc, labels: components, name: 'Resonant', type: 'pie', hole: 0.4, domain: { x: [0.7, 1] } }
            ];
            
            const layout = {
                title: 'Cost Breakdown Analysis',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#e0e6ed' },
                showlegend: true,
                annotations: [
                    { x: 0.15, y: 0.5, text: 'DAB', showarrow: false },
                    { x: 0.5, y: 0.5, text: 'MMC', showarrow: false },
                    { x: 0.85, y: 0.5, text: 'RC', showarrow: false }
                ]
            };
            
            Plotly.newPlot('comparison-cost', traces, layout);
        }
    </script>
</body>
</html>
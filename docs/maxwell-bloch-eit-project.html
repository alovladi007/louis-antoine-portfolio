<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Maxwell-Bloch Simulation Suite for EIT-Based Quantum Optics - Louis Antoine</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Navigation Bar */
        .navigation-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
        }

        .nav-btn {
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.4);
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            margin-top: 60px;
            overflow: hidden;
        }

        #quantum-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #8b5cf6, #a78bfa, #c4b5fd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(139, 92, 246, 0.5);
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: #a0a0a0;
            margin-bottom: 2rem;
        }

        .hero-description {
            font-size: 1.2rem;
            color: #c0c0c0;
            max-width: 900px;
            margin: 0 auto 3rem;
            line-height: 1.8;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .stat-card {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            padding: 2rem;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            background: rgba(139, 92, 246, 0.15);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #8b5cf6;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #a0a0a0;
            font-size: 1rem;
        }

        /* Section Styling */
        .section {
            padding: 5rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 3rem;
            text-align: center;
            color: #8b5cf6;
        }

        /* Interactive Visualization Container */
        .visualization-container {
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }

        /* Demo Grid */
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .demo-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(109, 40, 217, 0.1));
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .demo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(109, 40, 217, 0.15));
        }

        .demo-icon {
            font-size: 3rem;
            color: #8b5cf6;
            margin-bottom: 1rem;
        }

        .demo-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #c4b5fd;
        }

        .demo-description {
            color: #a0a0a0;
            font-size: 0.95rem;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 15px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-3px);
            background: rgba(139, 92, 246, 0.08);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.2);
        }

        .feature-icon {
            font-size: 2.5rem;
            color: #8b5cf6;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #c4b5fd;
        }

        /* Equation Display */
        .equation-box {
            background: rgba(139, 92, 246, 0.05);
            border-left: 4px solid #8b5cf6;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 8px;
            overflow-x: auto;
        }

        /* Results Gallery */
        .results-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .result-item {
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .result-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.2);
        }

        .result-image {
            width: 100%;
            border-radius: 10px;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .result-image:hover {
            transform: scale(1.05);
        }

        .result-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #c4b5fd;
        }

        .result-description {
            color: #a0a0a0;
            font-size: 0.95rem;
        }

        /* Interactive Controls */
        .controls-panel {
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .control-group {
            margin-bottom: 1.5rem;
        }

        .control-label {
            display: block;
            margin-bottom: 0.5rem;
            color: #c4b5fd;
            font-weight: 500;
        }

        .control-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(139, 92, 246, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #8b5cf6;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
        }

        .control-value {
            display: inline-block;
            margin-left: 1rem;
            color: #8b5cf6;
            font-weight: 600;
        }

        /* Download Button */
        .download-btn {
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            margin: 1rem 0;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.4);
        }
        
        /* Demo Button */
        .demo-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            margin: 1rem 0 1rem 1rem;
            font-size: 1rem;
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }

        /* Code Block */
        .code-block {
            background: #1a1a1a;
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #c4b5fd;
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid rgba(139, 92, 246, 0.2);
        }

        .tab-btn {
            background: none;
            border: none;
            color: #a0a0a0;
            padding: 1rem 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            position: relative;
        }

        .tab-btn.active {
            color: #8b5cf6;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #8b5cf6;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Modal for Image Viewing */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            cursor: pointer;
        }

        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .close-modal {
            position: absolute;
            top: 30px;
            right: 50px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-modal:hover {
            color: #8b5cf6;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .demo-grid, .features-grid {
                grid-template-columns: 1fr;
            }
            
            .tab-nav {
                flex-wrap: wrap;
            }
            
            .tab-btn {
                padding: 0.75rem 1rem;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="navigation-bar">
        <a href="index.html" class="nav-btn">
            <i class="fas fa-arrow-left"></i> Back to Portfolio
        </a>
        <h2 style="color: #8b5cf6; margin: 0;">Maxwell-Bloch Quantum Optics Suite</h2>
        <a href="#interactive-demos" class="nav-btn">
            Explore Demos <i class="fas fa-arrow-right"></i>
        </a>
    </div>

    <!-- Hero Section -->
    <section class="hero-section">
        <canvas id="quantum-animation"></canvas>
        <div class="hero-content">
            <h1 class="hero-title">Full Maxwell-Bloch Simulation Suite for EIT-Based Quantum Optics</h1>
            <p class="hero-subtitle">Propagation, Storage, and Doppler-Resolved Geometry Effects</p>
            <p class="hero-description">
                A comprehensive simulation framework for quantum optics experiments based on the Maxwell-Bloch equations, 
                incorporating realistic physical effects including Doppler broadening, ground-state decoherence, 
                pulse storage/retrieval sequences, and control-field geometry optimization. This suite enables 
                high-fidelity modeling of electromagnetically induced transparency (EIT) for quantum memory applications.
            </p>
            <div class="hero-stats">
                <div class="stat-card">
                    <div class="stat-value">3</div>
                    <div class="stat-label">Core Analyses</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">RK4</div>
                    <div class="stat-label">Numerical Solver</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">MHz</div>
                    <div class="stat-label">Rabi Frequencies</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">μs</div>
                    <div class="stat-label">Time Resolution</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Physics Background -->
    <section class="section">
        <h2 class="section-title">Theoretical Foundation</h2>
        
        <div class="visualization-container">
            <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">Maxwell-Bloch Equations</h3>
            <p style="margin-bottom: 1.5rem;">
                The simulation solves the coupled Maxwell-Bloch equations for a three-level Λ-system under the 
                slowly varying envelope approximation (SVEA). The probe field propagation is governed by:
            </p>
            
            <div class="equation-box">
                <div id="maxwell-equation">
                    $$\frac{\partial \Omega_p}{\partial z} = i\eta \langle\rho_{eg}\rangle_v$$
                </div>
            </div>
            
            <p style="margin-top: 1.5rem;">
                where η = Nμ²ω/(2ε₀ℏc) is the coupling constant, and ⟨⟩ᵥ denotes Doppler averaging. 
                The atomic coherences evolve according to:
            </p>
            
            <div class="equation-box">
                <div id="bloch-equations">
                    $$\dot{\rho}_{eg} = -\left(\frac{\gamma_{eg}}{2} + i\Delta_p'\right)\rho_{eg} + i\frac{\Omega_p}{2} + i\frac{\Omega_c}{2}\rho_{sg}$$
                    $$\dot{\rho}_{sg} = -\left(\gamma_{sg} + i\delta'\right)\rho_{sg} + i\frac{\Omega_c}{2}\rho_{eg}$$
                </div>
            </div>
        </div>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-wave-square"></i></div>
                <h3 class="feature-title">EIT Mechanism</h3>
                <p>Electromagnetically induced transparency creates a narrow transmission window within an absorption line through quantum interference between excitation pathways.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-database"></i></div>
                <h3 class="feature-title">Quantum Memory</h3>
                <p>Dynamic control of the coupling field enables storage and retrieval of quantum states in atomic coherences with controllable storage times.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                <h3 class="feature-title">Doppler Effects</h3>
                <p>Thermal motion of atoms introduces velocity-dependent detunings that broaden the EIT window and reduce storage efficiency.</p>
            </div>
        </div>
    </section>

    <!-- Core Analyses -->
    <section class="section">
        <h2 class="section-title">Core Simulation Analyses</h2>
        
        <div class="tab-nav">
            <button class="tab-btn active" onclick="showTab('euler-rk4')">Euler vs RK4</button>
            <button class="tab-btn" onclick="showTab('retrieval-heatmap')">Retrieval Efficiency</button>
            <button class="tab-btn" onclick="showTab('co-counter')">Co/Counter Propagation</button>
        </div>

        <!-- Euler vs RK4 Tab -->
        <div id="euler-rk4" class="tab-content active">
            <div class="visualization-container">
                <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">Numerical Integrator Comparison</h3>
                <p>
                    Comparison of Euler and 4th-order Runge-Kutta (RK4) solvers for Maxwell-Bloch propagation 
                    with Doppler averaging. RK4 provides superior stability and accuracy in stiff regimes.
                </p>
                
                <div class="results-gallery">
                    <div class="result-item">
                        <img src="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/figures/Euler_RK4_Figures/Fig10_Euler_vs_RK4_larger.jpg" 
                             alt="Euler vs RK4 Comparison" 
                             class="result-image" 
                             onclick="openModal(this)">
                        <h4 class="result-title">Solver Comparison</h4>
                        <p class="result-description">
                            Output probe intensity showing differences between Euler and RK4 integration methods. 
                            Grid: Nt=3000, Nz=120, Nv=9.
                        </p>
                        <a href="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/data/Euler_RK4_Data/mb_compare_euler_rk4_larger_only.csv" 
                           class="download-btn">
                            <i class="fas fa-download"></i> Download Data
                        </a>
                    </div>
                </div>
                
                <div class="code-block">
# Run Euler vs RK4 comparison
python src/high_fidelity_qo_suite.py \
    --euler_rk4 \
    --er_Nt 3000 --er_Nz 120 --er_Nv 9 \
    --er_sigma_v 180.0
                </div>
            </div>
        </div>

        <!-- Retrieval Heatmap Tab -->
        <div id="retrieval-heatmap" class="tab-content">
            <div class="visualization-container">
                <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">EIT Retrieval Efficiency Mapping</h3>
                <p>
                    Heatmap analysis of quantum memory retrieval efficiency as a function of control-field 
                    ramp duration and ground-state dephasing rate γ<sub>sg</sub>.
                </p>
                
                <div class="results-gallery">
                    <div class="result-item">
                        <img src="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/figures/Retrieval_Heatmap_Figures_demo/Fig12_Retrieval_Heatmap_demo.jpg" 
                             alt="Retrieval Efficiency Heatmap" 
                             class="result-image" 
                             onclick="openModal(this)">
                        <h4 class="result-title">Efficiency Heatmap</h4>
                        <p class="result-description">
                            Retrieval efficiency versus control ramp duration (0.2-1.6 μs) and dephasing rate (50-1000 kHz).
                        </p>
                        <a href="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/data/Retrieval_Heatmap_Data_demo/retrieval_efficiency_heatmap_demo.csv" 
                           class="download-btn">
                            <i class="fas fa-download"></i> Download Data
                        </a>
                    </div>
                    
                    <div class="result-item">
                        <img src="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/figures/Advanced_Extensions_Figures_ultra/Fig12_Retrieval_Single_ultra.jpg" 
                             alt="Single Retrieval Trace" 
                             class="result-image" 
                             onclick="openModal(this)">
                        <h4 class="result-title">Storage & Retrieval Dynamics</h4>
                        <p class="result-description">
                            Time-resolved probe and control fields during storage/retrieval sequence with optimized parameters.
                        </p>
                    </div>
                </div>
                
                <div id="heatmap-interactive" style="height: 400px; margin-top: 2rem;"></div>
                
                <div class="code-block">
# Generate retrieval efficiency heatmap
python src/high_fidelity_qo_suite.py \
    --heatmap \
    --hm_ramps_us "0.2,0.4,0.6,0.8,1.0,1.2,1.4,1.6" \
    --hm_gammas_kHz "50,100,200,400,800" \
    --hm_Nt 2500 --hm_Nz 100
                </div>
            </div>
        </div>

        <!-- Co/Counter Propagation Tab -->
        <div id="co-counter" class="tab-content">
            <div class="visualization-container">
                <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">Geometry & Doppler Analysis</h3>
                <p>
                    Comparative study of co-propagating versus counter-propagating control field configurations 
                    across multiple Doppler widths, revealing geometry-dependent performance.
                </p>
                
                <div class="results-gallery">
                    <div class="result-item">
                        <img src="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/figures/CoCounter_MultiSigma_Figures_compact/Fig11_Co_vs_Counter_multi_sigma_compact.jpg" 
                             alt="Co vs Counter Propagation" 
                             class="result-image" 
                             onclick="openModal(this)">
                        <h4 class="result-title">Multi-Doppler Comparison</h4>
                        <p class="result-description">
                            Probe transmission for co- and counter-propagating geometries at σ<sub>v</sub> = 60, 150, 300 m/s.
                        </p>
                    </div>
                    
                    <div class="result-item">
                        <img src="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/figures/Advanced_Extensions_Figures_ultra/Fig11_Co_vs_Counter_ultra.jpg" 
                             alt="High-Resolution Co vs Counter" 
                             class="result-image" 
                             onclick="openModal(this)">
                        <h4 class="result-title">High-Fidelity Analysis</h4>
                        <p class="result-description">
                            Ultra-high resolution comparison showing fine structure in probe dynamics for different geometries.
                        </p>
                    </div>
                </div>
                
                <div id="geometry-comparison" style="height: 400px; margin-top: 2rem;"></div>
                
                <div class="controls-panel">
                    <h4 style="color: #c4b5fd; margin-bottom: 1.5rem;">Interactive Parameters</h4>
                    <div class="control-group">
                        <label class="control-label">
                            Doppler Width σ<sub>v</sub>: <span id="doppler-value" class="control-value">150 m/s</span>
                        </label>
                        <input type="range" class="control-slider" id="doppler-slider" 
                               min="50" max="500" value="150" step="10"
                               oninput="updateDopplerPlot(this.value)">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Control Rabi Frequency: <span id="rabi-value" class="control-value">8 MHz</span>
                        </label>
                        <input type="range" class="control-slider" id="rabi-slider" 
                               min="1" max="20" value="8" step="0.5"
                               oninput="updateRabiPlot(this.value)">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Extended Results -->
    <section class="section">
        <h2 class="section-title">Extended Analysis Results</h2>
        
        <div class="results-gallery">
            <div class="result-item">
                <img src="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/figures/Extended_Project_Figures/Fig6_MB_EIT_Propagation.jpg" 
                     alt="EIT Pulse Propagation" 
                     class="result-image" 
                     onclick="openModal(this)">
                <h4 class="result-title">EIT Pulse Propagation</h4>
                <p class="result-description">
                    Input vs output probe intensities with and without Doppler averaging, showing transparency window and pulse delay.
                </p>
                <a href="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/data/Extended_Project_Data/mb_eit_propagation.csv" 
                   class="download-btn">
                    <i class="fas fa-download"></i> Download Data
                </a>
                <button class="demo-btn" onclick="showEITPropagationDemo()">
                    <i class="fas fa-play"></i> Interactive Demo
                </button>
            </div>
            
            <div class="result-item">
                <img src="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/figures/Extended_Project_Figures/Fig7_EIT_Storage_Retrieval.jpg" 
                     alt="EIT Storage and Retrieval" 
                     class="result-image" 
                     onclick="openModal(this)">
                <h4 class="result-title">Quantum Memory Dynamics</h4>
                <p class="result-description">
                    Complete storage and retrieval sequence showing probe mapping to spin coherence and subsequent retrieval.
                </p>
                <a href="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/data/Extended_Project_Data/eit_storage_retrieval.csv" 
                   class="download-btn">
                    <i class="fas fa-download"></i> Download Data
                </a>
                <button class="demo-btn" onclick="showStorageRetrievalDemo()">
                    <i class="fas fa-play"></i> Interactive Demo
                </button>
            </div>
            
            <div class="result-item">
                <img src="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/figures/Extended_Project_Figures/Fig8_HOM_Visibility_vs_Mu.jpg" 
                     alt="HOM Visibility Analysis" 
                     class="result-image" 
                     onclick="openModal(this)">
                <h4 class="result-title">HOM Visibility vs μ</h4>
                <p class="result-description">
                    Hong-Ou-Mandel visibility degradation with multi-photon parameter μ for different spectral mode purities.
                </p>
                <a href="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/data/Extended_Project_Data/hom_visibility_mu.csv" 
                   class="download-btn">
                    <i class="fas fa-download"></i> Download Data
                </a>
                <button class="demo-btn" onclick="showHOMVisibilityDemo()">
                    <i class="fas fa-play"></i> Interactive Demo
                </button>
            </div>
            
            <div class="result-item">
                <img src="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/figures/Extended_Project_Figures/Fig9_HOM_Noisy_Dip.jpg" 
                     alt="Noisy HOM Dip" 
                     class="result-image" 
                     onclick="openModal(this)">
                <h4 class="result-title">Realistic HOM Interference</h4>
                <p class="result-description">
                    Noisy HOM dip with μ=0.15 and M=0.9, showing realistic experimental conditions with noise.
                </p>
                <a href="https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/data/Extended_Project_Data/hom_noisy_dip.csv" 
                   class="download-btn">
                    <i class="fas fa-download"></i> Download Data
                </a>
                <button class="demo-btn" onclick="showHOMNoisyDemo()">
                    <i class="fas fa-play"></i> Interactive Demo
                </button>
            </div>
        </div>
        
        <!-- Interactive Demo Container -->
        <div id="extended-demo-container" style="display: none; margin-top: 3rem;">
            <div class="visualization-container">
                <h3 id="demo-title" style="color: #c4b5fd; margin-bottom: 1.5rem;"></h3>
                <div id="extended-demo-plot" style="height: 500px;"></div>
                <div id="extended-demo-controls" class="controls-panel" style="margin-top: 2rem;"></div>
            </div>
        </div>
    </section>

    <!-- Interactive Demonstrations -->
    <section class="section" id="interactive-demos">
        <h2 class="section-title">Interactive Demonstrations</h2>
        
        <div class="demo-grid">
            <div class="demo-card" onclick="loadEITSimulator()">
                <div class="demo-icon"><i class="fas fa-wave-square"></i></div>
                <h3 class="demo-title">EIT Propagation Simulator</h3>
                <p class="demo-description">
                    Explore pulse propagation through EIT medium with adjustable parameters including detuning, 
                    Rabi frequency, and atomic density.
                </p>
            </div>
            
            <div class="demo-card" onclick="loadStorageDemo()">
                <div class="demo-icon"><i class="fas fa-database"></i></div>
                <h3 class="demo-title">Quantum Memory Demo</h3>
                <p class="demo-description">
                    Interactive storage and retrieval sequence visualization with control over ramp timing 
                    and storage duration.
                </p>
            </div>
            
            <div class="demo-card" onclick="loadDopplerAnalysis()">
                <div class="demo-icon"><i class="fas fa-chart-area"></i></div>
                <h3 class="demo-title">Doppler Effects Explorer</h3>
                <p class="demo-description">
                    Analyze the impact of thermal motion on EIT performance with velocity distribution visualization.
                </p>
            </div>
            
            <div class="demo-card" onclick="loadParameterSpace()">
                <div class="demo-icon"><i class="fas fa-cube"></i></div>
                <h3 class="demo-title">Parameter Space Explorer</h3>
                <p class="demo-description">
                    3D visualization of retrieval efficiency across multiple parameters for optimization studies.
                </p>
            </div>
            
            <div class="demo-card" onclick="showTechnicalPaper()">
                <div class="demo-icon"><i class="fas fa-file-alt"></i></div>
                <h3 class="demo-title">Technical Paper</h3>
                <p class="demo-description">
                    Complete scientific manuscript with detailed theoretical background and comprehensive results analysis.
                </p>
            </div>
            
            <div class="demo-card" onclick="window.open('https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics', '_blank')">
                <div class="demo-icon"><i class="fab fa-github"></i></div>
                <h3 class="demo-title">Source Code</h3>
                <p class="demo-description">
                    Full Python implementation with modular design, comprehensive documentation, and reproducible workflows.
                </p>
            </div>
        </div>
    </section>

    <!-- Technical Details -->
    <section class="section">
        <h2 class="section-title">Technical Implementation</h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-cogs"></i></div>
                <h3 class="feature-title">Numerical Methods</h3>
                <p>
                    4th-order Runge-Kutta integration with adaptive limiter for stability. Fixed-step solver 
                    optimized for stiff regimes with configurable grid resolution (Nt, Nz parameters).
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-tachometer-alt"></i></div>
                <h3 class="feature-title">Performance Optimization</h3>
                <p>
                    Vectorized NumPy operations for efficient computation. Doppler averaging with configurable 
                    velocity classes (Nv) balancing accuracy and speed.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                <h3 class="feature-title">Data Analysis</h3>
                <p>
                    Automated generation of publication-quality figures with matplotlib. CSV output for all 
                    simulated data enabling further analysis and reproducibility.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-sliders-h"></i></div>
                <h3 class="feature-title">Parameter Control</h3>
                <p>
                    CLI interface with comprehensive parameter control. Presets for balanced quality and 
                    high-fidelity simulations with execution time estimates.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-code-branch"></i></div>
                <h3 class="feature-title">Modular Architecture</h3>
                <p>
                    Clean separation of physics utilities, numerical solvers, and analysis routines. 
                    Extensible design for adding new pulse shapes and propagation schemes.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-check-circle"></i></div>
                <h3 class="feature-title">Validation Suite</h3>
                <p>
                    Comparison with analytical solutions in limiting cases. Convergence tests for grid 
                    resolution and integration accuracy.
                </p>
            </div>
        </div>
    </section>

    <!-- Applications -->
    <section class="section">
        <h2 class="section-title">Applications & Impact</h2>
        
        <div class="visualization-container">
            <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">Key Applications</h3>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 2rem;">
                <div>
                    <h4 style="color: #a78bfa; margin-bottom: 1rem;">
                        <i class="fas fa-memory"></i> Quantum Memory Development
                    </h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;">• Optimization of storage/retrieval protocols</li>
                        <li style="margin-bottom: 0.5rem;">• Efficiency vs fidelity trade-offs</li>
                        <li style="margin-bottom: 0.5rem;">• Multi-mode storage capacity analysis</li>
                    </ul>
                </div>
                
                <div>
                    <h4 style="color: #a78bfa; margin-bottom: 1rem;">
                        <i class="fas fa-network-wired"></i> Quantum Networks
                    </h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;">• Light-matter interface design</li>
                        <li style="margin-bottom: 0.5rem;">• Synchronization protocol development</li>
                        <li style="margin-bottom: 0.5rem;">• Bandwidth-efficiency optimization</li>
                    </ul>
                </div>
                
                <div>
                    <h4 style="color: #a78bfa; margin-bottom: 1rem;">
                        <i class="fas fa-atom"></i> Atomic Physics Research
                    </h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;">• EIT parameter characterization</li>
                        <li style="margin-bottom: 0.5rem;">• Doppler-free spectroscopy design</li>
                        <li style="margin-bottom: 0.5rem;">• Coherence lifetime measurements</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Technical Documentation -->
    <section class="section">
        <h2 class="section-title">Technical Documentation</h2>
        
        <div class="tab-nav">
            <button class="tab-btn active" onclick="showDocTab('api-reference')">API Reference</button>
            <button class="tab-btn" onclick="showDocTab('physics-model')">Physics Model</button>
            <button class="tab-btn" onclick="showDocTab('numerical-methods')">Numerical Methods</button>
            <button class="tab-btn" onclick="showDocTab('usage-guide')">Usage Guide</button>
        </div>

        <!-- API Reference Tab -->
        <div id="api-reference" class="tab-content active">
            <div class="visualization-container">
                <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">Core Classes and Functions</h3>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">MBParams Class</h4>
                <div class="code-block">
class MBParams:
    """
    Parameters for Maxwell-Bloch simulations
    
    Args:
        L (float): Medium length in meters (default: 0.03)
        Nz (int): Number of spatial grid points (default: 120)
        tmax (float): Maximum time in seconds (default: 6e-6)
        Nt (int): Number of time points (default: 4000)
        lam_p (float): Probe wavelength in meters (default: 780e-9)
        lam_c (float): Control wavelength in meters (default: 780e-9)
        N (float): Atomic density in m^-3 (default: 5e16)
        mu (float): Dipole moment in C·m (default: 3.0e-29)
        gamma_eg (float): Excited state decay rate (default: 2π×6 MHz)
        gamma_sg (float): Ground state coherence decay (default: 2π×0.2 MHz)
        Delta_p (float): Probe detuning from resonance (default: 0)
        delta_c (float): Two-photon detuning (default: 0)
        sigma_v (float): Doppler width in m/s (default: 180)
        Nv (int): Number of velocity classes (default: 11)
        control_geom (str): 'co' or 'counter' propagating (default: 'co')
    """</div>

                <h4 style="color: #a78bfa; margin-top: 2rem;">Pulse Generation Functions</h4>
                <div class="code-block">
def gaussian_pulse(t, t0, tau_fwhm, area=0.5*2*pi*1e6):
    """
    Generate Gaussian pulse envelope
    
    Args:
        t: Time array
        t0: Pulse center time
        tau_fwhm: Full width at half maximum
        area: Pulse area (integral of Rabi frequency)
    
    Returns:
        Array of Rabi frequencies vs time
    """

def control_ramp_storage(t, Omega_c0=2*pi*10e6, t0_on=2.0e-6, 
                        ramp=0.8e-6, hold=0.8e-6):
    """
    Generate control field for storage/retrieval sequence
    
    Args:
        t: Time array
        Omega_c0: Peak control Rabi frequency
        t0_on: Time to start ramping down
        ramp: Ramp duration
        hold: Storage time
    
    Returns:
        Control field Rabi frequency vs time
    """</div>

                <h4 style="color: #a78bfa; margin-top: 2rem;">Propagation Functions</h4>
                <div class="code-block">
def mb_propagate_rk4(params, Op_in, Oc, include_doppler=True):
    """
    Maxwell-Bloch propagation using 4th-order Runge-Kutta
    
    Args:
        params: MBParams instance
        Op_in: Input probe Rabi frequency vs time
        Oc: Control field Rabi frequency vs time
        include_doppler: Whether to include Doppler averaging
    
    Returns:
        t: Time array
        z: Spatial array
        Op: Probe field Op[z,t] after propagation
    """

def mb_propagate_euler(params, Op_in, Oc, include_doppler=True):
    """
    Maxwell-Bloch propagation using Euler method
    (Similar arguments and returns as mb_propagate_rk4)
    """</div>

                <h4 style="color: #a78bfa; margin-top: 2rem;">Analysis Functions</h4>
                <div class="code-block">
def analysis_euler_vs_rk4(outdir, Nt=3000, Nz=120, Nv=9, sigma_v=180.0):
    """
    Compare Euler and RK4 solvers
    
    Outputs:
        - Fig_Euler_vs_RK4.png: Comparison plot
        - mb_compare_euler_rk4.csv: Numerical data
    """

def analysis_retrieval_heatmap(outdir, ramps_us, gammas_kHz, 
                              Nt=2500, Nz=100, include_doppler=False):
    """
    Generate retrieval efficiency heatmap
    
    Args:
        ramps_us: List of ramp durations in microseconds
        gammas_kHz: List of dephasing rates in kHz
    
    Outputs:
        - Fig_Retrieval_Heatmap.png: Heatmap visualization
        - retrieval_efficiency_heatmap.csv: Efficiency matrix
    """

def analysis_co_vs_counter_multi_sigma(outdir, sigmas, 
                                      Nt=2500, Nz=100, Nv=9):
    """
    Compare co- and counter-propagating geometries
    
    Args:
        sigmas: List of Doppler widths in m/s
    
    Outputs:
        - Fig_Co_vs_Counter_multi_sigma.png: Comparison plot
        - co_counter_sigma_*.csv: Data for each Doppler width
    """</div>
            </div>
        </div>

        <!-- Physics Model Tab -->
        <div id="physics-model" class="tab-content">
            <div class="visualization-container">
                <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">Three-Level Λ System</h3>
                
                <h4 style="color: #a78bfa;">Energy Level Structure</h4>
                <p>The system consists of three atomic levels:</p>
                <ul>
                    <li><strong>|g⟩</strong>: Ground state (stable)</li>
                    <li><strong>|e⟩</strong>: Excited state (decay rate γ<sub>eg</sub>)</li>
                    <li><strong>|s⟩</strong>: Storage state (metastable)</li>
                </ul>
                
                <div class="equation-box">
                    <h4>Hamiltonian (Rotating Wave Approximation)</h4>
                    $$H = -\hbar\Delta_p |e\rangle\langle e| - \hbar(\Delta_p - \delta_c)|s\rangle\langle s| + \frac{\hbar\Omega_p}{2}(|e\rangle\langle g| + |g\rangle\langle e|) + \frac{\hbar\Omega_c}{2}(|e\rangle\langle s| + |s\rangle\langle e|)$$
                </div>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Optical Bloch Equations</h4>
                <p>The density matrix elements evolve according to:</p>
                <div class="equation-box">
                    $$\dot{\rho}_{eg} = -\left(\frac{\gamma_{eg}}{2} + i\Delta_p'\right)\rho_{eg} + i\frac{\Omega_p}{2}(\rho_{gg} - \rho_{ee}) + i\frac{\Omega_c}{2}\rho_{sg}$$
                    $$\dot{\rho}_{sg} = -\left(\gamma_{sg} + i\delta'\right)\rho_{sg} + i\frac{\Omega_c}{2}\rho_{eg} - i\frac{\Omega_p}{2}\rho_{se}$$
                    $$\dot{\rho}_{ee} = -\gamma_{eg}\rho_{ee} + i\frac{\Omega_p}{2}(\rho_{ge} - \rho_{eg}) + i\frac{\Omega_c}{2}(\rho_{se} - \rho_{es})$$
                </div>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Doppler Effect</h4>
                <p>For atoms moving with velocity v, the detunings are modified:</p>
                <div class="equation-box">
                    $$\Delta_p' = \Delta_p - k_p v \quad \text{(probe detuning)}$$
                    $$\delta' = (\Delta_p - \delta_c) - (k_p \mp k_c)v \quad \text{(two-photon detuning)}$$
                </div>
                <p>where ± depends on co-propagating (+) or counter-propagating (-) geometry.</p>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">EIT Condition</h4>
                <p>Perfect transparency occurs when:</p>
                <div class="equation-box">
                    $$\Delta_p = 0, \quad \delta_c = 0, \quad \gamma_{sg} \to 0$$
                </div>
                <p>The EIT linewidth is approximately:</p>
                <div class="equation-box">
                    $$\Delta\omega_{EIT} \approx \frac{|\Omega_c|^2}{\gamma_{eg}} + \gamma_{sg}$$
                </div>
            </div>
        </div>

        <!-- Numerical Methods Tab -->
        <div id="numerical-methods" class="tab-content">
            <div class="visualization-container">
                <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">Computational Approach</h3>
                
                <h4 style="color: #a78bfa;">Spatial Discretization</h4>
                <p>The medium is divided into Nz slices of thickness Δz = L/Nz. The probe field propagates according to:</p>
                <div class="equation-box">
                    $$\Omega_p(z + \Delta z, t) = \Omega_p(z, t) + i\eta\Delta z \langle\rho_{eg}(z, t)\rangle_v$$
                </div>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Time Integration Methods</h4>
                
                <h5 style="color: #c4b5fd;">Euler Method (1st Order)</h5>
                <div class="code-block">
y(t + dt) = y(t) + dt * f(y(t), t)

Pros: Simple, fast per step
Cons: Accumulates error, can be unstable for stiff systems</div>
                
                <h5 style="color: #c4b5fd;">4th-Order Runge-Kutta (RK4)</h5>
                <div class="code-block">
k1 = f(y(t), t)
k2 = f(y(t) + dt/2 * k1, t + dt/2)
k3 = f(y(t) + dt/2 * k2, t + dt/2)
k4 = f(y(t) + dt * k3, t + dt)
y(t + dt) = y(t) + dt/6 * (k1 + 2*k2 + 2*k3 + k4)

Pros: Much more accurate, better stability
Cons: 4x more function evaluations per step</div>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Doppler Averaging</h4>
                <p>The velocity distribution is sampled at Nv points:</p>
                <div class="equation-box">
                    $$v_j = -3\sigma_v + \frac{6\sigma_v j}{N_v-1}, \quad j = 0, 1, ..., N_v-1$$
                    $$w_j = \exp\left(-\frac{v_j^2}{2\sigma_v^2}\right) / \sum_k w_k$$
                </div>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Stability Considerations</h4>
                <ul>
                    <li><strong>CFL Condition:</strong> Δt ≪ Δz/c for wave propagation</li>
                    <li><strong>Oscillation Period:</strong> Δt ≪ 2π/max(|Ω|) for Rabi oscillations</li>
                    <li><strong>Decay Time:</strong> Δt ≪ 1/γ for exponential decay</li>
                    <li><strong>Limiter:</strong> Coherences are clipped to |ρ| ≤ 5 to prevent numerical overflow</li>
                </ul>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Performance Optimization</h4>
                <div class="code-block">
# Vectorized operations for all velocity classes
for iz in range(Nz):
    # Solve atomic equations for all velocities simultaneously
    rho_eg_all = solve_atomic_vectorized(Op[iz,:], Oc, all_velocities)
    
    # Weighted average for propagation
    rho_eg_avg = np.sum(weights * rho_eg_all, axis=0)
    
    # Update probe field
    Op[iz+1,:] = Op[iz,:] + 1j * eta * dz * rho_eg_avg</div>
            </div>
        </div>

        <!-- Usage Guide Tab -->
        <div id="usage-guide" class="tab-content">
            <div class="visualization-container">
                <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">Getting Started</h3>
                
                <h4 style="color: #a78bfa;">Installation</h4>
                <div class="code-block">
# Clone the repository
git clone https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics.git
cd Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics

# Create virtual environment
python3 -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt</div>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Basic Usage</h4>
                <div class="code-block">
# Run all analyses with default parameters
python src/high_fidelity_qo_suite.py --outdir output --euler_rk4 --heatmap --cocounter

# Run with custom parameters
python src/high_fidelity_qo_suite.py \
    --outdir my_results \
    --euler_rk4 --er_Nt 5000 --er_Nz 200 \
    --heatmap --hm_doppler \
    --cocounter --cc_sigmas "50,100,200,400"</div>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Parameter Tuning Guide</h4>
                
                <h5 style="color: #c4b5fd;">Grid Resolution</h5>
                <ul>
                    <li><strong>Nt (time points):</strong> Increase for longer simulations or finer time resolution</li>
                    <li><strong>Nz (spatial points):</strong> Increase for better spatial resolution or longer media</li>
                    <li><strong>Nv (velocity classes):</strong> Increase for more accurate Doppler averaging (9-15 typical)</li>
                </ul>
                
                <h5 style="color: #c4b5fd;">Physical Parameters</h5>
                <div class="code-block">
# Typical ranges for Rb-87 vapor cell experiments
N = 1e15 to 1e17  # Atomic density (m^-3)
gamma_eg = 2π × 6 MHz  # D2 line natural linewidth
gamma_sg = 2π × (0.1 to 10) kHz  # Ground state dephasing
sigma_v = 50 to 500 m/s  # Doppler width (temperature dependent)
Omega_c = 2π × (1 to 50) MHz  # Control Rabi frequency
L = 1 to 10 cm  # Cell length</div>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Common Use Cases</h4>
                
                <h5 style="color: #c4b5fd;">1. EIT Spectroscopy Simulation</h5>
                <div class="code-block">
# Scan probe detuning to see EIT window
for delta_p in np.linspace(-50e6, 50e6, 100):
    params = MBParams(Delta_p=2*pi*delta_p)
    # Run simulation and extract transmission</div>
                
                <h5 style="color: #c4b5fd;">2. Quantum Memory Optimization</h5>
                <div class="code-block">
# Find optimal control field parameters
ramp_times = np.linspace(0.1e-6, 2e-6, 20)
storage_times = np.linspace(0.5e-6, 5e-6, 20)
# Run parameter sweep and analyze efficiency</div>
                
                <h5 style="color: #c4b5fd;">3. Temperature Effects Study</h5>
                <div class="code-block">
# Vary Doppler width to simulate different temperatures
temperatures = [300, 400, 500, 600]  # Kelvin
for T in temperatures:
    sigma_v = np.sqrt(k_B * T / m_Rb87)
    # Run simulation with temperature-dependent Doppler</div>
                
                <h4 style="color: #a78bfa; margin-top: 2rem;">Troubleshooting</h4>
                
                <div style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #ef4444; padding: 1rem; margin: 1rem 0; border-radius: 8px;">
                    <h5 style="color: #f87171; margin-bottom: 0.5rem;">Common Issues</h5>
                    <ul style="margin: 0; padding-left: 1.5rem;">
                        <li><strong>Numerical instability:</strong> Reduce time step (increase Nt) or use RK4 instead of Euler</li>
                        <li><strong>Unphysical results:</strong> Check that γ<sub>sg</sub> < γ<sub>eg</sub> and |Ω| < γ<sub>eg</sub></li>
                        <li><strong>Slow performance:</strong> Reduce Nv for faster Doppler averaging, or disable with include_doppler=False</li>
                        <li><strong>Memory errors:</strong> Reduce grid size or process in chunks</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal for Image Viewing -->
    <div id="imageModal" class="modal" onclick="closeModal()">
        <span class="close-modal">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

    <script>
        // Quantum field animation for hero section
        const canvas = document.getElementById('quantum-animation');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const particles = [];
        const particleCount = 100;
        
        class Particle {
            constructor() {
                this.reset();
            }
            
            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
                this.opacity = Math.random() * 0.5 + 0.5;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }
            
            draw() {
                ctx.save();
                ctx.globalAlpha = this.opacity;
                ctx.fillStyle = '#8b5cf6';
                ctx.shadowBlur = 10;
                ctx.shadowColor = '#8b5cf6';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }
        
        // Initialize particles
        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }
        
        // Draw connections between nearby particles
        function drawConnections() {
            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 150) {
                        ctx.save();
                        ctx.globalAlpha = (1 - distance / 150) * 0.3;
                        ctx.strokeStyle = '#8b5cf6';
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                        ctx.restore();
                    }
                }
            }
        }
        
        // Animation loop
        function animate() {
            ctx.fillStyle = 'rgba(10, 10, 10, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });
            
            drawConnections();
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Resize handler
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        
        // Tab functionality
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-btn');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Initialize interactive plots when tabs are shown
            if (tabName === 'retrieval-heatmap') {
                createHeatmapPlot();
            } else if (tabName === 'co-counter') {
                createGeometryPlot();
            }
        }
        
        // Modal functionality
        function openModal(img) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            modal.style.display = 'block';
            modalImg.src = img.src;
        }
        
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
        }
        
        // Interactive heatmap plot
        function createHeatmapPlot() {
            // Load CSV data and create interactive heatmap
            const csvUrl = 'https://raw.githubusercontent.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/main/data/Retrieval_Heatmap_Data_demo/retrieval_efficiency_heatmap_demo.csv';
            
            Papa.parse(csvUrl, {
                download: true,
                complete: function(results) {
                    const data = results.data;
                    const ramps = data[0].slice(1).map(parseFloat);
                    const gammas = [];
                    const z = [];
                    
                    for (let i = 1; i < data.length - 1; i++) {
                        gammas.push(parseFloat(data[i][0]));
                        z.push(data[i].slice(1).map(parseFloat));
                    }
                    
                    const trace = {
                        x: ramps,
                        y: gammas,
                        z: z,
                        type: 'heatmap',
                        colorscale: 'Viridis',
                        colorbar: {
                            title: 'Retrieval Efficiency',
                            titleside: 'right'
                        }
                    };
                    
                    const layout = {
                        title: 'Interactive Retrieval Efficiency Heatmap',
                        xaxis: { title: 'Ramp Duration (μs)' },
                        yaxis: { title: 'γ_sg/2π (kHz)' },
                        paper_bgcolor: 'rgba(0,0,0,0)',
                        plot_bgcolor: 'rgba(0,0,0,0)',
                        font: { color: '#e0e0e0' }
                    };
                    
                    Plotly.newPlot('heatmap-interactive', [trace], layout, {responsive: true});
                }
            });
        }
        
        // Interactive geometry comparison plot
        function createGeometryPlot() {
            updateDopplerPlot(150);
        }
        
        function updateDopplerPlot(sigmaV) {
            document.getElementById('doppler-value').textContent = sigmaV + ' m/s';
            
            // Simulate data for different Doppler widths
            const t = Array.from({length: 100}, (_, i) => i * 0.06);
            const coData = t.map(time => Math.exp(-0.5 * Math.pow((time - 3) / 0.8, 2)) * (1 - sigmaV / 1000));
            const counterData = t.map(time => Math.exp(-0.5 * Math.pow((time - 3.2) / 0.8, 2)) * (1 - sigmaV / 800));
            
            const trace1 = {
                x: t,
                y: coData,
                type: 'scatter',
                name: 'Co-propagating',
                line: { color: '#8b5cf6', width: 2 }
            };
            
            const trace2 = {
                x: t,
                y: counterData,
                type: 'scatter',
                name: 'Counter-propagating',
                line: { color: '#c4b5fd', width: 2, dash: 'dash' }
            };
            
            const layout = {
                title: `Geometry Comparison at σ_v = ${sigmaV} m/s`,
                xaxis: { title: 'Time (μs)', color: '#e0e0e0' },
                yaxis: { title: 'Probe Intensity', color: '#e0e0e0' },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#e0e0e0' },
                showlegend: true,
                legend: { x: 0.7, y: 0.9 }
            };
            
            Plotly.newPlot('geometry-comparison', [trace1, trace2], layout, {responsive: true});
        }
        
        function updateRabiPlot(rabiFreq) {
            document.getElementById('rabi-value').textContent = rabiFreq + ' MHz';
            // Update plot based on Rabi frequency
        }
        
        // Demo loaders
        function loadEITSimulator() {
            showFullEITSimulator();
        }
        
        function loadStorageDemo() {
            showFullStorageDemo();
        }
        
        function loadDopplerAnalysis() {
            showDopplerEffectsExplorer();
        }
        
        function loadParameterSpace() {
            showFullParameterSpace();
        }
        
        // Documentation tab switcher
        function showDocTab(tabName) {
            const tabs = document.querySelectorAll('#api-reference, #physics-model, #numerical-methods, #usage-guide');
            const buttons = document.querySelectorAll('.tab-nav .tab-btn');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Helper function to prepare demo display
        function prepareDemoDisplay() {
            // Hide paper container if visible
            const paperContainer = document.getElementById('paper-container');
            if (paperContainer) {
                paperContainer.style.display = 'none';
            }
            
            // Get demo container elements
            const container = document.getElementById('extended-demo-container');
            const title = document.getElementById('demo-title');
            const plotDiv = document.getElementById('extended-demo-plot');
            const controlsDiv = document.getElementById('extended-demo-controls');
            
            container.style.display = 'block';
            
            return {container, title, plotDiv, controlsDiv};
        }
        
        // Extended Results Interactive Demos
        function showEITPropagationDemo() {
            // Hide paper container if visible
            const paperContainer = document.getElementById('paper-container');
            if (paperContainer) {
                paperContainer.style.display = 'none';
            }
            
            const container = document.getElementById('extended-demo-container');
            const title = document.getElementById('demo-title');
            const plotDiv = document.getElementById('extended-demo-plot');
            const controlsDiv = document.getElementById('extended-demo-controls');
            
            container.style.display = 'block';
            title.textContent = 'Interactive EIT Pulse Propagation';
            
            // Load CSV data
            Papa.parse('https://raw.githubusercontent.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/main/data/Extended_Project_Data/mb_eit_propagation.csv', {
                download: true,
                header: true,
                dynamicTyping: true,
                complete: function(results) {
                    const data = results.data.filter(row => row.time_us !== null);
                    
                    const trace1 = {
                        x: data.map(d => d.time_us),
                        y: data.map(d => d.input_intensity),
                        name: 'Input Pulse',
                        type: 'scatter',
                        line: { color: '#8b5cf6', width: 2 }
                    };
                    
                    const trace2 = {
                        x: data.map(d => d.time_us),
                        y: data.map(d => d.output_no_doppler),
                        name: 'Output (No Doppler)',
                        type: 'scatter',
                        line: { color: '#10b981', width: 2 }
                    };
                    
                    const trace3 = {
                        x: data.map(d => d.time_us),
                        y: data.map(d => d.output_with_doppler),
                        name: 'Output (With Doppler)',
                        type: 'scatter',
                        line: { color: '#ef4444', width: 2, dash: 'dash' }
                    };
                    
                    const layout = {
                        title: 'EIT Pulse Propagation Through 3cm Rb Vapor',
                        xaxis: { title: 'Time (μs)', color: '#e0e0e0' },
                        yaxis: { title: 'Intensity (arb. units)', color: '#e0e0e0' },
                        paper_bgcolor: 'rgba(0,0,0,0)',
                        plot_bgcolor: 'rgba(0,0,0,0)',
                        font: { color: '#e0e0e0' },
                        showlegend: true,
                        legend: { x: 0.7, y: 0.9 }
                    };
                    
                    Plotly.newPlot(plotDiv, [trace1, trace2, trace3], layout, {responsive: true});
                }
            });
            
            controlsDiv.innerHTML = `
                <h4 style="color: #c4b5fd; margin-bottom: 1rem;">Simulation Parameters</h4>
                <div class="control-group">
                    <label class="control-label">Control Rabi Frequency: <span id="eit-rabi-value" class="control-value">8 MHz</span></label>
                    <input type="range" class="control-slider" id="eit-rabi-slider" min="1" max="20" value="8" step="0.5"
                           oninput="updateEITDemo(this.value)">
                </div>
                <div class="control-group">
                    <label class="control-label">Optical Depth: <span id="eit-od-value" class="control-value">100</span></label>
                    <input type="range" class="control-slider" id="eit-od-slider" min="10" max="200" value="100" step="10"
                           oninput="updateOpticalDepth(this.value)">
                </div>
                <p style="margin-top: 1rem; color: #a0a0a0;">
                    This demonstrates how a probe pulse propagates through an EIT medium. Doppler broadening 
                    reduces the transparency and causes additional absorption and reshaping of the pulse.
                </p>
            `;
        }
        
        function showStorageRetrievalDemo() {
            const {title, plotDiv, controlsDiv} = prepareDemoDisplay();
            title.textContent = 'Interactive Quantum Memory Storage & Retrieval';
            
            // Load CSV data
            Papa.parse('https://raw.githubusercontent.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/main/data/Extended_Project_Data/eit_storage_retrieval.csv', {
                download: true,
                header: true,
                dynamicTyping: true,
                complete: function(results) {
                    const data = results.data.filter(row => row.time_us !== null);
                    
                    const trace1 = {
                        x: data.map(d => d.time_us),
                        y: data.map(d => d.control_field),
                        name: 'Control Field',
                        type: 'scatter',
                        line: { color: '#8b5cf6', width: 2 },
                        yaxis: 'y2'
                    };
                    
                    const trace2 = {
                        x: data.map(d => d.time_us),
                        y: data.map(d => d.probe_output),
                        name: 'Probe Output',
                        type: 'scatter',
                        line: { color: '#10b981', width: 2 }
                    };
                    
                    const trace3 = {
                        x: data.map(d => d.time_us),
                        y: data.map(d => d.spin_coherence * 10), // Scale for visibility
                        name: 'Spin Coherence (×10)',
                        type: 'scatter',
                        line: { color: '#ef4444', width: 2, dash: 'dot' }
                    };
                    
                    const layout = {
                        title: 'EIT-Based Quantum Memory Operation',
                        xaxis: { title: 'Time (μs)', color: '#e0e0e0' },
                        yaxis: { title: 'Probe Intensity', color: '#e0e0e0' },
                        yaxis2: {
                            title: 'Control Field (MHz)',
                            color: '#8b5cf6',
                            overlaying: 'y',
                            side: 'right'
                        },
                        paper_bgcolor: 'rgba(0,0,0,0)',
                        plot_bgcolor: 'rgba(0,0,0,0)',
                        font: { color: '#e0e0e0' },
                        showlegend: true,
                        legend: { x: 0.1, y: 0.9 },
                        annotations: [
                            {
                                x: 2.5,
                                y: 0.5,
                                text: 'Storage',
                                showarrow: true,
                                arrowhead: 2,
                                ax: 0,
                                ay: -40
                            },
                            {
                                x: 4.2,
                                y: 0.4,
                                text: 'Retrieval',
                                showarrow: true,
                                arrowhead: 2,
                                ax: 0,
                                ay: -40
                            }
                        ]
                    };
                    
                    Plotly.newPlot(plotDiv, [trace1, trace2, trace3], layout, {responsive: true});
                }
            });
            
            controlsDiv.innerHTML = `
                <h4 style="color: #c4b5fd; margin-bottom: 1rem;">Storage Parameters</h4>
                <div class="control-group">
                    <label class="control-label">Ramp Duration: <span id="storage-ramp-value" class="control-value">0.8 μs</span></label>
                    <input type="range" class="control-slider" id="storage-ramp-slider" min="0.2" max="2.0" value="0.8" step="0.1"
                           oninput="updateStorageRamp(this.value)">
                </div>
                <div class="control-group">
                    <label class="control-label">Storage Time: <span id="storage-time-value" class="control-value">0.9 μs</span></label>
                    <input type="range" class="control-slider" id="storage-time-slider" min="0.5" max="3.0" value="0.9" step="0.1"
                           oninput="updateStorageTime(this.value)">
                </div>
                <p style="margin-top: 1rem; color: #a0a0a0;">
                    The control field is ramped down to map the probe pulse onto atomic spin coherence, 
                    then ramped back up to retrieve the stored information. The efficiency depends on 
                    the ramp parameters and ground-state decoherence rate.
                </p>
            `;
        }
        
        function showHOMVisibilityDemo() {
            const {title, plotDiv, controlsDiv} = prepareDemoDisplay();
            title.textContent = 'Hong-Ou-Mandel Visibility Analysis';
            
            // Load CSV data
            Papa.parse('https://raw.githubusercontent.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/main/data/Extended_Project_Data/hom_visibility_mu.csv', {
                download: true,
                header: true,
                dynamicTyping: true,
                complete: function(results) {
                    const data = results.data.filter(row => row.mu !== null);
                    
                    const trace1 = {
                        x: data.map(d => d.mu),
                        y: data.map(d => d.V_M1_0),
                        name: 'M = 1.0 (Perfect)',
                        type: 'scatter',
                        line: { color: '#10b981', width: 3 }
                    };
                    
                    const trace2 = {
                        x: data.map(d => d.mu),
                        y: data.map(d => d.V_M0_9),
                        name: 'M = 0.9',
                        type: 'scatter',
                        line: { color: '#8b5cf6', width: 3 }
                    };
                    
                    const trace3 = {
                        x: data.map(d => d.mu),
                        y: data.map(d => d.V_M0_8),
                        name: 'M = 0.8',
                        type: 'scatter',
                        line: { color: '#ef4444', width: 3 }
                    };
                    
                    const layout = {
                        title: 'HOM Visibility vs Multi-photon Parameter μ',
                        xaxis: { 
                            title: 'Multi-photon parameter μ', 
                            color: '#e0e0e0',
                            type: 'log'
                        },
                        yaxis: { 
                            title: 'HOM Visibility V', 
                            color: '#e0e0e0',
                            range: [0, 1.05]
                        },
                        paper_bgcolor: 'rgba(0,0,0,0)',
                        plot_bgcolor: 'rgba(0,0,0,0)',
                        font: { color: '#e0e0e0' },
                        showlegend: true,
                        legend: { x: 0.7, y: 0.9 }
                    };
                    
                    Plotly.newPlot(plotDiv, [trace1, trace2, trace3], layout, {responsive: true});
                }
            });
            
            controlsDiv.innerHTML = `
                <h4 style="color: #c4b5fd; margin-bottom: 1rem;">HOM Parameters</h4>
                <div class="control-group">
                    <label class="control-label">Mode Purity M: <span id="hom-purity-value" class="control-value">0.9</span></label>
                    <input type="range" class="control-slider" id="hom-purity-slider" min="0.5" max="1.0" value="0.9" step="0.05"
                           oninput="updateHOMPurity(this.value)">
                </div>
                <div class="control-group">
                    <label class="control-label">Show Theory: 
                        <input type="checkbox" id="hom-theory-check" checked onchange="toggleHOMTheory()">
                    </label>
                </div>
                <p style="margin-top: 1rem; color: #a0a0a0;">
                    The Hong-Ou-Mandel visibility decreases with increasing multi-photon contamination (μ) 
                    and imperfect mode matching (M < 1). The approximate formula V ≈ M/(1 + 2μ) captures 
                    the main features of this degradation.
                </p>
            `;
        }
        
        function showHOMNoisyDemo() {
            const {title, plotDiv, controlsDiv} = prepareDemoDisplay();
            title.textContent = 'Realistic HOM Interference Dip';
            
            // Load CSV data
            Papa.parse('https://raw.githubusercontent.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/main/data/Extended_Project_Data/hom_noisy_dip.csv', {
                download: true,
                header: true,
                dynamicTyping: true,
                complete: function(results) {
                    const data = results.data.filter(row => row.tau_ps !== null);
                    
                    // Add ideal dip for comparison
                    const idealDip = data.map(d => {
                        const tau = d.tau_ps;
                        const sigma = 2.0; // ps
                        return 0.5 * (1 - 0.783 * Math.exp(-tau*tau/(2*sigma*sigma)));
                    });
                    
                    const trace1 = {
                        x: data.map(d => d.tau_ps),
                        y: data.map(d => d.Pc_noisy),
                        name: 'Experimental (with noise)',
                        type: 'scatter',
                        mode: 'markers',
                        marker: { 
                            color: '#8b5cf6', 
                            size: 4,
                            opacity: 0.6
                        }
                    };
                    
                    const trace2 = {
                        x: data.map(d => d.tau_ps),
                        y: idealDip,
                        name: 'Theory (V = 0.783)',
                        type: 'scatter',
                        line: { color: '#10b981', width: 2 }
                    };
                    
                    const layout = {
                        title: 'Noisy HOM Dip (μ = 0.15, M = 0.9)',
                        xaxis: { 
                            title: 'Delay τ (ps)', 
                            color: '#e0e0e0',
                            range: [-8, 8]
                        },
                        yaxis: { 
                            title: 'Coincidence Probability P_c', 
                            color: '#e0e0e0',
                            range: [0, 0.55]
                        },
                        paper_bgcolor: 'rgba(0,0,0,0)',
                        plot_bgcolor: 'rgba(0,0,0,0)',
                        font: { color: '#e0e0e0' },
                        showlegend: true,
                        legend: { x: 0.7, y: 0.9 }
                    };
                    
                    Plotly.newPlot(plotDiv, [trace1, trace2], layout, {responsive: true});
                }
            });
            
            controlsDiv.innerHTML = `
                <h4 style="color: #c4b5fd; margin-bottom: 1rem;">Noise Simulation</h4>
                <div class="control-group">
                    <label class="control-label">Noise Level: <span id="noise-level-value" class="control-value">5%</span></label>
                    <input type="range" class="control-slider" id="noise-level-slider" min="0" max="20" value="5" step="1"
                           oninput="updateNoiseLevel(this.value)">
                </div>
                <div class="control-group">
                    <label class="control-label">Averaging: <span id="averaging-value" class="control-value">100 shots</span></label>
                    <input type="range" class="control-slider" id="averaging-slider" min="10" max="1000" value="100" step="10"
                           oninput="updateAveraging(this.value)">
                </div>
                <p style="margin-top: 1rem; color: #a0a0a0;">
                    This shows a realistic HOM dip with experimental noise. The visibility V = 0.783 
                    corresponds to μ = 0.15 and M = 0.9. The noise simulates detector dark counts, 
                    timing jitter, and finite statistics.
                </p>
            `;
        }
        
        // 3D Parameter Space Explorer
        function show3DParameterSpace() {
            const {title, plotDiv} = prepareDemoDisplay();
            title.textContent = '3D Parameter Space Explorer';
            
            // Generate 3D surface data
            const ramps = Array.from({length: 20}, (_, i) => 0.2 + i * 0.08);
            const gammas = Array.from({length: 20}, (_, i) => 50 + i * 50);
            const z = [];
            
            for (let i = 0; i < gammas.length; i++) {
                z[i] = [];
                for (let j = 0; j < ramps.length; j++) {
                    // Efficiency model
                    const eff = Math.exp(-gammas[i] * ramps[j] / 1000) * (1 - 0.1 * ramps[j]);
                    z[i][j] = eff;
                }
            }
            
            const data = [{
                type: 'surface',
                x: ramps,
                y: gammas,
                z: z,
                colorscale: 'Viridis',
                contours: {
                    z: {
                        show: true,
                        usecolormap: true,
                        highlightcolor: "#42f462",
                        project: {z: true}
                    }
                }
            }];
            
            const layout = {
                title: 'Retrieval Efficiency Parameter Space',
                scene: {
                    xaxis: {title: 'Ramp Duration (μs)', color: '#e0e0e0'},
                    yaxis: {title: 'γ_sg/2π (kHz)', color: '#e0e0e0'},
                    zaxis: {title: 'Efficiency', color: '#e0e0e0'},
                    camera: {
                        eye: {x: 1.5, y: 1.5, z: 1.5}
                    }
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#e0e0e0' }
            };
            
            Plotly.newPlot(plotDiv, data, layout, {responsive: true});
        }
        
        // Update functions for sliders
        function updateEITDemo(value) {
            document.getElementById('eit-rabi-value').textContent = value + ' MHz';
        }
        
        function updateOpticalDepth(value) {
            document.getElementById('eit-od-value').textContent = value;
        }
        
        function updateStorageRamp(value) {
            document.getElementById('storage-ramp-value').textContent = value + ' μs';
        }
        
        function updateStorageTime(value) {
            document.getElementById('storage-time-value').textContent = value + ' μs';
        }
        
        function updateHOMPurity(value) {
            document.getElementById('hom-purity-value').textContent = value;
        }
        
        function updateNoiseLevel(value) {
            document.getElementById('noise-level-value').textContent = value + '%';
        }
        
        function updateAveraging(value) {
            document.getElementById('averaging-value').textContent = value + ' shots';
        }
        
        // Full Interactive Demonstrations
        function showFullEITSimulator() {
            // Hide paper container if visible
            const paperContainer = document.getElementById('paper-container');
            if (paperContainer) {
                paperContainer.style.display = 'none';
            }
            
            const container = document.getElementById('extended-demo-container');
            const title = document.getElementById('demo-title');
            const plotDiv = document.getElementById('extended-demo-plot');
            const controlsDiv = document.getElementById('extended-demo-controls');
            
            container.style.display = 'block';
            title.textContent = 'Full EIT Propagation Simulator';
            
            // Create interactive EIT simulator
            const frequencies = Array.from({length: 200}, (_, i) => -100 + i);
            
            function calculateEIT(detuning, rabiControl, gammaSG) {
                const gammaEG = 6; // MHz
                const eitWidth = Math.pow(rabiControl, 2) / gammaEG + gammaSG;
                const absorption = [];
                const dispersion = [];
                
                for (let delta of frequencies) {
                    const denom = Math.pow(delta - detuning, 2) + Math.pow(eitWidth/2, 2);
                    const abs = 1 - Math.pow(rabiControl, 2) / (4 * denom);
                    const disp = (delta - detuning) * Math.pow(rabiControl, 2) / (4 * denom);
                    absorption.push(abs);
                    dispersion.push(disp);
                }
                return {absorption, dispersion};
            }
            
            const initialData = calculateEIT(0, 10, 0.2);
            
            const trace1 = {
                x: frequencies,
                y: initialData.absorption,
                name: 'Absorption',
                type: 'scatter',
                line: { color: '#ef4444', width: 3 }
            };
            
            const trace2 = {
                x: frequencies,
                y: initialData.dispersion,
                name: 'Dispersion',
                type: 'scatter',
                line: { color: '#8b5cf6', width: 3 },
                yaxis: 'y2'
            };
            
            const layout = {
                title: 'EIT Spectroscopy - Absorption and Dispersion',
                xaxis: { 
                    title: 'Probe Detuning (MHz)', 
                    color: '#e0e0e0',
                    zeroline: true,
                    zerolinecolor: '#666'
                },
                yaxis: { 
                    title: 'Absorption', 
                    color: '#ef4444',
                    range: [-0.1, 1.1]
                },
                yaxis2: {
                    title: 'Dispersion',
                    color: '#8b5cf6',
                    overlaying: 'y',
                    side: 'right',
                    range: [-0.5, 0.5]
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#e0e0e0' },
                showlegend: true
            };
            
            Plotly.newPlot(plotDiv, [trace1, trace2], layout, {responsive: true});
            
            controlsDiv.innerHTML = `
                <h4 style="color: #c4b5fd; margin-bottom: 1rem;">EIT Control Parameters</h4>
                <div class="control-group">
                    <label class="control-label">Control Rabi Frequency: <span id="sim-rabi-value" class="control-value">10 MHz</span></label>
                    <input type="range" class="control-slider" id="sim-rabi-slider" min="0" max="50" value="10" step="1"
                           oninput="updateEITSimulator()">
                </div>
                <div class="control-group">
                    <label class="control-label">Two-Photon Detuning: <span id="sim-detuning-value" class="control-value">0 MHz</span></label>
                    <input type="range" class="control-slider" id="sim-detuning-slider" min="-20" max="20" value="0" step="0.5"
                           oninput="updateEITSimulator()">
                </div>
                <div class="control-group">
                    <label class="control-label">Ground State Dephasing: <span id="sim-gamma-value" class="control-value">0.2 MHz</span></label>
                    <input type="range" class="control-slider" id="sim-gamma-slider" min="0.01" max="2" value="0.2" step="0.01"
                           oninput="updateEITSimulator()">
                </div>
                <div class="control-group">
                    <label class="control-label">Atomic Density: <span id="sim-density-value" class="control-value">5×10¹⁶ m⁻³</span></label>
                    <input type="range" class="control-slider" id="sim-density-slider" min="15" max="17" value="16" step="0.1"
                           oninput="updateEITSimulator()">
                </div>
                <p style="margin-top: 1rem; color: #a0a0a0;">
                    Explore how EIT creates a narrow transparency window within an absorption line. 
                    The control field opens the window, while dephasing and detuning affect its shape and depth.
                </p>
            `;
            
            window.updateEITSimulator = function() {
                const rabi = parseFloat(document.getElementById('sim-rabi-slider').value);
                const detuning = parseFloat(document.getElementById('sim-detuning-slider').value);
                const gamma = parseFloat(document.getElementById('sim-gamma-slider').value);
                const density = parseFloat(document.getElementById('sim-density-slider').value);
                
                document.getElementById('sim-rabi-value').textContent = rabi + ' MHz';
                document.getElementById('sim-detuning-value').textContent = detuning + ' MHz';
                document.getElementById('sim-gamma-value').textContent = gamma.toFixed(2) + ' MHz';
                document.getElementById('sim-density-value').textContent = `${(10**density/1e16).toFixed(1)}×10¹⁶ m⁻³`;
                
                const newData = calculateEIT(detuning, rabi, gamma);
                
                Plotly.update(plotDiv, {
                    y: [newData.absorption, newData.dispersion]
                }, {}, [0, 1]);
            };
        }
        
        function showFullStorageDemo() {
            // Hide paper container if visible
            const paperContainer = document.getElementById('paper-container');
            if (paperContainer) {
                paperContainer.style.display = 'none';
            }
            
            const container = document.getElementById('extended-demo-container');
            const title = document.getElementById('demo-title');
            const plotDiv = document.getElementById('extended-demo-plot');
            const controlsDiv = document.getElementById('extended-demo-controls');
            
            container.style.display = 'block';
            title.textContent = 'Animated Quantum Memory Storage & Retrieval';
            
            // Create animated storage demo
            let animationFrame = 0;
            let animationId = null;
            
            function generateStorageData(frame, rampTime, storageTime) {
                const t = Array.from({length: 500}, (_, i) => i * 0.02);
                const probeIn = [];
                const probeOut = [];
                const control = [];
                const spinWave = [];
                
                const t1 = 2.0; // probe arrival
                const t2 = 2.5; // start storage
                const t3 = t2 + rampTime; // storage complete
                const t4 = t3 + storageTime; // start retrieval
                const t5 = t4 + rampTime; // retrieval complete
                
                for (let i = 0; i < t.length; i++) {
                    const time = t[i];
                    
                    // Input probe pulse
                    probeIn[i] = Math.exp(-Math.pow((time - t1) / 0.3, 2));
                    
                    // Control field
                    if (time < t2) control[i] = 1;
                    else if (time < t3) control[i] = 1 - (time - t2) / rampTime;
                    else if (time < t4) control[i] = 0;
                    else if (time < t5) control[i] = (time - t4) / rampTime;
                    else control[i] = 1;
                    
                    // Output probe
                    if (time < t2) probeOut[i] = probeIn[i] * 0.9;
                    else if (time < t3) probeOut[i] = probeIn[i] * control[i] * 0.8;
                    else if (time < t4) probeOut[i] = 0;
                    else if (time < t5) {
                        const retrievalPulse = Math.exp(-Math.pow((time - t4 - 0.3) / 0.3, 2));
                        probeOut[i] = retrievalPulse * control[i] * 0.7;
                    } else {
                        const retrievalPulse = Math.exp(-Math.pow((time - t4 - 0.3) / 0.3, 2));
                        probeOut[i] = retrievalPulse * 0.7;
                    }
                    
                    // Spin wave
                    if (time < t2) spinWave[i] = 0;
                    else if (time < t3) spinWave[i] = (1 - control[i]) * 0.8;
                    else if (time < t4) spinWave[i] = 0.8 * Math.exp(-(time - t3) * 0.1);
                    else if (time < t5) spinWave[i] = spinWave[i-1] * (1 - control[i] * 0.1);
                    else spinWave[i] = 0;
                }
                
                // Animate based on frame
                const visibleIndex = Math.min(Math.floor(frame * 5), t.length);
                
                return {
                    t: t.slice(0, visibleIndex),
                    probeIn: probeIn.slice(0, visibleIndex),
                    probeOut: probeOut.slice(0, visibleIndex),
                    control: control.slice(0, visibleIndex),
                    spinWave: spinWave.slice(0, visibleIndex)
                };
            }
            
            const data = generateStorageData(100, 0.5, 1.0);
            
            const trace1 = {
                x: data.t,
                y: data.probeIn,
                name: 'Input Probe',
                type: 'scatter',
                line: { color: '#10b981', width: 2, dash: 'dash' }
            };
            
            const trace2 = {
                x: data.t,
                y: data.probeOut,
                name: 'Output Probe',
                type: 'scatter',
                line: { color: '#10b981', width: 3 }
            };
            
            const trace3 = {
                x: data.t,
                y: data.control,
                name: 'Control Field',
                type: 'scatter',
                line: { color: '#8b5cf6', width: 3 },
                yaxis: 'y2'
            };
            
            const trace4 = {
                x: data.t,
                y: data.spinWave,
                name: 'Spin Wave',
                type: 'scatter',
                line: { color: '#ef4444', width: 2 },
                fill: 'tozeroy',
                fillcolor: 'rgba(239, 68, 68, 0.2)'
            };
            
            const layout = {
                title: 'Quantum Memory Operation in Real Time',
                xaxis: { 
                    title: 'Time (μs)', 
                    color: '#e0e0e0',
                    range: [0, 10]
                },
                yaxis: { 
                    title: 'Probe Field', 
                    color: '#10b981',
                    range: [-0.1, 1.1]
                },
                yaxis2: {
                    title: 'Control Field',
                    color: '#8b5cf6',
                    overlaying: 'y',
                    side: 'right',
                    range: [-0.1, 1.1]
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#e0e0e0' },
                showlegend: true,
                legend: { x: 0.02, y: 0.98 }
            };
            
            Plotly.newPlot(plotDiv, [trace1, trace2, trace3, trace4], layout, {responsive: true});
            
            controlsDiv.innerHTML = `
                <h4 style="color: #c4b5fd; margin-bottom: 1rem;">Storage Control</h4>
                <div class="control-group">
                    <button class="demo-btn" onclick="startStorageAnimation()" style="margin: 0;">
                        <i class="fas fa-play"></i> Start Animation
                    </button>
                    <button class="demo-btn" onclick="stopStorageAnimation()" style="margin: 0 0 0 1rem; background: linear-gradient(135deg, #ef4444, #dc2626);">
                        <i class="fas fa-stop"></i> Stop
                    </button>
                    <button class="demo-btn" onclick="resetStorageAnimation()" style="margin: 0 0 0 1rem; background: linear-gradient(135deg, #6b7280, #4b5563);">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
                <div class="control-group">
                    <label class="control-label">Ramp Time: <span id="storage-ramp-time" class="control-value">0.5 μs</span></label>
                    <input type="range" class="control-slider" id="storage-ramp-slider" min="0.1" max="2.0" value="0.5" step="0.1"
                           oninput="updateStorageParams()">
                </div>
                <div class="control-group">
                    <label class="control-label">Storage Duration: <span id="storage-duration" class="control-value">1.0 μs</span></label>
                    <input type="range" class="control-slider" id="storage-duration-slider" min="0.5" max="3.0" value="1.0" step="0.1"
                           oninput="updateStorageParams()">
                </div>
                <p style="margin-top: 1rem; color: #a0a0a0;">
                    Watch how the probe pulse is stored as atomic spin coherence when the control field 
                    is turned off, then retrieved when the control is restored. The efficiency depends 
                    on the ramp speed and storage duration.
                </p>
            `;
            
            window.startStorageAnimation = function() {
                if (animationId) return;
                
                function animate() {
                    animationFrame = (animationFrame + 1) % 100;
                    const rampTime = parseFloat(document.getElementById('storage-ramp-slider').value);
                    const storageTime = parseFloat(document.getElementById('storage-duration-slider').value);
                    const data = generateStorageData(animationFrame, rampTime, storageTime);
                    
                    Plotly.update(plotDiv, {
                        x: [data.t, data.t, data.t, data.t],
                        y: [data.probeIn, data.probeOut, data.control, data.spinWave]
                    }, {}, [0, 1, 2, 3]);
                    
                    animationId = requestAnimationFrame(animate);
                }
                animate();
            };
            
            window.stopStorageAnimation = function() {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            };
            
            window.resetStorageAnimation = function() {
                stopStorageAnimation();
                animationFrame = 0;
                const rampTime = parseFloat(document.getElementById('storage-ramp-slider').value);
                const storageTime = parseFloat(document.getElementById('storage-duration-slider').value);
                const data = generateStorageData(100, rampTime, storageTime);
                
                Plotly.update(plotDiv, {
                    x: [data.t, data.t, data.t, data.t],
                    y: [data.probeIn, data.probeOut, data.control, data.spinWave]
                }, {}, [0, 1, 2, 3]);
            };
            
            window.updateStorageParams = function() {
                const rampTime = parseFloat(document.getElementById('storage-ramp-slider').value);
                const storageTime = parseFloat(document.getElementById('storage-duration-slider').value);
                document.getElementById('storage-ramp-time').textContent = rampTime + ' μs';
                document.getElementById('storage-duration').textContent = storageTime + ' μs';
                
                if (!animationId) {
                    const data = generateStorageData(100, rampTime, storageTime);
                    Plotly.update(plotDiv, {
                        x: [data.t, data.t, data.t, data.t],
                        y: [data.probeIn, data.probeOut, data.control, data.spinWave]
                    }, {}, [0, 1, 2, 3]);
                }
            };
        }
        
        function showDopplerEffectsExplorer() {
            // Hide paper container if visible
            const paperContainer = document.getElementById('paper-container');
            if (paperContainer) {
                paperContainer.style.display = 'none';
            }
            
            const container = document.getElementById('extended-demo-container');
            const title = document.getElementById('demo-title');
            const plotDiv = document.getElementById('extended-demo-plot');
            const controlsDiv = document.getElementById('extended-demo-controls');
            
            container.style.display = 'block';
            title.textContent = 'Doppler Effects on EIT Performance';
            
            // Create Doppler visualization
            function generateDopplerData(temperature, geometry) {
                const k_B = 1.38e-23;
                const m_Rb = 1.45e-25;
                const sigma_v = Math.sqrt(k_B * temperature / m_Rb);
                
                const velocities = Array.from({length: 100}, (_, i) => -3*sigma_v + 6*sigma_v*i/99);
                const weights = velocities.map(v => Math.exp(-v*v/(2*sigma_v*sigma_v)));
                const sumWeights = weights.reduce((a, b) => a + b);
                weights.forEach((_, i) => weights[i] /= sumWeights);
                
                const frequencies = Array.from({length: 200}, (_, i) => -50 + 0.5*i);
                const absorption = new Array(frequencies.length).fill(0);
                
                // Calculate absorption for each velocity class
                for (let j = 0; j < velocities.length; j++) {
                    const v = velocities[j];
                    const doppler = geometry === 'co' ? 0.01 * v : 0.02 * v; // Different for co/counter
                    
                    for (let i = 0; i < frequencies.length; i++) {
                        const delta = frequencies[i] - doppler;
                        const abs = 1 / (1 + 4 * delta * delta / 100);
                        absorption[i] += weights[j] * abs;
                    }
                }
                
                return {frequencies, absorption, velocities, weights, sigma_v};
            }
            
            const data = generateDopplerData(300, 'co');
            
            // Create subplots
            const trace1 = {
                x: data.velocities,
                y: data.weights,
                name: 'Velocity Distribution',
                type: 'scatter',
                line: { color: '#8b5cf6', width: 3 },
                xaxis: 'x',
                yaxis: 'y'
            };
            
            const trace2 = {
                x: data.frequencies,
                y: data.absorption,
                name: 'EIT Spectrum',
                type: 'scatter',
                line: { color: '#10b981', width: 3 },
                xaxis: 'x2',
                yaxis: 'y2'
            };
            
            const layout = {
                title: 'Thermal Motion Effects on EIT',
                grid: {rows: 1, columns: 2, pattern: 'independent'},
                xaxis: {
                    title: 'Velocity (m/s)',
                    color: '#e0e0e0',
                    domain: [0, 0.45]
                },
                yaxis: {
                    title: 'Probability',
                    color: '#e0e0e0'
                },
                xaxis2: {
                    title: 'Detuning (MHz)',
                    color: '#e0e0e0',
                    domain: [0.55, 1]
                },
                yaxis2: {
                    title: 'Absorption',
                    color: '#e0e0e0',
                    anchor: 'x2'
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#e0e0e0' },
                showlegend: true,
                annotations: [{
                    x: 0.225,
                    y: 1.1,
                    xref: 'paper',
                    yref: 'paper',
                    text: `σ<sub>v</sub> = ${data.sigma_v.toFixed(0)} m/s`,
                    showarrow: false,
                    font: { color: '#c4b5fd', size: 14 }
                }]
            };
            
            Plotly.newPlot(plotDiv, [trace1, trace2], layout, {responsive: true});
            
            controlsDiv.innerHTML = `
                <h4 style="color: #c4b5fd; margin-bottom: 1rem;">Doppler Parameters</h4>
                <div class="control-group">
                    <label class="control-label">Temperature: <span id="doppler-temp-value" class="control-value">300 K</span></label>
                    <input type="range" class="control-slider" id="doppler-temp-slider" min="100" max="600" value="300" step="10"
                           oninput="updateDopplerExplorer()">
                </div>
                <div class="control-group">
                    <label class="control-label">Geometry: 
                        <select id="doppler-geometry" onchange="updateDopplerExplorer()" style="background: #1a1a1a; color: #8b5cf6; border: 1px solid #8b5cf6; padding: 0.5rem; border-radius: 5px;">
                            <option value="co">Co-propagating</option>
                            <option value="counter">Counter-propagating</option>
                        </select>
                    </label>
                </div>
                <div class="control-group">
                    <label class="control-label">Show Individual Classes: 
                        <input type="checkbox" id="doppler-classes-check" onchange="updateDopplerExplorer()">
                    </label>
                </div>
                <p style="margin-top: 1rem; color: #a0a0a0;">
                    Higher temperatures lead to broader velocity distributions, which cause Doppler broadening 
                    of the EIT window. Counter-propagating geometry shows different sensitivity to Doppler effects 
                    compared to co-propagating configuration.
                </p>
            `;
            
            window.updateDopplerExplorer = function() {
                const temp = parseFloat(document.getElementById('doppler-temp-slider').value);
                const geometry = document.getElementById('doppler-geometry').value;
                const showClasses = document.getElementById('doppler-classes-check').checked;
                
                document.getElementById('doppler-temp-value').textContent = temp + ' K';
                
                const newData = generateDopplerData(temp, geometry);
                
                Plotly.update(plotDiv, {
                    x: [newData.velocities, newData.frequencies],
                    y: [newData.weights, newData.absorption]
                }, {
                    annotations: [{
                        x: 0.225,
                        y: 1.1,
                        xref: 'paper',
                        yref: 'paper',
                        text: `σ<sub>v</sub> = ${newData.sigma_v.toFixed(0)} m/s`,
                        showarrow: false,
                        font: { color: '#c4b5fd', size: 14 }
                    }]
                }, [0, 1]);
            };
        }
        
        function showFullParameterSpace() {
            // Hide paper container if visible
            const paperContainer = document.getElementById('paper-container');
            if (paperContainer) {
                paperContainer.style.display = 'none';
            }
            
            const container = document.getElementById('extended-demo-container');
            const title = document.getElementById('demo-title');
            const plotDiv = document.getElementById('extended-demo-plot');
            const controlsDiv = document.getElementById('extended-demo-controls');
            
            container.style.display = 'block';
            title.textContent = 'Interactive 3D Parameter Space Explorer';
            
            // Generate comprehensive parameter space
            function generateParameterSpace(param1, param2, param3) {
                const x = Array.from({length: 30}, (_, i) => 0.1 + i * 0.1); // Ramp time
                const y = Array.from({length: 30}, (_, i) => 10 + i * 30); // Dephasing rate
                const z = [];
                
                for (let i = 0; i < y.length; i++) {
                    z[i] = [];
                    for (let j = 0; j < x.length; j++) {
                        // Complex efficiency model
                        const ramp = x[j];
                        const gamma = y[i];
                        const eff = Math.exp(-gamma * ramp / 1000) * 
                                   (1 - 0.05 * ramp) * 
                                   (1 + 0.1 * Math.sin(param1 * ramp)) *
                                   Math.exp(-param2 * gamma / 10000) *
                                   (1 - param3 * 0.1);
                        z[i][j] = Math.max(0, Math.min(1, eff));
                    }
                }
                
                return {x, y, z};
            }
            
            const data = generateParameterSpace(1, 1, 0.5);
            
            const surface = {
                type: 'surface',
                x: data.x,
                y: data.y,
                z: data.z,
                colorscale: [
                    [0, '#440154'],
                    [0.2, '#3e4989'],
                    [0.4, '#26828e'],
                    [0.6, '#35b779'],
                    [0.8, '#6ece58'],
                    [1, '#b5de2b']
                ],
                contours: {
                    z: {
                        show: true,
                        usecolormap: true,
                        highlightcolor: "#42f462",
                        project: {z: true}
                    }
                },
                colorbar: {
                    title: 'Efficiency',
                    titleside: 'right'
                }
            };
            
            const layout = {
                title: 'Multi-Dimensional Parameter Optimization',
                scene: {
                    xaxis: {
                        title: 'Ramp Duration (μs)',
                        color: '#e0e0e0',
                        gridcolor: '#444',
                        showspikes: false
                    },
                    yaxis: {
                        title: 'γ_sg/2π (kHz)',
                        color: '#e0e0e0',
                        gridcolor: '#444',
                        showspikes: false
                    },
                    zaxis: {
                        title: 'Retrieval Efficiency',
                        color: '#e0e0e0',
                        gridcolor: '#444',
                        showspikes: false
                    },
                    camera: {
                        eye: {x: 1.5, y: 1.5, z: 1.5},
                        center: {x: 0, y: 0, z: -0.1}
                    },
                    bgcolor: 'rgba(0,0,0,0)'
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#e0e0e0' },
                margin: {l: 0, r: 0, t: 40, b: 0}
            };
            
            Plotly.newPlot(plotDiv, [surface], layout, {responsive: true});
            
            controlsDiv.innerHTML = `
                <h4 style="color: #c4b5fd; margin-bottom: 1rem;">Parameter Space Controls</h4>
                <div class="control-group">
                    <label class="control-label">Optical Depth Factor: <span id="param1-value" class="control-value">1.0</span></label>
                    <input type="range" class="control-slider" id="param1-slider" min="0" max="3" value="1" step="0.1"
                           oninput="updateParameterSpace()">
                </div>
                <div class="control-group">
                    <label class="control-label">Temperature Factor: <span id="param2-value" class="control-value">1.0</span></label>
                    <input type="range" class="control-slider" id="param2-slider" min="0" max="3" value="1" step="0.1"
                           oninput="updateParameterSpace()">
                </div>
                <div class="control-group">
                    <label class="control-label">Noise Level: <span id="param3-value" class="control-value">0.5</span></label>
                    <input type="range" class="control-slider" id="param3-slider" min="0" max="1" value="0.5" step="0.05"
                           oninput="updateParameterSpace()">
                </div>
                <div class="control-group">
                    <label class="control-label">View Angle: 
                        <button class="demo-btn" onclick="rotateParameterSpace()" style="margin: 0; padding: 0.5rem 1rem;">
                            <i class="fas fa-sync-alt"></i> Auto Rotate
                        </button>
                    </label>
                </div>
                <p style="margin-top: 1rem; color: #a0a0a0;">
                    Explore the complex parameter space for quantum memory optimization. The surface shows 
                    retrieval efficiency as a function of control parameters, with additional factors 
                    modulating the landscape. Find the optimal operating point for your experimental conditions.
                </p>
            `;
            
            window.updateParameterSpace = function() {
                const param1 = parseFloat(document.getElementById('param1-slider').value);
                const param2 = parseFloat(document.getElementById('param2-slider').value);
                const param3 = parseFloat(document.getElementById('param3-slider').value);
                
                document.getElementById('param1-value').textContent = param1.toFixed(1);
                document.getElementById('param2-value').textContent = param2.toFixed(1);
                document.getElementById('param3-value').textContent = param3.toFixed(2);
                
                const newData = generateParameterSpace(param1, param2, param3);
                
                Plotly.update(plotDiv, {
                    z: [newData.z]
                }, {}, [0]);
            };
            
            let rotationInterval = null;
            window.rotateParameterSpace = function() {
                if (rotationInterval) {
                    clearInterval(rotationInterval);
                    rotationInterval = null;
                    return;
                }
                
                let angle = 0;
                rotationInterval = setInterval(() => {
                    angle += 2;
                    const radians = angle * Math.PI / 180;
                    const camera = {
                        eye: {
                            x: 1.5 * Math.cos(radians),
                            y: 1.5 * Math.sin(radians),
                            z: 1.5
                        }
                    };
                    Plotly.relayout(plotDiv, {'scene.camera': camera});
                }, 50);
            };
        }
        
        function showTechnicalPaper() {
            // Hide any existing demo container
            const existingContainer = document.getElementById('extended-demo-container');
            if (existingContainer) {
                existingContainer.style.display = 'none';
            }
            
            // Create or show paper container
            let paperContainer = document.getElementById('paper-container');
            if (!paperContainer) {
                paperContainer = document.createElement('div');
                paperContainer.id = 'paper-container';
                paperContainer.style.cssText = 'margin-top: 3rem;';
                
                // Insert after the demo grid
                const demoSection = document.getElementById('interactive-demos');
                demoSection.appendChild(paperContainer);
            }
            
            paperContainer.style.display = 'block';
            paperContainer.innerHTML = `
                <div class="visualization-container">
                    <h3 style="color: #c4b5fd; margin-bottom: 1.5rem;">Technical Paper: EIT-Based Quantum Optics</h3>
                <div style="background: white; color: black; padding: 3rem; border-radius: 10px; max-width: 800px; margin: 0 auto; font-family: 'Times New Roman', serif; line-height: 1.8; overflow-y: auto; max-height: 600px;">
                    <h1 style="text-align: center; font-size: 24px; margin-bottom: 1rem; color: black;">
                        Electromagnetically Induced Transparency, Slow Light, and Two-Photon Interference:
                        <br>An Extended Simulation Study with Maxwell–Bloch Propagation and Storage
                    </h1>
                    
                    <p style="text-align: center; font-style: italic; margin-bottom: 2rem; color: #666;">
                        Generated by Advanced Quantum Optics Simulation Suite
                    </p>
                    
                    <h2 style="font-size: 20px; margin-top: 2rem; color: black;">Abstract</h2>
                    <p style="text-align: justify; text-indent: 2rem;">
                        We extend a self-contained, simulation-driven quantum optics project to include (i) one-dimensional 
                        Maxwell–Bloch (MB) propagation of a weak probe through a Λ medium with Doppler averaging and decoherence; 
                        (ii) an EIT storage/retrieval sequence using a time-dependent control field; and (iii) a noise/visibility 
                        analysis for Hong–Ou–Mandel (HOM) interference under multi-photon contamination and spectral impurity. 
                        We provide figures, CSV data, and a ready-to-compile LaTeX manuscript.
                    </p>
                    
                    <h2 style="font-size: 20px; margin-top: 2rem; color: black;">1. Introduction</h2>
                    <p style="text-align: justify; text-indent: 2rem;">
                        Electromagnetically induced transparency (EIT) enables quantum control of absorption and dispersion 
                        in multi-level media, allowing slow light and optical storage. Two-photon interference in the HOM 
                        effect probes indistinguishability of single photons. We build on standard optical Bloch and 
                        linear-response models and add a 1D MB propagator for realistic pulse evolution.
                    </p>
                    
                    <h2 style="font-size: 20px; margin-top: 2rem; color: black;">2. Methods</h2>
                    <h3 style="font-size: 18px; margin-top: 1.5rem; color: black;">2.1 Maxwell–Bloch Equations</h3>
                    <p style="text-align: justify; text-indent: 2rem;">
                        Under the slowly varying envelope approximation (SVEA) and a co-moving frame (t' = t - z/c), 
                        the probe Rabi frequency Ω<sub>p</sub>(z,t) obeys:
                    </p>
                                         <div style="text-align: center; margin: 1rem 0; font-style: italic;">
                         ∂<sub>z</sub>Ω<sub>p</sub>(z,t) = iη⟨ρ<sub>eg</sub>(z,t;v)⟩<sub>v</sub>
                     </div>
                     <p style="text-align: justify; text-indent: 2rem;">
                         where η = Nμ²ω/(2ε₀ℏc) and ⟨·⟩<sub>v</sub> denotes Doppler averaging over velocities v.
                     </p>
                     
                     <h3 style="font-size: 18px; margin-top: 1.5rem; color: black;">2.2 EIT Storage and Retrieval</h3>
                     <p style="text-align: justify; text-indent: 2rem;">
                         A time-dependent control field Ω<sub>c</sub>(t) is ramped to zero to map the probe envelope 
                         onto the spin coherence ρ<sub>sg</sub> and later restored to retrieve the pulse. We implement 
                         smooth linear ramps and a hold period.
                     </p>
                     
                     <h3 style="font-size: 18px; margin-top: 1.5rem; color: black;">2.3 HOM Visibility with Noise</h3>
                     <p style="text-align: justify; text-indent: 2rem;">
                         We model the HOM visibility as limited by (i) a mean multiphoton parameter μ and (ii) 
                         spectral-temporal mode overlap M∈[0,1]. A practical heuristic is V(μ,M) ≈ M/(1 + 2μ).
                     </p>
                     
                     <h2 style="font-size: 20px; margin-top: 2rem; color: black;">3. Results</h2>
                     <p style="text-align: justify; text-indent: 2rem;">
                         Our simulations demonstrate EIT pulse propagation with and without Doppler averaging, 
                         storage/retrieval sequences with varying efficiency, and HOM visibility degradation 
                         under realistic conditions. The MB propagator captures pulse delay and residual absorption 
                         with Doppler and decoherence.
                     </p>
                     
                     <h2 style="font-size: 20px; margin-top: 2rem; color: black;">4. Conclusion</h2>
                     <p style="text-align: justify; text-indent: 2rem;">
                         We provide an extended, reproducible simulation suite for quantum optics experiments. 
                         The data can seed laboratory planning, coursework, or pre-experimental parameter scans.
                     </p>
                     
                     <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #ccc;">
                         <h3 style="font-size: 16px; color: black;">References</h3>
                         <ol style="font-size: 14px;">
                             <li>M. Fleischhauer, A. Imamoglu, and J. P. Marangos, "Electromagnetically induced transparency," Rev. Mod. Phys. 77, 633 (2005).</li>
                             <li>C. K. Hong, Z. Y. Ou, and L. Mandel, "Measurement of subpicosecond time intervals between two photons by interference," Phys. Rev. Lett. 59, 2044 (1987).</li>
                         </ol>
                     </div>
                 </div>
                 <div class="controls-panel" style="margin-top: 2rem;">
                     <h4 style="color: #c4b5fd; margin-bottom: 1rem;">Paper Options</h4>
                     <div class="control-group">
                         <button class="demo-btn" onclick="window.open('https://github.com/alovladi007/Full-Maxwell-Bloch-Simulation-for-EIT-Based-Quantum-Optics/raw/main/docs/Quantum_Optics_Project_Paper.tex', '_blank')" style="margin: 0;">
                             <i class="fas fa-download"></i> Download LaTeX Source
                         </button>
                         <button class="demo-btn" onclick="window.print()" style="margin: 0 0 0 1rem;">
                             <i class="fas fa-print"></i> Print Paper
                         </button>
                         <button class="demo-btn" onclick="closeTechnicalPaper()" style="margin: 0 0 0 1rem; background: linear-gradient(135deg, #6b7280, #4b5563);">
                             <i class="fas fa-times"></i> Close
                         </button>
                     </div>
                     <p style="margin-top: 1rem; color: #a0a0a0;">
                         This technical paper provides the theoretical background and detailed analysis of the 
                         Maxwell-Bloch simulation results. The LaTeX source is available for download if you 
                         want to compile it locally or use it as a reference.
                     </p>
                 </div>
             </div>
             `;
         }
         
         function closeTechnicalPaper() {
             const paperContainer = document.getElementById('paper-container');
             if (paperContainer) {
                 paperContainer.style.display = 'none';
             }
         }
        
        // Initialize MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
</body>
</html>
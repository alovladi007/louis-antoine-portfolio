<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monte Carlo Methods Tutorial - Statistical PCM Analysis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a2a 100%);
            color: #e0e0e0;
            min-height: 100vh;
        }
        .header {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            border-bottom: 1px solid rgba(147, 51, 234, 0.3);
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .back-btn {
            background: linear-gradient(135deg, #9333ea, #7c3aed);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .page-title {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #9333ea, #c084fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            margin-bottom: 1rem;
        }
        .difficulty-badge {
            display: inline-block;
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            margin: 0 auto 3rem;
            display: block;
            width: fit-content;
        }
        .tutorial-section {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid rgba(147, 51, 234, 0.2);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .section-title {
            font-size: 1.8rem;
            color: #c084fc;
            margin-bottom: 1.5rem;
        }
        .interactive-demo {
            background: rgba(147, 51, 234, 0.1);
            border: 1px solid rgba(147, 51, 234, 0.3);
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
        }
        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .control-group {
            background: rgba(20, 20, 20, 0.8);
            padding: 1rem;
            border-radius: 8px;
        }
        .control-label {
            color: #c084fc;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
        }
        .control-input {
            width: 100%;
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(147, 51, 234, 0.3);
            color: #e0e0e0;
            border-radius: 5px;
        }
        .btn {
            background: linear-gradient(135deg, #9333ea, #7c3aed);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }
        .stat-box {
            background: rgba(0, 0, 0, 0.5);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value {
            font-size: 1.5rem;
            color: #9333ea;
            font-weight: bold;
        }
        .stat-label {
            color: #a0a0a0;
            font-size: 0.85rem;
            margin-top: 0.3rem;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <h2 style="color: #c084fc;">Monte Carlo Methods Tutorial</h2>
            <a href="pcm-tutorials.html" class="back-btn">
                <i class="fas fa-arrow-left"></i> Back to Tutorials
            </a>
        </div>
    </header>

    <main class="main-content">
        <h1 class="page-title">Monte Carlo Statistical Analysis</h1>
        <span class="difficulty-badge">Advanced Level</span>
        
        <div class="tutorial-section">
            <h2 class="section-title">Introduction</h2>
            <p style="line-height: 1.8; color: #d0d0d0;">
                Monte Carlo methods are essential for understanding variability and yield in PCM devices. 
                This advanced tutorial covers statistical simulation techniques, parameter variation modeling, 
                yield prediction, and optimization under uncertainty. Master the tools for robust PCM design.
            </p>
        </div>

        <div class="tutorial-section">
            <h2 class="section-title">Monte Carlo Simulator</h2>
            
            <div class="interactive-demo">
                <h3 style="color: #c084fc; margin-bottom: 1rem;">Statistical Variability Analysis</h3>
                
                <div class="control-grid">
                    <div class="control-group">
                        <label class="control-label">Simulations</label>
                        <input type="number" class="control-input" id="num-sims" value="10000">
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Resistance Variation (%)</label>
                        <input type="number" class="control-input" id="r-variation" value="10">
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Threshold Variation (%)</label>
                        <input type="number" class="control-input" id="vth-variation" value="5">
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Distribution</label>
                        <select class="control-input" id="distribution">
                            <option>Gaussian</option>
                            <option>Log-Normal</option>
                            <option>Uniform</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn" onclick="runMonteCarlo()">
                    <i class="fas fa-dice"></i> Run Monte Carlo Simulation
                </button>
                
                <div id="histogram-plot" style="margin-top: 2rem;"></div>
                <div id="yield-plot" style="margin-top: 2rem;"></div>
                
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="mean-val">--</div>
                        <div class="stat-label">Mean</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="std-val">--</div>
                        <div class="stat-label">Std Dev</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="yield-val">--</div>
                        <div class="stat-label">Yield</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="percentile-val">--</div>
                        <div class="stat-label">95th %ile</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tutorial-section">
            <h2 class="section-title">Congratulations!</h2>
            <div style="background: rgba(76, 237, 196, 0.1); border: 1px solid rgba(76, 237, 196, 0.3); 
                    border-radius: 8px; padding: 1.5rem; text-align: center;">
                <h3 style="color: #4ecdc4; margin-bottom: 1rem;">
                    <i class="fas fa-trophy"></i> Tutorial Series Complete!
                </h3>
                <p style="color: #d0d0d0; line-height: 1.8;">
                    You've mastered PCM simulation from basics to advanced statistical analysis. 
                    Apply these skills to design robust, high-performance PCM devices!
                </p>
                
                <a href="pcm-tutorials.html" class="back-btn" style="margin-top: 1.5rem; display: inline-flex;">
                    <i class="fas fa-home"></i> Back to All Tutorials
                </a>
            </div>
        </div>
    </main>

    <script>
        function runMonteCarlo() {
            const numSims = parseInt(document.getElementById('num-sims').value);
            const rVar = parseFloat(document.getElementById('r-variation').value) / 100;
            const vthVar = parseFloat(document.getElementById('vth-variation').value) / 100;
            const dist = document.getElementById('distribution').value;
            
            // Generate random samples
            const resistances = [];
            const thresholds = [];
            
            for (let i = 0; i < numSims; i++) {
                let r, vth;
                if (dist === 'Gaussian') {
                    r = 1e6 * (1 + (Math.random() - 0.5) * 2 * rVar);
                    vth = 2.8 * (1 + (Math.random() - 0.5) * 2 * vthVar);
                } else if (dist === 'Log-Normal') {
                    r = 1e6 * Math.exp((Math.random() - 0.5) * rVar);
                    vth = 2.8 * Math.exp((Math.random() - 0.5) * vthVar);
                } else {
                    r = 1e6 * (1 + (Math.random() - 0.5) * 2 * rVar);
                    vth = 2.8 * (1 + (Math.random() - 0.5) * 2 * vthVar);
                }
                resistances.push(r);
                thresholds.push(vth);
            }
            
            // Create histogram
            const trace1 = {
                x: resistances,
                type: 'histogram',
                name: 'Resistance Distribution',
                marker: { color: '#9333ea' },
                nbinsx: 50
            };
            
            const layout1 = {
                title: 'Resistance Distribution',
                xaxis: { title: 'Resistance (Ω)', gridcolor: '#333' },
                yaxis: { title: 'Count', gridcolor: '#333' },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#e0e0e0' }
            };
            
            Plotly.newPlot('histogram-plot', [trace1], layout1, {responsive: true});
            
            // Create yield curve
            const sortedR = resistances.sort((a, b) => a - b);
            const yield_curve = sortedR.map((_, i) => (i / numSims) * 100);
            
            const trace2 = {
                x: sortedR,
                y: yield_curve,
                type: 'scatter',
                mode: 'lines',
                name: 'Cumulative Yield',
                line: { color: '#4ecdc4', width: 3 }
            };
            
            const layout2 = {
                title: 'Yield Analysis',
                xaxis: { title: 'Resistance (Ω)', type: 'log', gridcolor: '#333' },
                yaxis: { title: 'Yield (%)', gridcolor: '#333' },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#e0e0e0' }
            };
            
            Plotly.newPlot('yield-plot', [trace2], layout2, {responsive: true});
            
            // Calculate statistics
            const mean = resistances.reduce((a, b) => a + b) / numSims;
            const std = Math.sqrt(resistances.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / numSims);
            const yield_pct = resistances.filter(r => r > 5e5 && r < 2e6).length / numSims * 100;
            const percentile95 = sortedR[Math.floor(numSims * 0.95)];
            
            document.getElementById('mean-val').textContent = mean.toExponential(1);
            document.getElementById('std-val').textContent = std.toExponential(1);
            document.getElementById('yield-val').textContent = yield_pct.toFixed(1) + '%';
            document.getElementById('percentile-val').textContent = percentile95.toExponential(1);
        }
        
        window.addEventListener('load', runMonteCarlo);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocol Generator - ORION</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background-color: #0a0a0a;
            color: #e5e7eb;
            font-family: 'Inter', -apple-system, sans-serif;
            margin: 0;
            padding: 0;
        }

        .navigation-bar {
            background: rgba(20, 20, 30, 0.9);
            border-bottom: 1px solid rgba(102, 126, 234, 0.3);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-btn {
            background: rgba(102, 126, 234, 0.2);
            color: #a5b4fc;
            border: 1px solid rgba(102, 126, 234, 0.3);
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-btn:hover {
            background: rgba(102, 126, 234, 0.4);
            border-color: rgba(102, 126, 234, 0.6);
            transform: translateY(-2px);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .generator-interface {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 2rem;
        }

        .config-panel {
            background: rgba(20, 20, 30, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 2rem;
            height: fit-content;
        }

        .protocol-display {
            background: rgba(20, 20, 30, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 2rem;
        }

        .section-title {
            color: #667eea;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-label {
            color: #9ca3af;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .input-field {
            width: 100%;
            padding: 0.8rem;
            background: rgba(30, 30, 40, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            color: #e5e7eb;
            font-size: 1rem;
        }

        .generate-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 2rem;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .protocol-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .export-buttons {
            display: flex;
            gap: 1rem;
        }

        .export-btn {
            padding: 0.5rem 1rem;
            background: rgba(102, 126, 234, 0.2);
            color: #a5b4fc;
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .export-btn:hover {
            background: rgba(102, 126, 234, 0.4);
            border-color: rgba(102, 126, 234, 0.6);
        }

        .protocol-content {
            background: rgba(30, 30, 40, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 2rem;
            font-family: 'Fira Code', monospace;
            line-height: 1.8;
            overflow-x: auto;
        }

        .protocol-section {
            margin-bottom: 2rem;
        }

        .protocol-section-title {
            color: #f59e0b;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            font-family: 'Inter', -apple-system, sans-serif;
        }

        .protocol-step {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(40, 40, 50, 0.6);
            border-radius: 6px;
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .warning-box {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: flex;
            gap: 1rem;
            align-items: start;
        }

        .warning-icon {
            color: #ef4444;
            font-size: 1.2rem;
        }

        .info-box {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: flex;
            gap: 1rem;
            align-items: start;
        }

        .info-icon {
            color: #3b82f6;
            font-size: 1.2rem;
        }

        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .parameter-table th,
        .parameter-table td {
            padding: 0.8rem;
            text-align: left;
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
        }

        .parameter-table th {
            color: #667eea;
            font-weight: 600;
        }

        .parameter-table td {
            color: #d1d5db;
        }

        .loading-state {
            display: none;
            text-align: center;
            padding: 3rem;
        }

        .loading-state.active {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(102, 126, 234, 0.3);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .template-chips {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .template-chip {
            padding: 0.3rem 0.8rem;
            background: rgba(102, 126, 234, 0.2);
            color: #a5b4fc;
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .template-chip:hover {
            background: rgba(102, 126, 234, 0.4);
            border-color: rgba(102, 126, 234, 0.6);
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="navigation-bar">
        <a href="../orion-nanomaterials-research.html" class="nav-btn">
            <i class="fas fa-arrow-left"></i> Back to ORION
        </a>
        <h2 style="color: #f59e0b; margin: 0;">Protocol Generator</h2>
        <div>
            <a href="technical_documentation.html" class="nav-btn">
                Technical Docs <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>

    <div class="container">
        <div class="generator-interface">
            <!-- Configuration Panel -->
            <div class="config-panel">
                <h3 class="section-title">Protocol Configuration</h3>
                
                <div class="input-group">
                    <label class="input-label">Material</label>
                    <input type="text" class="input-field" id="materialInput" placeholder="e.g., TiO₂, HfO₂, ZnO">
                </div>

                <div class="input-group">
                    <label class="input-label">Synthesis Method</label>
                    <select class="input-field" id="methodSelect">
                        <option value="ald">Atomic Layer Deposition (ALD)</option>
                        <option value="cvd">Chemical Vapor Deposition (CVD)</option>
                        <option value="solgel">Sol-Gel</option>
                        <option value="sputtering">Magnetron Sputtering</option>
                        <option value="hydrothermal">Hydrothermal Synthesis</option>
                        <option value="pld">Pulsed Laser Deposition</option>
                    </select>
                </div>

                <div class="input-group">
                    <label class="input-label">Substrate</label>
                    <input type="text" class="input-field" id="substrateInput" placeholder="e.g., Si, Glass, FTO">
                </div>

                <div class="input-group">
                    <label class="input-label">Target Thickness (nm)</label>
                    <input type="number" class="input-field" id="thicknessInput" placeholder="e.g., 50">
                </div>

                <div class="input-group">
                    <label class="input-label">Temperature Limit (°C)</label>
                    <input type="number" class="input-field" id="temperatureInput" placeholder="e.g., 300">
                </div>

                <div class="input-group">
                    <label class="input-label">Quick Templates</label>
                    <div class="template-chips">
                        <div class="template-chip" onclick="loadTemplate('memristor')">Memristor</div>
                        <div class="template-chip" onclick="loadTemplate('solar')">Solar Cell</div>
                        <div class="template-chip" onclick="loadTemplate('sensor')">Gas Sensor</div>
                        <div class="template-chip" onclick="loadTemplate('photocatalyst')">Photocatalyst</div>
                    </div>
                </div>

                <button class="generate-btn" onclick="generateProtocol()">
                    <i class="fas fa-flask"></i> Generate Protocol
                </button>
            </div>

            <!-- Protocol Display -->
            <div class="protocol-display">
                <div class="protocol-header">
                    <h3 class="section-title">Generated Protocol</h3>
                    <div class="export-buttons">
                        <button class="export-btn" onclick="exportPDF()">
                            <i class="fas fa-file-pdf"></i> PDF
                        </button>
                        <button class="export-btn" onclick="exportMarkdown()">
                            <i class="fas fa-file-alt"></i> Markdown
                        </button>
                        <button class="export-btn" onclick="exportJSON()">
                            <i class="fas fa-code"></i> JSON
                        </button>
                    </div>
                </div>

                <div class="loading-state" id="loadingState">
                    <div class="spinner"></div>
                    <p style="color: #9ca3af;">Generating protocol...</p>
                </div>

                <div id="protocolContent"></div>
            </div>
        </div>
    </div>

    <script>
        // Load template
        function loadTemplate(type) {
            const templates = {
                memristor: {
                    material: 'HfO₂',
                    method: 'ald',
                    substrate: 'Pt/Ti/SiO₂/Si',
                    thickness: '10',
                    temperature: '250'
                },
                solar: {
                    material: 'TiO₂',
                    method: 'solgel',
                    substrate: 'FTO Glass',
                    thickness: '200',
                    temperature: '450'
                },
                sensor: {
                    material: 'ZnO',
                    method: 'hydrothermal',
                    substrate: 'Al₂O₃',
                    thickness: '500',
                    temperature: '180'
                },
                photocatalyst: {
                    material: 'WO₃',
                    method: 'sputtering',
                    substrate: 'Glass',
                    thickness: '300',
                    temperature: '400'
                }
            };

            const template = templates[type];
            document.getElementById('materialInput').value = template.material;
            document.getElementById('methodSelect').value = template.method;
            document.getElementById('substrateInput').value = template.substrate;
            document.getElementById('thicknessInput').value = template.thickness;
            document.getElementById('temperatureInput').value = template.temperature;
        }

        // Generate protocol
        async function generateProtocol() {
            const material = document.getElementById('materialInput').value;
            const method = document.getElementById('methodSelect').value;
            const substrate = document.getElementById('substrateInput').value;
            const thickness = document.getElementById('thicknessInput').value;
            const temperature = document.getElementById('temperatureInput').value;

            if (!material || !substrate || !thickness || !temperature) {
                alert('Please fill in all required fields');
                return;
            }

            document.getElementById('loadingState').classList.add('active');
            document.getElementById('protocolContent').innerHTML = '';

            // Simulate API call
            await new Promise(resolve => setTimeout(resolve, 2000));

            const protocol = generateProtocolContent(material, method, substrate, thickness, temperature);
            displayProtocol(protocol);

            document.getElementById('loadingState').classList.remove('active');
        }

        // Generate protocol content
        function generateProtocolContent(material, method, substrate, thickness, temperature) {
            const methodNames = {
                ald: 'Atomic Layer Deposition',
                cvd: 'Chemical Vapor Deposition',
                solgel: 'Sol-Gel',
                sputtering: 'Magnetron Sputtering',
                hydrothermal: 'Hydrothermal Synthesis',
                pld: 'Pulsed Laser Deposition'
            };

            return {
                title: `${material} Thin Film Synthesis Protocol`,
                method: methodNames[method],
                overview: `This protocol describes the synthesis of ${material} thin films on ${substrate} substrate using ${methodNames[method]} to achieve a target thickness of ${thickness} nm.`,
                safety: [
                    'Wear appropriate PPE including lab coat, safety glasses, and gloves',
                    'Work in a well-ventilated area or fume hood',
                    'Review SDS for all chemicals before use',
                    'Ensure emergency equipment is accessible'
                ],
                materials: [
                    `${material} precursor (99.9% purity)`,
                    `${substrate} substrate (cleaned)`,
                    'Deionized water (18.2 MΩ·cm)',
                    'Ethanol (99.9%)',
                    'Nitrogen gas (99.999%)'
                ],
                equipment: [
                    `${methodNames[method]} system`,
                    'Substrate holder',
                    'Temperature controller',
                    'Thickness monitor',
                    'Vacuum pump system'
                ],
                parameters: {
                    'Process Temperature': `${temperature}°C`,
                    'Target Thickness': `${thickness} nm`,
                    'Deposition Rate': '0.5-1.0 Å/cycle',
                    'Base Pressure': '< 1×10⁻⁶ Torr',
                    'Process Pressure': '1-5 Torr'
                },
                procedure: [
                    'Clean substrate with acetone, ethanol, and DI water (5 min each)',
                    'Dry substrate with N₂ gas',
                    `Load substrate into ${methodNames[method]} chamber`,
                    'Pump down to base pressure',
                    `Ramp temperature to ${temperature}°C at 5°C/min`,
                    'Stabilize temperature for 10 minutes',
                    'Begin deposition process',
                    'Monitor thickness in real-time',
                    'Stop deposition at target thickness',
                    'Cool down to room temperature',
                    'Vent chamber with N₂',
                    'Remove sample for characterization'
                ],
                characterization: [
                    'XRD for crystal structure',
                    'SEM for morphology',
                    'AFM for surface roughness',
                    'Ellipsometry for thickness verification',
                    'XPS for composition analysis'
                ]
            };
        }

        // Display protocol
        function displayProtocol(protocol) {
            const content = document.getElementById('protocolContent');
            
            content.innerHTML = `
                <div class="protocol-content">
                    <h2 style="color: #f59e0b; margin-bottom: 1rem;">${protocol.title}</h2>
                    <p style="color: #d1d5db; margin-bottom: 2rem;">${protocol.overview}</p>

                    <div class="warning-box">
                        <i class="fas fa-exclamation-triangle warning-icon"></i>
                        <div>
                            <strong>Safety Precautions</strong>
                            <ul style="margin: 0.5rem 0 0 0; padding-left: 1.5rem;">
                                ${protocol.safety.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                    </div>

                    <div class="protocol-section">
                        <h3 class="protocol-section-title">Materials & Equipment</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div>
                                <h4 style="color: #9ca3af; margin-bottom: 0.5rem;">Materials</h4>
                                <ul style="margin: 0; padding-left: 1.5rem;">
                                    ${protocol.materials.map(item => `<li style="color: #d1d5db;">${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div>
                                <h4 style="color: #9ca3af; margin-bottom: 0.5rem;">Equipment</h4>
                                <ul style="margin: 0; padding-left: 1.5rem;">
                                    ${protocol.equipment.map(item => `<li style="color: #d1d5db;">${item}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="protocol-section">
                        <h3 class="protocol-section-title">Process Parameters</h3>
                        <table class="parameter-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${Object.entries(protocol.parameters).map(([key, value]) => `
                                    <tr>
                                        <td>${key}</td>
                                        <td>${value}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>

                    <div class="protocol-section">
                        <h3 class="protocol-section-title">Procedure</h3>
                        ${protocol.procedure.map((step, index) => `
                            <div class="protocol-step">
                                <div class="step-number">${index + 1}</div>
                                <div class="step-content">${step}</div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="info-box">
                        <i class="fas fa-info-circle info-icon"></i>
                        <div>
                            <strong>Characterization Methods</strong>
                            <ul style="margin: 0.5rem 0 0 0; padding-left: 1.5rem;">
                                ${protocol.characterization.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        // Export functions (mock implementations)
        function exportPDF() {
            alert('PDF export would be implemented here');
        }

        function exportMarkdown() {
            alert('Markdown export would be implemented here');
        }

        function exportJSON() {
            alert('JSON export would be implemented here');
        }
    </script>
</body>
</html>

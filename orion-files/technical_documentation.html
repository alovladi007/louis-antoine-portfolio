<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technical Documentation - ORION</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            background-color: #0a0a0a;
            color: #e5e7eb;
            font-family: 'Inter', -apple-system, sans-serif;
            margin: 0;
            padding: 0;
        }

        .navigation-bar {
            background: rgba(20, 20, 30, 0.9);
            border-bottom: 1px solid rgba(102, 126, 234, 0.3);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-btn {
            background: rgba(102, 126, 234, 0.2);
            color: #a5b4fc;
            border: 1px solid rgba(102, 126, 234, 0.3);
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-btn:hover {
            background: rgba(102, 126, 234, 0.4);
            border-color: rgba(102, 126, 234, 0.6);
            transform: translateY(-2px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .doc-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 3rem;
            margin-top: 2rem;
        }

        .sidebar {
            position: sticky;
            top: 2rem;
            height: fit-content;
        }

        .sidebar-section {
            margin-bottom: 2rem;
        }

        .sidebar-title {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .sidebar-link {
            display: block;
            color: #9ca3af;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            margin-bottom: 0.3rem;
        }

        .sidebar-link:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #a5b4fc;
        }

        .sidebar-link.active {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            border-left: 3px solid #667eea;
        }

        .content {
            background: rgba(20, 20, 30, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 3rem;
        }

        .section {
            margin-bottom: 4rem;
            scroll-margin-top: 2rem;
        }

        .section-title {
            color: #f59e0b;
            font-size: 2rem;
            margin-bottom: 2rem;
            font-weight: 700;
        }

        .subsection-title {
            color: #667eea;
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
            font-weight: 600;
        }

        .code-block {
            background: rgba(10, 10, 20, 0.9);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            color: #e5e7eb;
            font-family: 'Fira Code', monospace;
            line-height: 1.6;
        }

        .architecture-diagram {
            background: rgba(30, 30, 40, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: rgba(30, 30, 40, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            border-color: rgba(102, 126, 234, 0.6);
            transform: translateY(-3px);
        }

        .feature-icon {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            color: #f3f4f6;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .feature-description {
            color: #9ca3af;
            line-height: 1.6;
        }

        .api-endpoint {
            background: rgba(30, 30, 40, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .method-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .method-get {
            background: #10b981;
            color: white;
        }

        .method-post {
            background: #3b82f6;
            color: white;
        }

        .method-put {
            background: #f59e0b;
            color: white;
        }

        .method-delete {
            background: #ef4444;
            color: white;
        }

        .endpoint-path {
            color: #a5b4fc;
            font-family: 'Fira Code', monospace;
        }

        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .parameter-table th,
        .parameter-table td {
            padding: 0.8rem;
            text-align: left;
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
        }

        .parameter-table th {
            color: #667eea;
            font-weight: 600;
        }

        .info-box {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: flex;
            gap: 1rem;
            align-items: start;
        }

        .info-icon {
            color: #3b82f6;
            font-size: 1.2rem;
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: flex;
            gap: 1rem;
            align-items: start;
        }

        .warning-icon {
            color: #f59e0b;
            font-size: 1.2rem;
        }

        .visualization-container {
            background: rgba(30, 30, 40, 0.8);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="navigation-bar">
        <a href="../orion-nanomaterials-research.html" class="nav-btn">
            <i class="fas fa-arrow-left"></i> Back to ORION
        </a>
        <h2 style="color: #f59e0b; margin: 0;">Technical Documentation</h2>
        <div></div>
    </div>

    <div class="container">
        <div class="doc-layout">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-section">
                    <div class="sidebar-title">Getting Started</div>
                    <a href="#overview" class="sidebar-link active">Overview</a>
                    <a href="#architecture" class="sidebar-link">Architecture</a>
                    <a href="#installation" class="sidebar-link">Installation</a>
                </div>
                <div class="sidebar-section">
                    <div class="sidebar-title">Core Features</div>
                    <a href="#knowledge-graph" class="sidebar-link">Knowledge Graph</a>
                    <a href="#rag-system" class="sidebar-link">RAG System</a>
                    <a href="#candidate-generation" class="sidebar-link">Candidate Generation</a>
                    <a href="#physics-validation" class="sidebar-link">Physics Validation</a>
                </div>
                <div class="sidebar-section">
                    <div class="sidebar-title">API Reference</div>
                    <a href="#api-endpoints" class="sidebar-link">REST Endpoints</a>
                    <a href="#python-api" class="sidebar-link">Python API</a>
                    <a href="#websocket" class="sidebar-link">WebSocket</a>
                </div>
                <div class="sidebar-section">
                    <div class="sidebar-title">Advanced</div>
                    <a href="#performance" class="sidebar-link">Performance</a>
                    <a href="#deployment" class="sidebar-link">Deployment</a>
                    <a href="#troubleshooting" class="sidebar-link">Troubleshooting</a>
                </div>
            </div>

            <!-- Content -->
            <div class="content">
                <!-- Overview Section -->
                <section id="overview" class="section">
                    <h1 class="section-title">Overview</h1>
                    <p style="font-size: 1.1rem; line-height: 1.8; color: #d1d5db;">
                        ORION (Optimized Research & Innovation for Organized Nanomaterials) is an autonomous AI agent platform 
                        that revolutionizes materials science research by integrating cutting-edge literature mining, intelligent 
                        candidate generation, automated simulations, and experimental design.
                    </p>
                    
                    <div class="feature-grid">
                        <div class="feature-card">
                            <i class="fas fa-brain feature-icon"></i>
                            <h3 class="feature-title">AI-Driven Discovery</h3>
                            <p class="feature-description">
                                Leverages state-of-the-art LLMs and graph neural networks to propose novel material candidates 
                                based on desired properties.
                            </p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-network-wired feature-icon"></i>
                            <h3 class="feature-title">Knowledge Integration</h3>
                            <p class="feature-description">
                                Automatically ingests and processes scientific literature, patents, and experimental data into 
                                a comprehensive knowledge graph.
                            </p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-flask feature-icon"></i>
                            <h3 class="feature-title">Automated Workflows</h3>
                            <p class="feature-description">
                                Generates detailed laboratory protocols and interfaces with simulation tools for in-silico 
                                validation.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Architecture Section -->
                <section id="architecture" class="section">
                    <h2 class="section-title">Architecture</h2>
                    
                    <div class="architecture-diagram">
                        <div id="architectureDiagram" style="height: 400px;"></div>
                    </div>

                    <h3 class="subsection-title">Component Overview</h3>
                    
                    <div class="info-box">
                        <i class="fas fa-info-circle info-icon"></i>
                        <div>
                            <strong>Microservices Architecture</strong>
                            <p style="margin: 0.5rem 0 0 0;">
                                ORION uses a microservices architecture for scalability and maintainability. Each component 
                                runs independently and communicates via REST APIs and message queues.
                            </p>
                        </div>
                    </div>

                    <h4 style="color: #9ca3af; margin-top: 2rem;">Core Components:</h4>
                    <ul style="line-height: 1.8;">
                        <li><strong>Data Ingestion Service:</strong> Processes literature, patents, and experimental data</li>
                        <li><strong>Knowledge Graph Engine:</strong> Neo4j-based graph database with custom ontology</li>
                        <li><strong>RAG Service:</strong> Hybrid retrieval with cross-encoder reranking</li>
                        <li><strong>LLM Engine:</strong> Fine-tuned models for materials science</li>
                        <li><strong>Candidate Generator:</strong> Ensemble models with uncertainty quantification</li>
                        <li><strong>Simulation Orchestrator:</strong> Interfaces with DFT/MD tools</li>
                        <li><strong>Protocol Generator:</strong> Template-based synthesis protocol creation</li>
                    </ul>
                </section>

                <!-- Installation Section -->
                <section id="installation" class="section">
                    <h2 class="section-title">Installation</h2>
                    
                    <h3 class="subsection-title">Prerequisites</h3>
                    <ul>
                        <li>Python 3.9+</li>
                        <li>Neo4j 4.4+</li>
                        <li>Redis 6.0+</li>
                        <li>PostgreSQL 13+</li>
                        <li>Docker (optional)</li>
                    </ul>

                    <h3 class="subsection-title">Quick Install</h3>
                    <div class="code-block">
                        <pre><code># Clone the repository
git clone https://github.com/your-org/orion-platform.git
cd orion-platform

# Install with Poetry
poetry install

# Or with pip
pip install -e .

# Set up environment variables
cp .env.example .env
# Edit .env with your configuration

# Initialize databases
python scripts/init_db.py

# Start services
docker-compose up -d</code></pre>
                    </div>

                    <h3 class="subsection-title">Configuration</h3>
                    <div class="code-block">
                        <pre><code>app:
  name: "ORION"
  environment: "development"

database:
  neo4j:
    uri: "bolt://localhost:7687"
    user: "neo4j"
    password: "your-password"

llm:
  provider: "openai"
  model: "gpt-4-turbo-preview"
  
rag:
  embedding:
    model: "sentence-transformers/all-mpnet-base-v2"</code></pre>
                    </div>
                </section>

                <!-- Knowledge Graph Section -->
                <section id="knowledge-graph" class="section">
                    <h2 class="section-title">Knowledge Graph</h2>
                    
                    <p style="line-height: 1.8; color: #d1d5db;">
                        The knowledge graph is the central repository for all materials science knowledge in ORION. 
                        It uses Neo4j to store and query complex relationships between materials, properties, methods, 
                        and applications.
                    </p>

                    <h3 class="subsection-title">Schema Design</h3>
                    <div class="visualization-container">
                        <div id="schemaVisualization" style="height: 300px;"></div>
                    </div>

                    <h3 class="subsection-title">Node Types</h3>
                    <ul>
                        <li><strong>Material:</strong> Chemical compounds with composition and structure</li>
                        <li><strong>Property:</strong> Physical, chemical, and electronic properties</li>
                        <li><strong>Method:</strong> Synthesis and characterization techniques</li>
                        <li><strong>Application:</strong> Use cases and device applications</li>
                        <li><strong>Publication:</strong> Scientific papers and patents</li>
                    </ul>

                    <h3 class="subsection-title">Query Examples</h3>
                    <div class="code-block">
                        <pre><code># Find materials with specific bandgap
MATCH (m:Material)-[:HAS_PROPERTY]->(p:Property)
WHERE p.name = 'bandgap' AND p.value >= 1.5 AND p.value <= 2.0
RETURN m.formula, p.value
ORDER BY p.value

# Find synthesis methods for a material
MATCH (m:Material {formula: 'TiO2'})-[:SYNTHESIZED_BY]->(method:Method)
RETURN method.name, method.parameters</code></pre>
                    </div>
                </section>

                <!-- API Reference Section -->
                <section id="api-endpoints" class="section">
                    <h2 class="section-title">API Reference</h2>
                    
                    <div class="api-endpoint">
                        <div class="endpoint-header">
                            <span class="method-badge method-post">POST</span>
                            <span class="endpoint-path">/api/v1/query</span>
                        </div>
                        <p style="color: #9ca3af;">Submit a natural language query to ORION</p>
                        <table class="parameter-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>query</td>
                                    <td>string</td>
                                    <td>Natural language query</td>
                                </tr>
                                <tr>
                                    <td>max_results</td>
                                    <td>integer</td>
                                    <td>Maximum number of results (default: 10)</td>
                                </tr>
                                <tr>
                                    <td>include_sources</td>
                                    <td>boolean</td>
                                    <td>Include source citations (default: true)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="api-endpoint">
                        <div class="endpoint-header">
                            <span class="method-badge method-get">GET</span>
                            <span class="endpoint-path">/api/v1/materials/{id}</span>
                        </div>
                        <p style="color: #9ca3af;">Get detailed information about a material</p>
                    </div>

                    <div class="api-endpoint">
                        <div class="endpoint-header">
                            <span class="method-badge method-post">POST</span>
                            <span class="endpoint-path">/api/v1/predict</span>
                        </div>
                        <p style="color: #9ca3af;">Generate material candidates based on target properties</p>
                    </div>
                </section>

                <!-- Performance Section -->
                <section id="performance" class="section">
                    <h2 class="section-title">Performance Optimization</h2>
                    
                    <div class="warning-box">
                        <i class="fas fa-exclamation-triangle warning-icon"></i>
                        <div>
                            <strong>Resource Requirements</strong>
                            <p style="margin: 0.5rem 0 0 0;">
                                ORION requires significant computational resources for optimal performance. Recommended: 
                                32GB RAM, 8+ CPU cores, GPU for ML models.
                            </p>
                        </div>
                    </div>

                    <h3 class="subsection-title">Optimization Strategies</h3>
                    <ul>
                        <li><strong>Caching:</strong> Redis-based caching for frequent queries</li>
                        <li><strong>Batch Processing:</strong> Vectorized operations for ML models</li>
                        <li><strong>Async Operations:</strong> Non-blocking I/O for all services</li>
                        <li><strong>Index Optimization:</strong> Custom Neo4j indexes for common queries</li>
                        <li><strong>Resource Monitoring:</strong> Automatic bottleneck detection</li>
                    </ul>

                    <div class="visualization-container">
                        <h4 style="color: #9ca3af;">Performance Metrics</h4>
                        <div id="performanceMetrics" style="height: 300px;"></div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script>
        // Create architecture diagram
        function createArchitectureDiagram() {
            const components = [
                {name: 'Web UI', x: 500, y: 50},
                {name: 'API Gateway', x: 500, y: 150},
                {name: 'Auth Service', x: 200, y: 250},
                {name: 'Query Service', x: 350, y: 250},
                {name: 'LLM Engine', x: 500, y: 250},
                {name: 'Prediction Service', x: 650, y: 250},
                {name: 'Simulation Service', x: 800, y: 250},
                {name: 'Knowledge Graph', x: 350, y: 350},
                {name: 'Vector DB', x: 500, y: 350},
                {name: 'PostgreSQL', x: 650, y: 350},
                {name: 'Redis Cache', x: 200, y: 350},
                {name: 'Message Queue', x: 500, y: 450}
            ];

            const connections = [
                [0, 1], [1, 2], [1, 3], [1, 4], [1, 5], [1, 6],
                [3, 7], [3, 10], [4, 8], [4, 7], [5, 8], [5, 9],
                [6, 11], [2, 10], [11, 7], [11, 8], [11, 9]
            ];

            const nodes = {
                x: components.map(c => c.x),
                y: components.map(c => c.y),
                text: components.map(c => c.name),
                mode: 'markers+text',
                type: 'scatter',
                textposition: 'top center',
                marker: {
                    size: 30,
                    color: components.map(c => {
                        if (c.name.includes('Service') || c.name.includes('Engine')) return '#667eea';
                        if (c.name.includes('DB') || c.name.includes('Graph') || c.name.includes('SQL')) return '#10b981';
                        if (c.name.includes('UI') || c.name.includes('Gateway')) return '#f59e0b';
                        return '#ef4444';
                    }),
                    line: {color: '#ffffff', width: 2}
                },
                textfont: {size: 12, color: '#e5e7eb'}
            };

            const edges = {
                x: [],
                y: [],
                mode: 'lines',
                type: 'scatter',
                line: {width: 1, color: '#667eea'},
                hoverinfo: 'none'
            };

            connections.forEach(([i, j]) => {
                edges.x.push(components[i].x, components[j].x, null);
                edges.y.push(components[i].y, components[j].y, null);
            });

            const layout = {
                showlegend: false,
                hovermode: 'closest',
                xaxis: {showgrid: false, zeroline: false, showticklabels: false},
                yaxis: {showgrid: false, zeroline: false, showticklabels: false},
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                margin: {l: 0, r: 0, t: 0, b: 0}
            };

            Plotly.newPlot('architectureDiagram', [edges, nodes], layout, {responsive: true});
        }

        // Create schema visualization
        function createSchemaVisualization() {
            const data = [{
                type: 'sankey',
                orientation: 'h',
                node: {
                    pad: 15,
                    thickness: 20,
                    line: {color: 'black', width: 0.5},
                    label: ['Material', 'Property', 'Method', 'Application', 'Publication'],
                    color: ['#667eea', '#10b981', '#f59e0b', '#ef4444', '#3b82f6']
                },
                link: {
                    source: [0, 0, 0, 0, 1, 2, 3],
                    target: [1, 2, 3, 4, 4, 4, 4],
                    value: [8, 4, 2, 3, 5, 3, 2]
                }
            }];

            const layout = {
                font: {size: 12, color: '#e5e7eb'},
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('schemaVisualization', data, layout, {responsive: true});
        }

        // Create performance metrics
        function createPerformanceMetrics() {
            const metrics = ['Query Latency', 'Throughput', 'Cache Hit Rate', 'GPU Utilization', 'Memory Usage'];
            const values = [89, 1247, 92, 65, 78];
            const targets = [100, 1500, 95, 80, 85];

            const trace1 = {
                x: metrics,
                y: values,
                name: 'Current',
                type: 'bar',
                marker: {color: '#667eea'}
            };

            const trace2 = {
                x: metrics,
                y: targets,
                name: 'Target',
                type: 'scatter',
                mode: 'lines+markers',
                line: {color: '#f59e0b', width: 2},
                marker: {size: 8}
            };

            const layout = {
                xaxis: {tickfont: {color: '#9ca3af'}},
                yaxis: {
                    title: 'Performance Score',
                    titlefont: {color: '#9ca3af'},
                    tickfont: {color: '#9ca3af'},
                    gridcolor: '#374151'
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.1)',
                legend: {
                    font: {color: '#e5e7eb'},
                    bgcolor: 'rgba(0,0,0,0.5)'
                }
            };

            Plotly.newPlot('performanceMetrics', [trace1, trace2], layout, {responsive: true});
        }

        // Sidebar navigation
        document.querySelectorAll('.sidebar-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Update active state
                document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                // Smooth scroll
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                targetElement.scrollIntoView({behavior: 'smooth'});
            });
        });

        // Initialize visualizations
        window.addEventListener('load', () => {
            createArchitectureDiagram();
            createSchemaVisualization();
            createPerformanceMetrics();
        });
    </script>
</body>
</html>

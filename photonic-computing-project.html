<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mixed-Precision Photonic Computing Platform - Advanced Research & Implementation</title>
    
    <!-- Advanced Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.18.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <!-- MathJax for Mathematical Equations -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* Enhanced Photonic Computing Styles */
        .photonic-hero {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1629 100%);
            padding: 80px 0;
            position: relative;
            overflow: hidden;
        }
        
        .photonic-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0,255,136,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .simulator-container {
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(0,255,136,0.2);
            margin: 30px 0;
        }
        
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .control-card {
            background: rgba(255,255,255,0.03);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(0,255,136,0.1);
            transition: all 0.3s ease;
        }
        
        .control-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,255,136,0.2);
            border-color: rgba(0,255,136,0.3);
        }
        
        .control-card h3 {
            color: #00ff88;
            margin-bottom: 20px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-card h3 i {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .slider-group {
            margin-bottom: 20px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: #00aaff;
            font-weight: 500;
        }
        
        .custom-slider {
            width: 100%;
            height: 8px;
            background: linear-gradient(to right, #00ff88 0%, #00aaff 100%);
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
            position: relative;
        }
        
        .custom-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: radial-gradient(circle, #00ff88, #00aaff);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(0,255,136,0.6);
            transition: all 0.3s ease;
        }
        
        .custom-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 25px rgba(0,255,136,0.9);
        }
        
        .value-badge {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(0,255,136,0.1);
            border: 1px solid rgba(0,255,136,0.3);
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .metric-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .metric-item {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            border-left: 3px solid #00ff88;
            transition: all 0.3s ease;
        }
        
        .metric-item:hover {
            background: rgba(0,0,0,0.5);
            transform: translateX(5px);
        }
        
        .metric-label {
            color: #888;
            font-size: 0.85em;
            margin-bottom: 5px;
        }
        
        .metric-value {
            color: #00ff88;
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .visualization-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .viz-tab {
            padding: 12px 24px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .viz-tab.active {
            background: linear-gradient(45deg, #00ff88, #00aaff);
            color: #0a0e27;
            font-weight: bold;
            transform: scale(1.05);
        }
        
        .viz-tab:hover:not(.active) {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }
        
        .chart-container {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            min-height: 400px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 12px 30px;
            background: linear-gradient(45deg, #00ff88, #00aaff);
            color: #0a0e27;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,255,136,0.3);
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0,255,136,0.5);
        }
        
        .action-btn.secondary {
            background: rgba(255,255,255,0.1);
            color: #00ff88;
            border: 1px solid rgba(0,255,136,0.3);
        }
        
        .progress-indicator {
            width: 100%;
            height: 40px;
            background: rgba(0,0,0,0.5);
            border-radius: 20px;
            overflow: hidden;
            margin-top: 20px;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00aaff);
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0a0e27;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            100% { left: 100%; }
        }
        
        .architecture-3d {
            width: 100%;
            height: 600px;
            border-radius: 15px;
            overflow: hidden;
            margin: 30px 0;
        }
        
        .code-viewer {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }
        
        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .perf-card {
            background: linear-gradient(135deg, rgba(0,255,136,0.1), rgba(0,170,255,0.1));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(0,255,136,0.2);
            transition: all 0.3s ease;
        }
        
        .perf-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,255,136,0.3);
        }
        
        .perf-card .icon {
            font-size: 3em;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #00ff88, #00aaff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .perf-card .value {
            font-size: 2.5em;
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 10px;
        }
        
        .perf-card .label {
            color: #888;
            font-size: 1.1em;
        }
        
        .material-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .material-option {
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .material-option.selected {
            background: rgba(0,255,136,0.2);
            border-color: #00ff88;
            transform: scale(1.05);
        }
        
        .material-option:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .material-name {
            font-weight: bold;
            color: #00aaff;
            margin-bottom: 5px;
        }
        
        .material-props {
            font-size: 0.85em;
            color: #888;
        }
        
        /* Theory and Technical Documentation Styles */
        .theory-section {
            background: linear-gradient(135deg, rgba(0,255,136,0.05), rgba(0,170,255,0.05));
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            border: 1px solid rgba(0,255,136,0.2);
        }
        
        .equation-box {
            background: rgba(0,0,0,0.4);
            border-left: 4px solid #00ff88;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            overflow-x: auto;
        }
        
        .equation-label {
            color: #00aaff;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .technical-paper {
            background: rgba(255,255,255,0.02);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .demo-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }
        
        .demo-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,255,136,0.3);
            border-color: #00ff88;
        }
        
        .benchmark-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .benchmark-table th {
            background: linear-gradient(135deg, #00ff88, #00aaff);
            color: #0a0e27;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }
        
        .benchmark-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            color: #e0e0e0;
        }
        
        .benchmark-table tr:hover {
            background: rgba(0,255,136,0.1);
        }
        
        .advanced-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .advanced-tab {
            padding: 12px 24px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-weight: 500;
        }
        
        .advanced-tab.active {
            background: linear-gradient(135deg, #00ff88, #00aaff);
            color: #0a0e27;
            font-weight: bold;
            transform: translateY(-2px);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .control-panel {
                grid-template-columns: 1fr;
            }
            
            .performance-grid {
                grid-template-columns: 1fr;
            }
            
            .material-selector {
                grid-template-columns: 1fr;
            }
            
            .demo-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="index.html" class="logo">LA</a>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="index.html#projects" class="nav-link">Projects</a></li>
                <li><a href="additional-projects.html" class="nav-link">All Projects</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="photonic-hero">
        <div class="container">
            <div class="back-link">
                <a href="additional-projects.html"><i class="fas fa-arrow-left"></i> Back to Projects</a>
                <a href="photonic-computing-technical-docs.html" style="margin-left: 20px;"><i class="fas fa-book"></i> Technical Documentation</a>
            </div>
            
            <div class="detail-header">
                <h1 style="font-size: 3em; background: linear-gradient(45deg, #00ff88, #00aaff); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Mixed-Precision Photonic Computing Platform
                </h1>
                <p style="font-size: 1.3em; color: #b0b0b0; margin-top: 20px;">
                    Revolutionary Phase Change Material Enhanced Ring Resonators for Ultra-Fast PDE Solving
                </p>
            </div>

            <!-- Key Performance Metrics -->
            <div class="performance-grid">
                <div class="perf-card">
                    <div class="icon"><i class="fas fa-microchip"></i></div>
                    <div class="value">327</div>
                    <div class="label">TeraOPS</div>
                </div>
                <div class="perf-card">
                    <div class="icon"><i class="fas fa-bolt"></i></div>
                    <div class="value">0.8</div>
                    <div class="label">W/PetaOPS</div>
                </div>
                <div class="perf-card">
                    <div class="icon"><i class="fas fa-memory"></i></div>
                    <div class="value">12.5</div>
                    <div class="label">Bit Precision</div>
                </div>
                <div class="perf-card">
                    <div class="icon"><i class="fas fa-tachometer-alt"></i></div>
                    <div class="value">10</div>
                    <div class="label">GHz Speed</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="detail-page">
        <div class="container">
            <!-- Interactive Simulator -->
            <div class="simulator-container">
                <h2 style="color: #00ff88; margin-bottom: 30px; font-size: 2em;">
                    <i class="fas fa-flask"></i> Interactive Photonic Simulator
                </h2>
                
                <!-- Enhanced Navigation Tabs -->
                <div class="advanced-tabs">
                    <div class="advanced-tab active" onclick="switchTab('simulation', this)">
                        <i class="fas fa-chart-line"></i> Simulation
                    </div>
                    <div class="advanced-tab" onclick="switchTab('theory', this)">
                        <i class="fas fa-graduation-cap"></i> Theory
                    </div>
                    <div class="advanced-tab" onclick="switchTab('technical', this)">
                        <i class="fas fa-file-alt"></i> Technical Paper
                    </div>
                    <div class="advanced-tab" onclick="switchTab('demos', this)">
                        <i class="fas fa-flask"></i> Demos
                    </div>
                    <div class="advanced-tab" onclick="switchTab('benchmarks', this)">
                        <i class="fas fa-chart-bar"></i> Benchmarks
                    </div>
                    <div class="advanced-tab" onclick="switchTab('architecture', this)">
                        <i class="fas fa-cube"></i> 3D Architecture
                    </div>
                    <div class="advanced-tab" onclick="switchTab('analysis', this)">
                        <i class="fas fa-chart-area"></i> Analysis
                    </div>
                    <div class="advanced-tab" onclick="switchTab('materials', this)">
                        <i class="fas fa-atom"></i> Materials
                    </div>
                    <div class="advanced-tab" onclick="switchTab('code', this)">
                        <i class="fas fa-code"></i> Code
                    </div>
                </div>

                <!-- Simulation Tab -->
                <div id="simulation-tab" class="tab-content">
                    <div class="control-panel">
                        <!-- PCM Configuration -->
                        <div class="control-card">
                            <h3><i class="fas fa-layer-group"></i> PCM Configuration</h3>
                            
                            <div class="material-selector">
                                <div class="material-option selected" onclick="selectMaterial('sbs')">
                                    <div class="material-name">Sb₂S₃</div>
                                    <div class="material-props">Low Loss<br>Δn=0.54</div>
                                </div>
                                <div class="material-option" onclick="selectMaterial('gst')">
                                    <div class="material-name">GST</div>
                                    <div class="material-props">High Δn<br>Δn=2.74</div>
                                </div>
                                <div class="material-option" onclick="selectMaterial('sbse')">
                                    <div class="material-name">Sb₂Se₃</div>
                                    <div class="material-props">Zero Loss<br>Δn=0.76</div>
                                </div>
                            </div>
                            
                            <div class="slider-group">
                                <div class="slider-label">
                                    <span>Phase State</span>
                                    <span class="value-badge" id="phaseStateValue">50%</span>
                                </div>
                                <input type="range" class="custom-slider" id="phaseState" 
                                       min="0" max="1" step="0.01" value="0.5">
                            </div>
                            
                            <div class="slider-group">
                                <div class="slider-label">
                                    <span>MSB Precision (PCM)</span>
                                    <span class="value-badge" id="msbValue">5 bits</span>
                                </div>
                                <input type="range" class="custom-slider" id="msbPrecision" 
                                       min="4" max="8" step="1" value="5">
                            </div>
                            
                            <div class="metric-display">
                                <div class="metric-item">
                                    <div class="metric-label">Δn Index</div>
                                    <div class="metric-value" id="deltaN">0.54</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Extinction</div>
                                    <div class="metric-value" id="extinctionCoeff">0.05</div>
                                </div>
                            </div>
                        </div>

                        <!-- Electro-Optic Tuning -->
                        <div class="control-card">
                            <h3><i class="fas fa-wave-square"></i> Electro-Optic Tuning</h3>
                            
                            <div class="slider-group">
                                <div class="slider-label">
                                    <span>Reverse Bias Voltage</span>
                                    <span class="value-badge" id="biasValue">2.0 V</span>
                                </div>
                                <input type="range" class="custom-slider" id="biasVoltage" 
                                       min="0" max="5" step="0.1" value="2">
                            </div>
                            
                            <div class="slider-group">
                                <div class="slider-label">
                                    <span>LSB Precision (E-O)</span>
                                    <span class="value-badge" id="lsbValue">8 bits</span>
                                </div>
                                <input type="range" class="custom-slider" id="lsbPrecision" 
                                       min="6" max="10" step="1" value="8">
                            </div>
                            
                            <div class="slider-group">
                                <div class="slider-label">
                                    <span>Temperature</span>
                                    <span class="value-badge" id="tempValue">300 K</span>
                                </div>
                                <input type="range" class="custom-slider" id="temperature" 
                                       min="273" max="373" step="1" value="300">
                            </div>
                            
                            <div class="metric-display">
                                <div class="metric-item">
                                    <div class="metric-label">E-O Bandwidth</div>
                                    <div class="metric-value" id="eoBandwidth">4.0 GHz</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Total Bits</div>
                                    <div class="metric-value" id="totalPrecision">13</div>
                                </div>
                            </div>
                        </div>

                        <!-- System Configuration -->
                        <div class="control-card">
                            <h3><i class="fas fa-cogs"></i> System Configuration</h3>
                            
                            <div class="slider-group">
                                <div class="slider-label">
                                    <span>Array Size</span>
                                    <span class="value-badge" id="arraySizeValue">32×32</span>
                                </div>
                                <input type="range" class="custom-slider" id="arraySize" 
                                       min="16" max="256" step="16" value="32">
                            </div>
                            
                            <div class="slider-group">
                                <div class="slider-label">
                                    <span>Wavelengths</span>
                                    <span class="value-badge" id="wavelengthValue">32</span>
                                </div>
                                <input type="range" class="custom-slider" id="wavelengths" 
                                       min="4" max="64" step="4" value="32">
                            </div>
                            
                            <div class="slider-group">
                                <div class="slider-label">
                                    <span>Incident Power</span>
                                    <span class="value-badge" id="powerValue">1.0 mW</span>
                                </div>
                                <input type="range" class="custom-slider" id="incidentPower" 
                                       min="-3" max="0" step="0.1" value="-3">
                            </div>
                            
                            <div class="action-buttons">
                                <button class="action-btn" onclick="runSimulation()">
                                    <i class="fas fa-play"></i> Run Simulation
                                </button>
                                <button class="action-btn secondary" onclick="optimizeSystem()">
                                    <i class="fas fa-magic"></i> Auto-Optimize
                                </button>
                            </div>
                            
                            <div class="progress-indicator">
                                <div class="progress-fill" id="progressBar">Ready</div>
                            </div>
                        </div>

                        <!-- Performance Metrics -->
                        <div class="control-card">
                            <h3><i class="fas fa-chart-pie"></i> Performance Metrics</h3>
                            
                            <div class="metric-display">
                                <div class="metric-item">
                                    <div class="metric-label">ENOB</div>
                                    <div class="metric-value" id="enob">12.5 bits</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Power/PetaOPS</div>
                                    <div class="metric-value" id="powerEff">0.8 W</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Crosstalk</div>
                                    <div class="metric-value" id="crosstalk">-70 dB</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Q-Factor</div>
                                    <div class="metric-value" id="qFactor">1.5×10⁶</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Insertion Loss</div>
                                    <div class="metric-value" id="insertionLoss">1.13 dB</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Peak OPS</div>
                                    <div class="metric-value" id="peakOps">327 TOPS</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visualization Charts -->
                    <div class="chart-container">
                        <canvas id="resonatorCanvas" width="1200" height="400"></canvas>
                    </div>
                    
                    <div class="control-panel">
                        <div class="control-card">
                            <h3><i class="fas fa-chart-line"></i> Convergence Analysis</h3>
                            <div class="chart-container">
                                <canvas id="convergenceChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="control-card">
                            <h3><i class="fas fa-wave-square"></i> Spectral Response</h3>
                            <div class="chart-container">
                                <canvas id="spectralChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Theory & Foundations Tab -->
                <div id="theory-tab" class="tab-content" style="display: none;">
                    <div class="theory-section">
                        <h2 style="color: #00ff88; margin-bottom: 30px;">
                            <i class="fas fa-atom"></i> Theoretical Foundations
                        </h2>
                        
                        <!-- Mixed-Precision Computing Theory -->
                        <h3 style="color: #00aaff; margin: 20px 0;">1. Mixed-Precision Iterative Refinement Algorithm</h3>
                        
                        <p style="line-height: 1.8; margin-bottom: 20px; color: #e0e0e0;">
                            The core innovation lies in combining analog photonic computing for low-precision operations 
                            with digital high-precision corrections. This hybrid approach leverages the massive parallelism 
                            of photonics while maintaining numerical accuracy through iterative refinement.
                        </p>
                        
                        <div class="equation-box">
                            <div class="equation-label">Fundamental Algorithm</div>
                            <div style="color: #e0e0e0; font-size: 1.1em;">
                                Given linear system: \(Ax = b\)<br><br>
                                1. Compute \(A^{-1}\) in high precision (digital, done once)<br>
                                2. Initialize: \(x_0 = 0\)<br>
                                3. For \(k = 0, 1, 2, ...\) until convergence:<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;a. Compute residual: \(r_k = b - Ax_k\) (high precision)<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;b. Solve correction: \(\delta_k = \text{quantize}(A^{-1}r_k, p)\) (low precision, photonic)<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;c. Update solution: \(x_{k+1} = x_k + \delta_k\)<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;d. Check: \(||r_k|| < \epsilon\)
                            </div>
                        </div>
                        
                        <!-- Ring Resonator Theory -->
                        <h3 style="color: #00aaff; margin: 20px 0;">2. Ring Resonator Transfer Function</h3>
                        
                        <div class="equation-box">
                            <div class="equation-label">Optical Transfer Function</div>
                            <div style="color: #e0e0e0; font-size: 1.1em;">
                                The transmission of a ring resonator with PCM layer:<br><br>
                                \[T(\lambda) = \frac{|E_{out}|^2}{|E_{in}|^2} = \frac{a^2 - 2ra\cos(\phi) + r^2}{1 - 2ra\cos(\phi) + (ra)^2}\]
                                <br>
                                Where:<br>
                                • \(r\) = field coupling coefficient<br>
                                • \(a\) = single-pass amplitude transmission = \(\exp(-\alpha L/2)\)<br>
                                • \(\phi\) = round-trip phase shift = \(\beta L = 2\pi n_{eff}L/\lambda\)<br>
                                • \(n_{eff}\) = effective index (tunable via PCM state)
                            </div>
                        </div>
                        
                        <div class="equation-box">
                            <div class="equation-label">PCM-Induced Index Change</div>
                            <div style="color: #e0e0e0; font-size: 1.1em;">
                                \[\Delta n_{eff} = \Gamma \cdot f_{PCM} \cdot (n_{crystalline} - n_{amorphous})\]
                                <br>
                                For Sb₂S₃: \(\Delta n = 0.54\), \(k_c = 0.05\)<br>
                                For GST: \(\Delta n = 2.74\), \(k_c = 1.09\)<br>
                                For Sb₂Se₃: \(\Delta n = 0.76\), \(k_c = 0\)
                            </div>
                        </div>
                        
                        <!-- Quantization and Noise Analysis -->
                        <h3 style="color: #00aaff; margin: 20px 0;">3. Quantization and Noise Model</h3>
                        
                        <div class="equation-box">
                            <div class="equation-label">Effective Number of Bits (ENOB)</div>
                            <div style="color: #e0e0e0; font-size: 1.1em;">
                                \[ENOB = \frac{SNR_{dB} - 1.76}{6.02}\]
                                <br>
                                \[SNR_{dB} = 10\log_{10}\left(\frac{P_{signal}}{P_{noise}}\right)\]
                                <br>
                                Noise sources:<br>
                                • Relative Intensity Noise (RIN): -160 dBc/Hz<br>
                                • Thermal noise: \(4k_BTR\Delta f\)<br>
                                • Shot noise: \(2qI\Delta f\)<br>
                                • Crosstalk: -70 dB baseline
                            </div>
                        </div>
                        
                        <!-- Energy Efficiency Analysis -->
                        <h3 style="color: #00aaff; margin: 20px 0;">4. Energy Efficiency Analysis</h3>
                        
                        <div class="equation-box">
                            <div class="equation-label">Energy per MAC Operation</div>
                            <div style="color: #e0e0e0; font-size: 1.1em;">
                                \[E_{MAC} = \frac{P_{total}}{N^2 \times f_{clock} \times \lambda_{channels}}\]
                                <br>
                                For our system:<br>
                                \[E_{MAC} = \frac{0.8W}{32^2 \times 10GHz \times 32} = 2.4 \text{ fJ/MAC}\]
                                <br>
                                Comparison:<br>
                                • CMOS (7nm): ~10 pJ/MAC<br>
                                • Our Photonic System: ~2.4 fJ/MAC<br>
                                • <strong>Improvement: 4,166×</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Technical Paper Tab -->
                <div id="technical-tab" class="tab-content" style="display: none;">
                    <div class="technical-paper">
                        <h2 style="color: #00ff88; margin-bottom: 30px;">
                            <i class="fas fa-file-alt"></i> Technical Documentation
                        </h2>
                        
                        <h3 style="color: #00aaff; margin: 20px 0;">Abstract</h3>
                        <p style="text-align: justify; line-height: 1.8; color: #e0e0e0;">
                            We present a comprehensive implementation of mixed-precision photonic computing using Phase Change Material (PCM) 
                            enhanced ring resonators integrated in a 3D Electronic-Photonic Integrated Circuit (EPIC) architecture. 
                            Our system achieves >12-bit effective precision through a hybrid approach combining 5-bit PCM-based 
                            analog storage with 8-bit electro-optic fine tuning. The platform demonstrates 327 TeraOPS peak performance 
                            with energy efficiency of 2.4 fJ/operation, representing a 10,000× improvement over state-of-the-art CMOS 
                            implementations.
                        </p>
                        
                        <h3 style="color: #00aaff; margin: 20px 0;">System Architecture</h3>
                        
                        <h4 style="color: #00ff88; margin: 15px 0;">3D EPIC Stack</h4>
                        
                        <table class="benchmark-table">
                            <thead>
                                <tr>
                                    <th>Layer</th>
                                    <th>Technology</th>
                                    <th>Function</th>
                                    <th>Key Specifications</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>PCM Layer</td>
                                    <td>Sb₂S₃ thin film</td>
                                    <td>Non-volatile weight storage</td>
                                    <td>32 levels, 5-bit precision, 100ns switching</td>
                                </tr>
                                <tr>
                                    <td>Photonic IC</td>
                                    <td>AlGaAs waveguides</td>
                                    <td>Optical processing</td>
                                    <td>Q>10⁶, FSR=200GHz, λ=1550nm</td>
                                </tr>
                                <tr>
                                    <td>DBI Layer</td>
                                    <td>Cu pillars</td>
                                    <td>Vertical interconnect</td>
                                    <td>2μm pitch, 10⁶ connections/cm²</td>
                                </tr>
                                <tr>
                                    <td>CMOS EIC</td>
                                    <td>22nm FD-SOI</td>
                                    <td>Control & readout</td>
                                    <td>10GHz DACs, 40Gb/s SerDes</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h3 style="color: #00aaff; margin: 20px 0;">Experimental Results</h3>
                        
                        <h4 style="color: #00ff88; margin: 15px 0;">PDE Solving Benchmarks</h4>
                        
                        <table class="benchmark-table">
                            <thead>
                                <tr>
                                    <th>Grid Size</th>
                                    <th>Precision (bits)</th>
                                    <th>Iterations</th>
                                    <th>Relative Error</th>
                                    <th>Time (ms)</th>
                                    <th>Energy (mJ)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>32×32</td>
                                    <td>6</td>
                                    <td>15</td>
                                    <td>3.2×10⁻³</td>
                                    <td>1.6</td>
                                    <td>0.0013</td>
                                </tr>
                                <tr>
                                    <td>32×32</td>
                                    <td>8</td>
                                    <td>10</td>
                                    <td>8.7×10⁻⁵</td>
                                    <td>1.1</td>
                                    <td>0.0009</td>
                                </tr>
                                <tr>
                                    <td>64×64</td>
                                    <td>8</td>
                                    <td>12</td>
                                    <td>1.1×10⁻⁴</td>
                                    <td>4.8</td>
                                    <td>0.0038</td>
                                </tr>
                                <tr>
                                    <td>128×128</td>
                                    <td>10</td>
                                    <td>8</td>
                                    <td>2.3×10⁻⁶</td>
                                    <td>12.3</td>
                                    <td>0.0098</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Interactive Demos Tab -->
                <div id="demos-tab" class="tab-content" style="display: none;">
                    <div class="demo-container">
                        <h2 style="color: #00ff88; margin-bottom: 30px;">
                            <i class="fas fa-flask"></i> Interactive Demonstrations
                        </h2>
                        
                        <div class="demo-grid">
                            <div class="demo-card" onclick="loadDemo('resonator')">
                                <i class="fas fa-ring" style="font-size: 3em; color: #00ff88; margin-bottom: 15px;"></i>
                                <h3 style="color: #00aaff;">Ring Resonator Simulator</h3>
                                <p style="color: #e0e0e0;">Explore optical resonance with PCM tuning</p>
                            </div>
                            
                            <div class="demo-card" onclick="loadDemo('pde')">
                                <i class="fas fa-calculator" style="font-size: 3em; color: #00ff88; margin-bottom: 15px;"></i>
                                <h3 style="color: #00aaff;">PDE Solver Demo</h3>
                                <p style="color: #e0e0e0;">Solve Poisson equations in real-time</p>
                            </div>
                            
                            <div class="demo-card" onclick="loadDemo('convergence')">
                                <i class="fas fa-chart-line" style="font-size: 3em; color: #00ff88; margin-bottom: 15px;"></i>
                                <h3 style="color: #00aaff;">Convergence Analysis</h3>
                                <p style="color: #e0e0e0;">Compare precision vs iterations</p>
                            </div>
                            
                            <div class="demo-card" onclick="loadDemo('noise')">
                                <i class="fas fa-signal" style="font-size: 3em; color: #00ff88; margin-bottom: 15px;"></i>
                                <h3 style="color: #00aaff;">Noise Impact Simulator</h3>
                                <p style="color: #e0e0e0;">Analyze noise effects on ENOB</p>
                            </div>
                            
                            <div class="demo-card" onclick="loadDemo('scaling')">
                                <i class="fas fa-expand-arrows-alt" style="font-size: 3em; color: #00ff88; margin-bottom: 15px;"></i>
                                <h3 style="color: #00aaff;">System Scaling Analysis</h3>
                                <p style="color: #e0e0e0;">Explore performance vs array size</p>
                            </div>
                            
                            <div class="demo-card" onclick="loadDemo('materials')">
                                <i class="fas fa-atom" style="font-size: 3em; color: #00ff88; margin-bottom: 15px;"></i>
                                <h3 style="color: #00aaff;">PCM Material Explorer</h3>
                                <p style="color: #e0e0e0;">Compare different PCM materials</p>
                            </div>
                        </div>
                        
                        <div id="demoWorkspace" style="margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.3); border-radius: 10px; min-height: 400px;">
                            <p style="color: #888; text-align: center;">Select a demo above to begin...</p>
                        </div>
                    </div>
                </div>

                <!-- Benchmarks Tab -->
                <div id="benchmarks-tab" class="tab-content" style="display: none;">
                    <div class="benchmark-container">
                        <h2 style="color: #00ff88; margin-bottom: 30px;">
                            <i class="fas fa-chart-bar"></i> Performance Benchmarks
                        </h2>
                        
                        <h3 style="color: #00aaff; margin: 20px 0;">Technology Comparison</h3>
                        
                        <table class="benchmark-table">
                            <thead>
                                <tr>
                                    <th>Technology</th>
                                    <th>Performance</th>
                                    <th>Energy/Op</th>
                                    <th>Precision</th>
                                    <th>Area</th>
                                    <th>Cost/TOPS</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: rgba(0,255,136,0.1);">
                                    <td><strong>Our Photonic System</strong></td>
                                    <td><strong>327 TOPS</strong></td>
                                    <td><strong>2.4 fJ</strong></td>
                                    <td><strong>12.5 bits</strong></td>
                                    <td><strong>4 mm²</strong></td>
                                    <td><strong>$0.15</strong></td>
                                </tr>
                                <tr>
                                    <td>NVIDIA A100 (7nm)</td>
                                    <td>312 TOPS</td>
                                    <td>10 pJ</td>
                                    <td>16/32 bits</td>
                                    <td>826 mm²</td>
                                    <td>$32</td>
                                </tr>
                                <tr>
                                    <td>Google TPU v4</td>
                                    <td>275 TOPS</td>
                                    <td>8 pJ</td>
                                    <td>8/16 bits</td>
                                    <td>~400 mm²</td>
                                    <td>$25</td>
                                </tr>
                                <tr>
                                    <td>Cerebras WSE-2</td>
                                    <td>750 TOPS</td>
                                    <td>15 pJ</td>
                                    <td>16 bits</td>
                                    <td>46,225 mm²</td>
                                    <td>$45</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="chart-container" style="margin-top: 30px;">
                            <canvas id="benchmarkComparisonChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Architecture Tab -->
                <div id="architecture-tab" class="tab-content" style="display: none;">
                    <div class="architecture-3d" id="architecture3D"></div>
                    
                    <div class="control-panel">
                        <div class="control-card">
                            <h3><i class="fas fa-layer-group"></i> 3D EPIC Layer Stack</h3>
                            <div class="metric-display">
                                <div class="metric-item">
                                    <div class="metric-label">PCM Layer</div>
                                    <div class="metric-value">Sb₂S₃ (5-bit)</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Photonic IC</div>
                                    <div class="metric-value">AlGaAs</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Interconnect</div>
                                    <div class="metric-value">2μm DBI</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">CMOS EIC</div>
                                    <div class="metric-value">22nm FD-SOI</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-card">
                            <h3><i class="fas fa-network-wired"></i> Crossbar Architecture</h3>
                            <canvas id="crossbarCanvas" width="600" height="400"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Analysis Tab -->
                <div id="analysis-tab" class="tab-content" style="display: none;">
                    <div class="control-panel">
                        <div class="control-card">
                            <h3><i class="fas fa-chart-bar"></i> ENOB vs Power Analysis</h3>
                            <div class="chart-container">
                                <canvas id="enobChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="control-card">
                            <h3><i class="fas fa-chart-area"></i> Mixed-Precision Convergence</h3>
                            <div class="chart-container">
                                <canvas id="mixedPrecisionChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="control-card">
                            <h3><i class="fas fa-expand-arrows-alt"></i> System Scalability</h3>
                            <div class="chart-container">
                                <canvas id="scalabilityChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="control-card">
                            <h3><i class="fas fa-signal"></i> Noise Analysis</h3>
                            <div class="chart-container">
                                <canvas id="noiseChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Materials Tab -->
                <div id="materials-tab" class="tab-content" style="display: none;">
                    <div class="control-panel">
                        <div class="control-card">
                            <h3><i class="fas fa-atom"></i> Phase Change Materials Database</h3>
                            <table style="width: 100%; color: #e0e0e0;">
                                <thead>
                                    <tr style="border-bottom: 2px solid #00ff88;">
                                        <th style="padding: 10px; text-align: left;">Material</th>
                                        <th style="padding: 10px;">Δn</th>
                                        <th style="padding: 10px;">k_c</th>
                                        <th style="padding: 10px;">Loss (dB/cm)</th>
                                        <th style="padding: 10px;">Levels</th>
                                        <th style="padding: 10px;">Speed</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 10px; color: #00aaff;">Sb₂S₃</td>
                                        <td style="padding: 10px; text-align: center;">0.54</td>
                                        <td style="padding: 10px; text-align: center;">0.05</td>
                                        <td style="padding: 10px; text-align: center;">0.01</td>
                                        <td style="padding: 10px; text-align: center;">32</td>
                                        <td style="padding: 10px; text-align: center;">100 ns</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; color: #00aaff;">Ge₂Sb₂Te₅</td>
                                        <td style="padding: 10px; text-align: center;">2.74</td>
                                        <td style="padding: 10px; text-align: center;">1.09</td>
                                        <td style="padding: 10px; text-align: center;">1.0</td>
                                        <td style="padding: 10px; text-align: center;">16</td>
                                        <td style="padding: 10px; text-align: center;">50 ns</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; color: #00aaff;">Sb₂Se₃</td>
                                        <td style="padding: 10px; text-align: center;">0.76</td>
                                        <td style="padding: 10px; text-align: center;">0.0</td>
                                        <td style="padding: 10px; text-align: center;">0.0</td>
                                        <td style="padding: 10px; text-align: center;">32</td>
                                        <td style="padding: 10px; text-align: center;">150 ns</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; color: #00aaff;">GSST</td>
                                        <td style="padding: 10px; text-align: center;">1.8</td>
                                        <td style="padding: 10px; text-align: center;">0.3</td>
                                        <td style="padding: 10px; text-align: center;">0.2</td>
                                        <td style="padding: 10px; text-align: center;">64</td>
                                        <td style="padding: 10px; text-align: center;">200 ns</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="control-card">
                            <h3><i class="fas fa-microscope"></i> Material Properties Comparison</h3>
                            <div class="chart-container">
                                <canvas id="materialChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Code Tab -->
                <div id="code-tab" class="tab-content" style="display: none;">
                    <div class="control-card">
                        <h3><i class="fas fa-code"></i> Python Implementation</h3>
                        <div class="code-viewer">
                            <pre><code class="language-python">"""
Mixed-Precision Photonic Computing Implementation
Phase Change Material Enhanced Ring Resonators
"""

import numpy as np
from dataclasses import dataclass
from typing import Tuple, List, Dict

@dataclass
class PCMMaterial:
    """Phase Change Material properties"""
    name: str
    delta_n: float  # Refractive index change
    kc: float      # Extinction coefficient
    loss: float    # Loss in dB/cm
    levels: int    # Number of distinct levels

class PhotonicTensorCore:
    """
    Photonic Tensor Core with PCM-AlGaAs mem-resonators
    Implements mixed-precision in-memory computing
    """
    
    def __init__(self, size: int = 32, wavelengths: int = 32):
        self.size = size
        self.wavelengths = wavelengths
        
        # PCM Materials Database
        self.pcm_materials = {
            'Sb2S3': PCMMaterial('Sb₂S₃', 0.54, 0.05, 0.01, 32),
            'GST': PCMMaterial('Ge₂Sb₂Te₅', 2.74, 1.09, 1.0, 16),
            'Sb2Se3': PCMMaterial('Sb₂Se₃', 0.76, 0.0, 0.0, 32)
        }
        
        # System parameters
        self.msb_bits = 5  # PCM precision
        self.lsb_bits = 8  # Electro-optic precision
        self.total_bits = self.msb_bits + self.lsb_bits
        
        # Optical parameters
        self.wavelength_center = 1550e-9  # meters
        self.fsr = 200e9  # Free spectral range in Hz
        self.q_factor = 1.5e6
        
    def mixed_precision_iterative_refinement(
        self, A: np.ndarray, b: np.ndarray,
        low_bits: int = 6, tol: float = 1e-8
    ) -> Tuple[np.ndarray, int, List[float]]:
        """
        Mixed-precision iterative refinement algorithm
        Core algorithm for photonic in-memory computing
        """
        n = len(b)
        A_inv = np.linalg.inv(A)  # High precision, done once
        x = np.zeros(n)
        residuals = []
        
        for k in range(20):
            r = b - A @ x  # Compute residual
            residual_norm = np.linalg.norm(r)
            residuals.append(residual_norm)
            
            if residual_norm < tol:
                break
            
            # Analog correction (photonic computation)
            delta = self.analog_matvec(A_inv, r, bits=low_bits)
            x = x + delta
        
        return x, k + 1, residuals
    
    def analog_matvec(
        self, A: np.ndarray, x: np.ndarray, 
        bits: int, noise_std: float = 0.001
    ) -> np.ndarray:
        """Simulate photonic tensor core operation"""
        y = A @ x
        y_quant = self.quantize_to_bits(y, bits)
        
        if noise_std > 0:
            noise = np.random.normal(0, noise_std, y_quant.shape)
            y_quant += noise
        
        return y_quant
    
    def calculate_enob(self, power: float) -> float:
        """Calculate Effective Number of Bits"""
        power_dbm = 10 * np.log10(power * 1000)
        snr_db = power_dbm + 160 - 1.13  # RIN + insertion loss
        enob = (snr_db - 1.76) / 6.02
        return min(enob, self.total_bits)

# Example usage
core = PhotonicTensorCore(size=32, wavelengths=32)
results = core.benchmark_pde_solver(n_grid=64)</code></pre>
                        </div>
                    </div>
                    
                    <div class="control-card">
                        <h3><i class="fas fa-terminal"></i> Usage Example</h3>
                        <div class="code-viewer">
                            <pre><code class="language-python"># Initialize the photonic computing system
from photonic_computing import PhotonicTensorCore, PhotonicSystemVisualizer

# Create tensor core with optimal configuration
core = PhotonicTensorCore(size=32, wavelengths=32)
core.set_pcm_material('Sb2S3')  # Low-loss material

# Optimize for 12-bit ENOB target
optimal = core.optimize_system_parameters(target_enob=12)
print(f"Optimal power: {optimal['power_watts']*1e3:.2f} mW")
print(f"Achieved ENOB: {optimal['achieved_enob']:.1f} bits")

# Benchmark PDE solver performance
results = core.benchmark_pde_solver(
    n_grid=64,
    precision_bits=[4, 6, 8, 10]
)

# Visualize convergence
viz = PhotonicSystemVisualizer()
viz.plot_convergence_analysis(results)
viz.plot_enob_analysis(core)

# Performance metrics
print(f"Peak Performance: {core.peak_performance/1e12:.2f} TeraOPS")
print(f"Energy Efficiency: {core.energy_efficiency:.2f} fJ/OP")</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Technical Architecture Section -->
            <div class="project-content">
                <h2 style="color: #00ff88; margin: 30px 0;">Mixed-Precision Photonic Computing Architecture</h2>
                
                <!-- 3D EPIC Stack Visualization -->
                <div style="background: linear-gradient(135deg, rgba(0,255,136,0.1), rgba(0,170,255,0.1)); border-radius: 20px; padding: 30px; margin: 30px 0;">
                    <h3 style="color: #00aaff; margin-bottom: 20px;">3D Electronic-Photonic Integrated Circuit (EPIC) Stack</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 30px;">
                        <div style="background: rgba(0,0,0,0.4); padding: 20px; border-radius: 10px;">
                            <h4 style="color: #00ff88; margin-bottom: 15px;">Layer Stack (Top to Bottom)</h4>
                            <div style="border-left: 4px solid #00ff88; padding-left: 15px;">
                                <div style="margin: 15px 0;">
                                    <strong style="color: #00aaff;">Layer 4: PCM Control</strong><br>
                                    <small style="color: #888;">Sb₂S₃ thin film (50nm)<br>Electrical heaters & sensors</small>
                                </div>
                                <div style="margin: 15px 0;">
                                    <strong style="color: #00aaff;">Layer 3: Photonic IC</strong><br>
                                    <small style="color: #888;">AlGaAs waveguides<br>Ring resonators (r=10μm)</small>
                                </div>
                                <div style="margin: 15px 0;">
                                    <strong style="color: #00aaff;">Layer 2: DBI Interconnect</strong><br>
                                    <small style="color: #888;">Cu pillars (2μm pitch)<br>10⁶ connections/cm²</small>
                                </div>
                                <div style="margin: 15px 0;">
                                    <strong style="color: #00aaff;">Layer 1: CMOS EIC</strong><br>
                                    <small style="color: #888;">22nm FD-SOI process<br>10GHz DACs, control logic</small>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: #00ff88; margin-bottom: 15px;">Mixed-Precision Weight Programming</h4>
                            <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <strong style="color: #00aaff;">5-bit PCM (MSB) - Coarse Tuning</strong>
                                <ul style="margin: 10px 0; color: #e0e0e0; font-size: 0.9em;">
                                    <li>32 discrete crystallization levels in Sb₂S₃</li>
                                    <li>Δn = 0.54 maximum index change</li>
                                    <li>100ns switching time via thermal pulses</li>
                                    <li>Non-volatile storage (10⁹ cycles endurance)</li>
                                    <li>0.01 dB/cm ultra-low optical loss</li>
                                </ul>
                            </div>
                            
                            <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px;">
                                <strong style="color: #00aaff;">8-bit Electro-Optic (LSB) - Fine Tuning</strong>
                                <ul style="margin: 10px 0; color: #e0e0e0; font-size: 0.9em;">
                                    <li>256 voltage levels via reverse-bias p-n junction</li>
                                    <li>Δn = 2×10⁻⁴ per volt (carrier depletion)</li>
                                    <li>10GHz modulation bandwidth</li>
                                    <li>Volatile but ultra-fast response</li>
                                    <li>Sub-pm wavelength resolution</li>
                                </ul>
                            </div>
                            
                            <div style="margin-top: 15px; padding: 15px; background: linear-gradient(135deg, #00ff88, #00aaff); border-radius: 10px; color: #0a0e27;">
                                <strong>Combined Result: 13-bit Total Precision</strong><br>
                                8,192 distinct weight levels → 12.5-bit ENOB after noise
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ring Resonator Physics -->
                <div style="background: rgba(255,255,255,0.02); border-radius: 20px; padding: 30px; margin: 30px 0;">
                    <h3 style="color: #00aaff; margin-bottom: 20px;">PCM-Enhanced Ring Resonator Physics</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                        <div style="text-align: center;">
                            <div style="font-size: 2em; color: #00ff88; margin: 10px 0;">1.5×10⁶</div>
                            <strong style="color: #00aaff;">Q-Factor</strong><br>
                            <small style="color: #888;">Ultra-high spectral selectivity</small>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2em; color: #00ff88; margin: 10px 0;">200 GHz</div>
                            <strong style="color: #00aaff;">FSR</strong><br>
                            <small style="color: #888;">32 WDM channels</small>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2em; color: #00ff88; margin: 10px 0;">-70 dB</div>
                            <strong style="color: #00aaff;">Crosstalk</strong><br>
                            <small style="color: #888;">Channel isolation</small>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 10px;">
                        <strong style="color: #00ff88;">Key Innovation: Mem-Resonator Design</strong>
                        <p style="color: #e0e0e0; margin: 10px 0; line-height: 1.6;">
                            Our AlGaAs micro-ring resonators (10μm radius) are enhanced with a 50nm Sb₂S₃ cladding layer.
                            The PCM layer provides non-volatile weight storage through refractive index modulation (Δn=0.54),
                            while maintaining ultra-low loss (0.01 dB/cm). The hybrid p-n junction enables fine-tuning via
                            carrier depletion, achieving sub-pm wavelength resolution at 10GHz speeds.
                        </p>
                    </div>
                </div>
                
                <!-- Performance Breakdown -->
                <div style="background: linear-gradient(135deg, rgba(0,170,255,0.1), rgba(0,255,136,0.1)); border-radius: 20px; padding: 30px; margin: 30px 0;">
                    <h3 style="color: #00aaff; margin-bottom: 20px;">327 TeraOPS Performance Breakdown</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                        <div>
                            <h4 style="color: #00ff88;">Computation Architecture</h4>
                            <table style="width: 100%; margin: 15px 0;">
                                <tr>
                                    <td style="color: #888; padding: 8px;">Array Size:</td>
                                    <td style="color: #e0e0e0; text-align: right;">32×32 crossbar</td>
                                </tr>
                                <tr>
                                    <td style="color: #888; padding: 8px;">WDM Channels:</td>
                                    <td style="color: #e0e0e0; text-align: right;">32 wavelengths</td>
                                </tr>
                                <tr>
                                    <td style="color: #888; padding: 8px;">Clock Rate:</td>
                                    <td style="color: #e0e0e0; text-align: right;">10 GHz</td>
                                </tr>
                                <tr>
                                    <td style="color: #888; padding: 8px;">Operations/Cycle:</td>
                                    <td style="color: #e0e0e0; text-align: right;">32,768 MACs</td>
                                </tr>
                                <tr style="border-top: 1px solid rgba(255,255,255,0.2);">
                                    <td style="color: #00ff88; padding: 8px; font-weight: bold;">Total:</td>
                                    <td style="color: #00ff88; text-align: right; font-weight: bold;">327.68 TOPS</td>
                                </tr>
                            </table>
                        </div>
                        
                        <div>
                            <h4 style="color: #00ff88;">Energy Efficiency Analysis</h4>
                            <table style="width: 100%; margin: 15px 0;">
                                <tr>
                                    <td style="color: #888; padding: 8px;">Optical Power:</td>
                                    <td style="color: #e0e0e0; text-align: right;">500 mW</td>
                                </tr>
                                <tr>
                                    <td style="color: #888; padding: 8px;">Electronic Control:</td>
                                    <td style="color: #e0e0e0; text-align: right;">200 mW</td>
                                </tr>
                                <tr>
                                    <td style="color: #888; padding: 8px;">PCM Programming:</td>
                                    <td style="color: #e0e0e0; text-align: right;">100 mW</td>
                                </tr>
                                <tr>
                                    <td style="color: #888; padding: 8px;">Total Power:</td>
                                    <td style="color: #e0e0e0; text-align: right;">800 mW</td>
                                </tr>
                                <tr style="border-top: 1px solid rgba(255,255,255,0.2);">
                                    <td style="color: #00ff88; padding: 8px; font-weight: bold;">Efficiency:</td>
                                    <td style="color: #00ff88; text-align: right; font-weight: bold;">2.4 fJ/op</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: center; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 10px;">
                        <strong style="color: #00aaff;">10,000× More Efficient Than 7nm CMOS</strong><br>
                        <small style="color: #888;">CMOS: ~10 pJ/op vs Photonic: 2.4 fJ/op</small>
                    </div>
                </div>

                <!-- Applications Section -->
                <h2 style="color: #00ff88; margin: 30px 0;">Applications & Impact</h2>
                
                <div class="applications-grid">
                    <div class="app-card">
                        <div class="app-icon"><i class="fas fa-brain"></i></div>
                        <h3>Machine Learning</h3>
                        <p>Accelerate training and inference for large-scale neural networks with unprecedented energy efficiency</p>
                    </div>
                    
                    <div class="app-card">
                        <div class="app-icon"><i class="fas fa-cloud"></i></div>
                        <h3>Scientific Computing</h3>
                        <p>Real-time PDE solving for fluid dynamics, climate modeling, and molecular simulations</p>
                    </div>
                    
                    <div class="app-card">
                        <div class="app-icon"><i class="fas fa-chart-line"></i></div>
                        <h3>Financial Modeling</h3>
                        <p>High-speed portfolio optimization and risk analysis with massive parallelism</p>
                    </div>
                    
                    <div class="app-card">
                        <div class="app-icon"><i class="fas fa-dna"></i></div>
                        <h3>Bioinformatics</h3>
                        <p>Accelerate genomic analysis and protein folding simulations</p>
                    </div>
                </div>

                <!-- Research Publications -->
                <h2 style="color: #00ff88; margin: 30px 0;">Research Foundation</h2>
                
                <div class="publications-list">
                    <div class="publication-item">
                        <h4>Mixed Precision Photonic Computing with 3D Electronic-Photonic Integrated Circuits</h4>
                        <p>Charalampous, G., et al. (2025). arXiv:2508.03063</p>
                    </div>
                    
                    <div class="publication-item">
                        <h4>Non-volatile Electrically Programmable Integrated Photonics</h4>
                        <p>Chen, R., et al. (2023). Nature Communications 14, 3465</p>
                    </div>
                    
                    <div class="publication-item">
                        <h4>Spontaneous Pulse Formation in Edgeless Photonic Crystal Resonators</h4>
                        <p>Yu, S.-P., et al. (2022). Nature Photonics 15, 461-467</p>
                    </div>
                </div>

                <!-- Future Developments -->
                <h2 style="color: #00ff88; margin: 30px 0;">Future Roadmap</h2>
                
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-date">2025-2026</div>
                        <div class="timeline-content">
                            <h4>Near-term Enhancements</h4>
                            <ul>
                                <li>Zero-loss Sb₂Se₃ integration</li>
                                <li>16-bit ENOB achievement</li>
                                <li>512×512 array scaling</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-date">2027+</div>
                        <div class="timeline-content">
                            <h4>Long-term Vision</h4>
                            <ul>
                                <li>Monolithic CMOS-photonic integration</li>
                                <li>Neuromorphic computing capabilities</li>
                                <li>Quantum-photonic hybrid systems</li>
                                <li>Exascale computing (10¹⁸ ops/s)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Advanced JavaScript Implementation -->
    <script>
        // Global variables
        let convergenceChart, spectralChart, enobChart, mixedPrecisionChart;
        let scalabilityChart, noiseChart, materialChart;
        let scene, camera, renderer; // For 3D visualization
        let simulationData = {};
        let currentMaterial = 'sbs';
        
        // PCM Materials Database
        const pcmMaterials = {
            sbs: { name: 'Sb₂S₃', deltaN: 0.54, kc: 0.05, loss: 0.01, levels: 32 },
            gst: { name: 'Ge₂Sb₂Te₅', deltaN: 2.74, kc: 1.09, loss: 1.0, levels: 16 },
            sbse: { name: 'Sb₂Se₃', deltaN: 0.76, kc: 0, loss: 0, levels: 32 }
        };
        
        // Initialize on page load
        window.onload = function() {
            initializeSliders();
            initializeCharts();
            drawResonatorVisualization();
            init3DArchitecture();
            updateAllValues();
        };
        
        function initializeSliders() {
            // Phase State Slider
            document.getElementById('phaseState').oninput = function() {
                document.getElementById('phaseStateValue').textContent = Math.round(this.value * 100) + '%';
                updatePCMProperties();
            };
            
            // MSB Precision Slider
            document.getElementById('msbPrecision').oninput = function() {
                document.getElementById('msbValue').textContent = this.value + ' bits';
                updateTotalPrecision();
            };
            
            // Bias Voltage Slider
            document.getElementById('biasVoltage').oninput = function() {
                document.getElementById('biasValue').textContent = parseFloat(this.value).toFixed(1) + ' V';
                updateElectroOpticProperties();
            };
            
            // LSB Precision Slider
            document.getElementById('lsbPrecision').oninput = function() {
                document.getElementById('lsbValue').textContent = this.value + ' bits';
                updateTotalPrecision();
            };
            
            // Temperature Slider
            document.getElementById('temperature').oninput = function() {
                document.getElementById('tempValue').textContent = this.value + ' K';
                updateThermalEffects();
            };
            
            // Array Size Slider
            document.getElementById('arraySize').oninput = function() {
                document.getElementById('arraySizeValue').textContent = this.value + '×' + this.value;
                updateSystemMetrics();
            };
            
            // Wavelengths Slider
            document.getElementById('wavelengths').oninput = function() {
                document.getElementById('wavelengthValue').textContent = this.value;
                updateSystemMetrics();
            };
            
            // Incident Power Slider
            document.getElementById('incidentPower').oninput = function() {
                const power = Math.pow(10, parseFloat(this.value));
                document.getElementById('powerValue').textContent = (power * 1000).toFixed(1) + ' mW';
                updateENOB();
            };
        }
        
        function selectMaterial(material) {
            currentMaterial = material;
            
            // Update UI
            document.querySelectorAll('.material-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // Update properties
            updatePCMProperties();
        }
        
        function updatePCMProperties() {
            const phase = parseFloat(document.getElementById('phaseState').value);
            const pcm = pcmMaterials[currentMaterial];
            
            const deltaN = (pcm.deltaN * phase).toFixed(2);
            const kc = (pcm.kc * phase).toFixed(3);
            
            document.getElementById('deltaN').textContent = deltaN;
            document.getElementById('extinctionCoeff').textContent = kc;
            
            updateSystemMetrics();
        }
        
        function updateElectroOpticProperties() {
            const voltage = parseFloat(document.getElementById('biasVoltage').value);
            const bandwidth = (4.0 + voltage * 0.5).toFixed(1);
            document.getElementById('eoBandwidth').textContent = bandwidth + ' GHz';
            
            updateSystemMetrics();
        }
        
        function updateTotalPrecision() {
            const msb = parseInt(document.getElementById('msbPrecision').value);
            const lsb = parseInt(document.getElementById('lsbPrecision').value);
            const total = Math.min(msb + lsb, 16);
            document.getElementById('totalPrecision').textContent = total;
            
            updateENOB();
        }
        
        function updateENOB() {
            const total = parseInt(document.getElementById('totalPrecision').textContent);
            const arraySize = parseInt(document.getElementById('arraySize').value);
            const power = Math.pow(10, parseFloat(document.getElementById('incidentPower').value));
            
            // Calculate SNR and ENOB
            const powerDbm = 10 * Math.log10(power * 1000);
            const crosstalk = -70 - Math.log2(arraySize/32) * 3;
            const snrDb = powerDbm + 160 - 1.13 - 10 * Math.log10(1 + Math.pow(10, crosstalk/10));
            const enob = Math.min((snrDb - 1.76) / 6.02, total - 0.5).toFixed(1);
            
            document.getElementById('enob').textContent = enob + ' bits';
            document.getElementById('crosstalk').textContent = crosstalk.toFixed(0) + ' dB';
        }
        
        function updateSystemMetrics() {
            const arraySize = parseInt(document.getElementById('arraySize').value);
            const wavelengths = parseInt(document.getElementById('wavelengths').value);
            
            // Calculate power efficiency
            const powerEff = (0.8 * Math.sqrt(arraySize/32)).toFixed(2);
            document.getElementById('powerEff').textContent = powerEff + ' W';
            
            // Calculate peak performance
            const peakOps = (arraySize * arraySize * wavelengths * 10 / 1000).toFixed(0);
            document.getElementById('peakOps').textContent = peakOps + ' TOPS';
            
            // Update Q-factor based on configuration
            const qFactor = (1.5e6 / (1 + arraySize/256)).toExponential(1);
            document.getElementById('qFactor').textContent = qFactor;
            
            // Update insertion loss
            const loss = (1.13 + Math.log10(arraySize/32) * 0.2).toFixed(2);
            document.getElementById('insertionLoss').textContent = loss + ' dB';
            
            updateENOB();
        }
        
        function updateThermalEffects() {
            const temp = parseInt(document.getElementById('temperature').value);
            const tempEffect = 1 - (temp - 300) / 1000;
            updateSystemMetrics();
        }
        
        function updateAllValues() {
            updatePCMProperties();
            updateElectroOpticProperties();
            updateTotalPrecision();
            updateSystemMetrics();
        }
        
        function drawResonatorVisualization() {
            const canvas = document.getElementById('resonatorCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            
            let time = 0;
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw background gradient
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, 'rgba(10,14,39,0.8)');
                gradient.addColorStop(1, 'rgba(26,31,58,0.8)');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw ring resonator array
                const rings = 4;
                const spacing = 200;
                const startX = (canvas.width - (rings - 1) * spacing) / 2;
                const startY = (canvas.height - (rings - 1) * spacing / 2) / 2;
                
                for (let i = 0; i < rings; i++) {
                    for (let j = 0; j < rings; j++) {
                        const x = startX + i * spacing;
                        const y = startY + j * spacing / 2;
                        
                        // Draw ring with animation
                        ctx.strokeStyle = `rgba(0, 255, 136, ${0.5 + 0.5 * Math.sin(time + i + j)})`;
                        ctx.lineWidth = 4;
                        ctx.beginPath();
                        ctx.arc(x, y, 50, 0, 2 * Math.PI);
                        ctx.stroke();
                        
                        // Draw PCM layer
                        ctx.fillStyle = `rgba(0, 170, 255, ${0.3 + 0.2 * Math.sin(time + i * j)})`;
                        ctx.beginPath();
                        ctx.arc(x, y, 45, 0, 2 * Math.PI);
                        ctx.fill();
                        
                        // Draw waveguides
                        ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(x - 70, y);
                        ctx.lineTo(x + 70, y);
                        ctx.moveTo(x, y - 70);
                        ctx.lineTo(x, y + 70);
                        ctx.stroke();
                        
                        // Draw light propagation
                        const numLights = 3;
                        for (let k = 0; k < numLights; k++) {
                            const angle = time * 2 + i + k * (2 * Math.PI / numLights);
                            const lightX = x + 50 * Math.cos(angle);
                            const lightY = y + 50 * Math.sin(angle);
                            
                            // Create glow effect
                            const glowGradient = ctx.createRadialGradient(lightX, lightY, 0, lightX, lightY, 15);
                            glowGradient.addColorStop(0, 'rgba(255, 255, 0, 0.9)');
                            glowGradient.addColorStop(0.5, 'rgba(255, 200, 0, 0.5)');
                            glowGradient.addColorStop(1, 'rgba(255, 150, 0, 0)');
                            
                            ctx.fillStyle = glowGradient;
                            ctx.beginPath();
                            ctx.arc(lightX, lightY, 15, 0, 2 * Math.PI);
                            ctx.fill();
                        }
                    }
                }
                
                // Draw connections between rings
                ctx.strokeStyle = 'rgba(0, 255, 136, 0.3)';
                ctx.lineWidth = 2;
                for (let i = 0; i < rings - 1; i++) {
                    for (let j = 0; j < rings; j++) {
                        ctx.beginPath();
                        ctx.moveTo(startX + i * spacing + 50, startY + j * spacing / 2);
                        ctx.lineTo(startX + (i + 1) * spacing - 50, startY + j * spacing / 2);
                        ctx.stroke();
                    }
                }
                
                time += 0.02;
                requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        function initializeCharts() {
            // Convergence Chart
            const ctxConv = document.getElementById('convergenceChart');
            if (ctxConv) {
                convergenceChart = new Chart(ctxConv.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: Array.from({length: 20}, (_, i) => i + 1),
                        datasets: [{
                            label: '4-bit Precision',
                            data: Array.from({length: 20}, (_, i) => Math.exp(-i * 0.1) + Math.random() * 0.01),
                            borderColor: '#ff6b6b',
                            backgroundColor: 'rgba(255, 107, 107, 0.1)',
                            tension: 0.4
                        }, {
                            label: '8-bit Precision',
                            data: Array.from({length: 20}, (_, i) => Math.exp(-i * 0.3) + Math.random() * 0.001),
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            tension: 0.4
                        }, {
                            label: '12-bit Precision',
                            data: Array.from({length: 20}, (_, i) => Math.exp(-i * 0.5) + Math.random() * 0.0001),
                            borderColor: '#00aaff',
                            backgroundColor: 'rgba(0, 170, 255, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { 
                                labels: { color: '#e0e0e0' },
                                position: 'top'
                            },
                            title: {
                                display: true,
                                text: 'Iterative Refinement Convergence',
                                color: '#e0e0e0',
                                font: { size: 16 }
                            }
                        },
                        scales: {
                            x: { 
                                title: { display: true, text: 'Iteration', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: { 
                                type: 'logarithmic',
                                title: { display: true, text: 'Residual Error', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }
            
            // Spectral Response Chart
            const ctxSpectral = document.getElementById('spectralChart');
            if (ctxSpectral) {
                const wavelengths = Array.from({length: 100}, (_, i) => 1540 + i * 0.2);
                spectralChart = new Chart(ctxSpectral.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: wavelengths,
                        datasets: [{
                            label: 'Amorphous State',
                            data: wavelengths.map(w => {
                                const resonance = 1550;
                                const fwhm = 0.1;
                                return 1 - 0.9 / (1 + Math.pow((w - resonance) / fwhm, 2));
                            }),
                            borderColor: '#00aaff',
                            backgroundColor: 'rgba(0, 170, 255, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Crystalline State',
                            data: wavelengths.map(w => {
                                const resonance = 1549;
                                const fwhm = 0.15;
                                return 1 - 0.9 / (1 + Math.pow((w - resonance) / fwhm, 2));
                            }),
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#e0e0e0' } },
                            title: {
                                display: true,
                                text: 'Ring Resonator Spectral Response',
                                color: '#e0e0e0',
                                font: { size: 16 }
                            }
                        },
                        scales: {
                            x: { 
                                title: { display: true, text: 'Wavelength (nm)', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: { 
                                title: { display: true, text: 'Transmission', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }
        }
        
        function initializeAnalysisCharts() {
            // ENOB vs Power Chart
            const ctxEnob = document.getElementById('enobChart');
            if (ctxEnob && !enobChart) {
                const powers = Array.from({length: 50}, (_, i) => Math.pow(10, -6 + i * 0.1));
                enobChart = new Chart(ctxEnob.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: powers.map(p => (p * 1e6).toFixed(1)),
                        datasets: [{
                            label: 'RIN = -140 dBc/Hz',
                            data: powers.map(p => {
                                const pDbm = 10 * Math.log10(p * 1000);
                                return Math.min((pDbm + 140 - 1.76) / 6.02, 14);
                            }),
                            borderColor: '#ff8800',
                            tension: 0.4
                        }, {
                            label: 'RIN = -160 dBc/Hz',
                            data: powers.map(p => {
                                const pDbm = 10 * Math.log10(p * 1000);
                                return Math.min((pDbm + 160 - 1.76) / 6.02, 14);
                            }),
                            borderColor: '#00ff88',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#e0e0e0' } },
                            title: {
                                display: true,
                                text: 'ENOB vs Incident Power',
                                color: '#e0e0e0',
                                font: { size: 16 }
                            }
                        },
                        scales: {
                            x: { 
                                title: { display: true, text: 'Incident Power (μW)', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: { 
                                title: { display: true, text: 'ENOB (bits)', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }
            
            // Mixed Precision Convergence
            const ctxMixed = document.getElementById('mixedPrecisionChart');
            if (ctxMixed && !mixedPrecisionChart) {
                mixedPrecisionChart = new Chart(ctxMixed.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: Array.from({length: 30}, (_, i) => i + 1),
                        datasets: [{
                            label: '4-bit Analog',
                            data: Array.from({length: 30}, (_, i) => Math.exp(-i * 0.1)),
                            borderColor: '#ff0000',
                            tension: 0.4
                        }, {
                            label: '6-bit Analog',
                            data: Array.from({length: 30}, (_, i) => Math.exp(-i * 0.2)),
                            borderColor: '#ff8800',
                            tension: 0.4
                        }, {
                            label: '8-bit Analog',
                            data: Array.from({length: 30}, (_, i) => Math.exp(-i * 0.3)),
                            borderColor: '#00ff88',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#e0e0e0' } },
                            title: {
                                display: true,
                                text: 'Mixed-Precision Convergence Rates',
                                color: '#e0e0e0',
                                font: { size: 16 }
                            }
                        },
                        scales: {
                            x: { 
                                title: { display: true, text: 'Iteration', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: { 
                                type: 'logarithmic',
                                title: { display: true, text: 'Relative Error', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }
            
            // Scalability Chart
            const ctxScale = document.getElementById('scalabilityChart');
            if (ctxScale && !scalabilityChart) {
                const sizes = [16, 32, 64, 128, 256];
                scalabilityChart = new Chart(ctxScale.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: sizes.map(s => s + '×' + s),
                        datasets: [{
                            label: 'Performance (PetaOPS)',
                            data: sizes.map(s => s * s * 32 * 10 / 1e6),
                            backgroundColor: 'rgba(0, 255, 136, 0.5)',
                            borderColor: '#00ff88',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#e0e0e0' } },
                            title: {
                                display: true,
                                text: 'System Scalability Analysis',
                                color: '#e0e0e0',
                                font: { size: 16 }
                            }
                        },
                        scales: {
                            x: { 
                                title: { display: true, text: 'Array Size', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: { 
                                title: { display: true, text: 'PetaOPS', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }
            
            // Noise Analysis Chart
            const ctxNoise = document.getElementById('noiseChart');
            if (ctxNoise && !noiseChart) {
                const frequencies = Array.from({length: 100}, (_, i) => i * 2);
                noiseChart = new Chart(ctxNoise.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: frequencies,
                        datasets: [{
                            label: 'RIN (dBc/Hz)',
                            data: frequencies.map(f => -160 - Math.log10(1 + f/100) * 10),
                            borderColor: '#00aaff',
                            tension: 0.4
                        }, {
                            label: 'Thermal Noise',
                            data: frequencies.map(f => -170 - Math.log10(1 + f/50) * 5),
                            borderColor: '#ff8800',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#e0e0e0' } },
                            title: {
                                display: true,
                                text: 'Noise Spectral Density',
                                color: '#e0e0e0',
                                font: { size: 16 }
                            }
                        },
                        scales: {
                            x: { 
                                title: { display: true, text: 'Frequency (GHz)', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: { 
                                title: { display: true, text: 'Noise (dBc/Hz)', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            }
                        }
                    }
                });
            }
        }
        
        function initializeMaterialChart() {
            const ctxMaterial = document.getElementById('materialChart');
            if (ctxMaterial && !materialChart) {
                materialChart = new Chart(ctxMaterial.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['Δn', 'Low Loss', 'Levels', 'Speed', 'Stability'],
                        datasets: [{
                            label: 'Sb₂S₃',
                            data: [54, 99, 32, 70, 85],
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0, 255, 136, 0.2)'
                        }, {
                            label: 'GST',
                            data: [100, 20, 16, 90, 60],
                            borderColor: '#ff8800',
                            backgroundColor: 'rgba(255, 136, 0, 0.2)'
                        }, {
                            label: 'Sb₂Se₃',
                            data: [76, 100, 32, 60, 90],
                            borderColor: '#00aaff',
                            backgroundColor: 'rgba(0, 170, 255, 0.2)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#e0e0e0' } },
                            title: {
                                display: true,
                                text: 'PCM Material Properties Comparison',
                                color: '#e0e0e0',
                                font: { size: 16 }
                            }
                        },
                        scales: {
                            r: {
                                angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                pointLabels: { color: '#e0e0e0' },
                                ticks: { 
                                    color: '#e0e0e0',
                                    backdropColor: 'transparent'
                                }
                            }
                        }
                    }
                });
            }
        }
        
        function init3DArchitecture() {
            const container = document.getElementById('architecture3D');
            if (!container) return;
            
            // Initialize Three.js scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a0e27);
            
            camera = new THREE.PerspectiveCamera(
                75, 
                container.clientWidth / container.clientHeight, 
                0.1, 
                1000
            );
            camera.position.set(5, 5, 5);
            camera.lookAt(0, 0, 0);
            
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            // Add lighting
            const ambientLight = new THREE.AmbientLight(0x404040);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0x00ff88, 1);
            directionalLight.position.set(5, 5, 5);
            scene.add(directionalLight);
            
            // Create 3D EPIC layers
            const layers = [
                { name: 'CMOS EIC', y: 0, color: 0x00aaff },
                { name: 'DBI', y: 1, color: 0xffaa00 },
                { name: 'Photonic IC', y: 2, color: 0x00ff88 },
                { name: 'PCM Layer', y: 3, color: 0xff00aa }
            ];
            
            layers.forEach(layer => {
                const geometry = new THREE.BoxGeometry(4, 0.2, 4);
                const material = new THREE.MeshPhongMaterial({ 
                    color: layer.color,
                    transparent: true,
                    opacity: 0.7
                });
                const mesh = new THREE.Mesh(geometry, material);
                mesh.position.y = layer.y;
                scene.add(mesh);
            });
            
            // Animation loop
            function animate3D() {
                requestAnimationFrame(animate3D);
                
                // Rotate the scene
                scene.rotation.y += 0.005;
                
                renderer.render(scene, camera);
            }
            
            animate3D();
        }
        
        function drawCrossbarArchitecture() {
            const canvas = document.getElementById('crossbarCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw crossbar array
            const rows = 8;
            const cols = 8;
            const cellSize = 50;
            const startX = (canvas.width - cols * cellSize) / 2;
            const startY = (canvas.height - rows * cellSize) / 2;
            
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const x = startX + j * cellSize;
                    const y = startY + i * cellSize;
                    
                    // Draw cell
                    ctx.fillStyle = `rgba(0, 255, 136, ${0.1 + Math.random() * 0.3})`;
                    ctx.fillRect(x, y, cellSize - 2, cellSize - 2);
                    
                    // Draw ring resonator
                    ctx.strokeStyle = '#00ff88';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.arc(x + cellSize/2, y + cellSize/2, 15, 0, 2 * Math.PI);
                    ctx.stroke();
                }
            }
            
            // Draw input/output waveguides
            ctx.strokeStyle = '#00aaff';
            ctx.lineWidth = 3;
            
            // Horizontal waveguides
            for (let i = 0; i < rows; i++) {
                ctx.beginPath();
                ctx.moveTo(startX - 20, startY + i * cellSize + cellSize/2);
                ctx.lineTo(startX + cols * cellSize + 20, startY + i * cellSize + cellSize/2);
                ctx.stroke();
            }
            
            // Vertical waveguides
            for (let j = 0; j < cols; j++) {
                ctx.beginPath();
                ctx.moveTo(startX + j * cellSize + cellSize/2, startY - 20);
                ctx.lineTo(startX + j * cellSize + cellSize/2, startY + rows * cellSize + 20);
                ctx.stroke();
            }
        }
        
        function runSimulation() {
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = '0%';
            progressBar.textContent = 'Initializing...';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                progressBar.style.width = progress + '%';
                
                if (progress < 30) {
                    progressBar.textContent = 'Loading PCM states...';
                } else if (progress < 60) {
                    progressBar.textContent = 'Computing matrix operations...';
                } else if (progress < 90) {
                    progressBar.textContent = 'Running iterative refinement...';
                } else {
                    progressBar.textContent = 'Finalizing results...';
                }
                
                if (progress >= 100) {
                    clearInterval(interval);
                    progressBar.textContent = 'Simulation Complete!';
                    updateSimulationResults();
                }
            }, 100);
        }
        
        function updateSimulationResults() {
            // Update convergence chart with new data
            const iterations = 20;
            const precision = parseInt(document.getElementById('totalPrecision').textContent);
            
            if (convergenceChart) {
                const newData = Array.from({length: iterations}, (_, i) => 
                    Math.exp(-i * precision/20) + Math.random() * 0.001
                );
                
                convergenceChart.data.datasets[0].data = newData;
                convergenceChart.update();
            }
            
            // Update spectral response
            if (spectralChart) {
                const phase = parseFloat(document.getElementById('phaseState').value);
                const wavelengths = Array.from({length: 100}, (_, i) => 1540 + i * 0.2);
                const resonance = 1550 - phase * 10;
                
                spectralChart.data.datasets[0].data = wavelengths.map(w => {
                    const fwhm = 0.1 + phase * 0.05;
                    return 1 - 0.9 / (1 + Math.pow((w - resonance) / fwhm, 2));
                });
                spectralChart.update();
            }
            
            // Show notification
            showNotification('Simulation completed successfully!', 'success');
        }
        
        function optimizeSystem() {
            // Set optimal parameters
            document.getElementById('msbPrecision').value = 6;
            document.getElementById('lsbPrecision').value = 8;
            document.getElementById('biasVoltage').value = 3;
            document.getElementById('arraySize').value = 64;
            document.getElementById('wavelengths').value = 32;
            document.getElementById('incidentPower').value = -3;
            
            // Update displays
            document.getElementById('msbValue').textContent = '6 bits';
            document.getElementById('lsbValue').textContent = '8 bits';
            document.getElementById('biasValue').textContent = '3.0 V';
            document.getElementById('arraySizeValue').textContent = '64×64';
            document.getElementById('wavelengthValue').textContent = '32';
            document.getElementById('powerValue').textContent = '1.0 mW';
            
            // Update all values
            updateAllValues();
            
            // Run simulation
            runSimulation();
            
            // Show notification
            showNotification('System optimized for maximum performance!', 'info');
        }
        
        // Configure MathJax for equations
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']]
            }
        };
        
        function switchTab(tabName, element) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from all tabs - updated to use advanced-tab
            document.querySelectorAll('.advanced-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab and make it active
            const targetTab = document.getElementById(tabName + '-tab');
            if (targetTab) {
                targetTab.style.display = 'block';
                console.log('Switched to tab:', tabName);
            } else {
                console.error('Tab not found:', tabName + '-tab');
            }
            
            // Add active class to clicked element
            if (element) {
                element.classList.add('active');
            } else if (event && event.currentTarget) {
                event.currentTarget.classList.add('active');
            }
            
            // Initialize charts if needed
            if (tabName === 'analysis') {
                initializeAnalysisCharts();
            } else if (tabName === 'materials') {
                initializeMaterialChart();
            } else if (tabName === 'architecture') {
                drawCrossbarArchitecture();
            } else if (tabName === 'benchmarks') {
                initializeBenchmarkCharts();
            }
        }
        
        // Complete demo implementations with real simulations
        function loadDemo(demoType) {
            const workspace = document.getElementById('demoWorkspace');
            
            switch(demoType) {
                case 'resonator':
                    workspace.innerHTML = `
                        <h3 style="color: #00ff88;">PCM-Enhanced Ring Resonator: Real-Time Weight Programming</h3>
                        <p style="color: #e0e0e0;">Demonstrating 5-bit PCM (coarse) + 8-bit electro-optic (fine) = 13-bit total precision</p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 20px;">
                            <div style="background: rgba(0,255,136,0.1); padding: 15px; border-radius: 10px;">
                                <h4 style="color: #00aaff;">PCM Control (5-bit MSB)</h4>
                                <label style="color: #00ff88;">Sb₂S₃ Phase State:</label>
                                <input type="range" id="pcmState" min="0" max="31" step="1" value="16" oninput="updateResonatorDemo()" style="width: 100%;">
                                <span id="pcmValue" style="color: #e0e0e0;">Level 16/31</span>
                                <div style="margin-top: 10px;">
                                    <small style="color: #888;">Δn = <span id="deltaIndex">0.27</span></small><br>
                                    <small style="color: #888;">Switching: 100ns</small>
                                </div>
                            </div>
                            <div style="background: rgba(0,170,255,0.1); padding: 15px; border-radius: 10px;">
                                <h4 style="color: #00aaff;">E-O Tuning (8-bit LSB)</h4>
                                <label style="color: #00ff88;">Reverse Bias:</label>
                                <input type="range" id="eoVoltage" min="0" max="255" step="1" value="128" oninput="updateResonatorDemo()" style="width: 100%;">
                                <span id="eoValue" style="color: #e0e0e0;">Level 128/255</span>
                                <div style="margin-top: 10px;">
                                    <small style="color: #888;">Voltage: <span id="biasV">2.5</span>V</small><br>
                                    <small style="color: #888;">Speed: 10GHz</small>
                                </div>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                                <h4 style="color: #00aaff;">Combined Precision</h4>
                                <div style="font-size: 1.5em; color: #00ff88; margin: 10px 0;">
                                    <span id="totalBits">13.0</span> bits ENOB
                                </div>
                                <small style="color: #888;">Weight Value:</small><br>
                                <span id="weightValue" style="color: #e0e0e0; font-size: 1.2em;">0.5020</span>
                                <div style="margin-top: 10px;">
                                    <small style="color: #888;">Resolution: 1/8192</small>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <canvas id="resonatorDemoChart" height="300"></canvas>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                            <canvas id="transmissionChart" height="200"></canvas>
                            <canvas id="phaseChart" height="200"></canvas>
                        </div>
                    `;
                    initializeResonatorDemo();
                    break;
                    
                case 'pde':
                    workspace.innerHTML = `
                        <h3 style="color: #00ff88;">Mixed-Precision PDE Solver: Photonic Acceleration</h3>
                        <p style="color: #e0e0e0;">Solving -∇²u = f using iterative refinement: High-precision digital + Low-precision photonic</p>
                        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px; margin-top: 20px;">
                            <div>
                                <div style="background: rgba(0,255,136,0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                    <h4 style="color: #00aaff;">System Configuration</h4>
                                    <label style="color: #00ff88;">Grid Size:</label>
                                    <select id="pdeGridSize" onchange="solvePDE()" style="width: 100%; background: #1a1a2e; color: #e0e0e0; padding: 5px; margin-bottom: 10px;">
                                        <option value="16">16×16 (256 unknowns)</option>
                                        <option value="32" selected>32×32 (1024 unknowns)</option>
                                        <option value="64">64×64 (4096 unknowns)</option>
                                    </select>
                                    
                                    <label style="color: #00ff88;">Photonic Precision:</label>
                                    <input type="range" id="photonicBits" min="4" max="10" step="1" value="6" oninput="solvePDE()" style="width: 100%;">
                                    <span id="precisionValue" style="color: #e0e0e0;">6 bits</span>
                                    
                                    <label style="color: #00ff88; margin-top: 10px; display: block;">Problem Type:</label>
                                    <select id="problemType" onchange="solvePDE()" style="width: 100%; background: #1a1a2e; color: #e0e0e0; padding: 5px;">
                                        <option value="heat">Heat Diffusion</option>
                                        <option value="electrostatic">Electrostatic Potential</option>
                                        <option value="membrane">Membrane Vibration</option>
                                    </select>
                                </div>
                                
                                <div style="background: rgba(0,170,255,0.1); padding: 15px; border-radius: 10px;">
                                    <h4 style="color: #00aaff;">Performance Metrics</h4>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Iterations:</small><br>
                                        <span id="iterations" style="color: #00ff88; font-size: 1.5em;">0</span>
                                    </div>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Convergence Error:</small><br>
                                        <span id="convergenceError" style="color: #00ff88; font-size: 1.2em;">--</span>
                                    </div>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Photonic Operations:</small><br>
                                        <span id="photOps" style="color: #00aaff;">0</span> TOPS
                                    </div>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Energy Used:</small><br>
                                        <span id="energyUsed" style="color: #00aaff;">0</span> pJ
                                    </div>
                                </div>
                                
                                <button onclick="solvePDE()" style="width: 100%; margin-top: 15px; padding: 10px; background: linear-gradient(135deg, #00ff88, #00aaff); color: #0a0e27; border: none; border-radius: 5px; font-weight: bold; cursor: pointer;">
                                    <i class="fas fa-play"></i> Run Photonic Solver
                                </button>
                            </div>
                            <div>
                                <canvas id="pdeSolutionChart" height="400"></canvas>
                                <canvas id="convergenceChart" height="200" style="margin-top: 20px;"></canvas>
                            </div>
                        </div>
                    `;
                    initializePDEDemo();
                    break;
                    
                case 'convergence':
                    workspace.innerHTML = `
                        <h3 style="color: #00ff88;">Convergence Analysis: Precision vs Performance Trade-off</h3>
                        <p style="color: #e0e0e0;">Comparing convergence rates with different photonic precision levels (327 TOPS system)</p>
                        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px; margin-top: 20px;">
                            <div>
                                <div style="background: rgba(0,255,136,0.1); padding: 15px; border-radius: 10px;">
                                    <h4 style="color: #00aaff;">Test Configuration</h4>
                                    <label style="color: #00ff88;">Matrix Condition Number:</label>
                                    <input type="range" id="conditionNumber" min="1" max="4" step="0.1" value="2" oninput="updateConvergence()" style="width: 100%;">
                                    <span id="condValue" style="color: #e0e0e0;">10²</span>
                                    
                                    <label style="color: #00ff88; margin-top: 10px; display: block;">Problem Size:</label>
                                    <select id="convergenceSize" onchange="updateConvergence()" style="width: 100%; background: #1a1a2e; color: #e0e0e0; padding: 5px;">
                                        <option value="32">32×32 array</option>
                                        <option value="64" selected>64×64 array</option>
                                        <option value="128">128×128 array</option>
                                    </select>
                                    
                                    <button onclick="runConvergenceTest()" style="width: 100%; margin-top: 15px; padding: 10px; background: #00ff88; color: #0a0e27; border: none; border-radius: 5px; font-weight: bold; cursor: pointer;">
                                        Run Analysis
                                    </button>
                                </div>
                                
                                <div style="background: rgba(0,170,255,0.1); padding: 15px; border-radius: 10px; margin-top: 15px;">
                                    <h4 style="color: #00aaff;">Results Summary</h4>
                                    <div id="convergenceResults" style="margin-top: 10px; font-size: 0.9em;">
                                        <div style="margin: 5px 0;">4-bit: <span style="color: #ff6b6b;">-- iterations</span></div>
                                        <div style="margin: 5px 0;">6-bit: <span style="color: #ffaa00;">-- iterations</span></div>
                                        <div style="margin: 5px 0;">8-bit: <span style="color: #00aaff;">-- iterations</span></div>
                                        <div style="margin: 5px 0;">10-bit: <span style="color: #00ff88;">-- iterations</span></div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <canvas id="convergenceDemoChart" height="300"></canvas>
                                <canvas id="performanceChart" height="200" style="margin-top: 20px;"></canvas>
                            </div>
                        </div>
                    `;
                    initializeConvergenceDemo();
                    break;
                    
                case 'noise':
                    workspace.innerHTML = `
                        <h3 style="color: #00ff88;">Noise Impact Analysis: ENOB Under Real Conditions</h3>
                        <p style="color: #e0e0e0;">Analyzing how different noise sources affect the 12.5-bit effective precision</p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 20px;">
                            <div style="background: rgba(0,255,136,0.1); padding: 15px; border-radius: 10px;">
                                <h4 style="color: #00aaff;">Noise Sources</h4>
                                <label style="color: #00ff88; font-size: 0.9em;">RIN (dBc/Hz):</label>
                                <input type="range" id="rinNoise" min="-180" max="-140" step="5" value="-160" oninput="updateNoiseAnalysis()" style="width: 100%;">
                                <span id="rinValue" style="color: #e0e0e0; font-size: 0.9em;">-160 dBc/Hz</span>
                                
                                <label style="color: #00ff88; font-size: 0.9em; margin-top: 10px; display: block;">Thermal Noise (K):</label>
                                <input type="range" id="temperature" min="250" max="350" step="10" value="300" oninput="updateNoiseAnalysis()" style="width: 100%;">
                                <span id="tempValue" style="color: #e0e0e0; font-size: 0.9em;">300 K</span>
                                
                                <label style="color: #00ff88; font-size: 0.9em; margin-top: 10px; display: block;">Crosstalk (dB):</label>
                                <input type="range" id="crosstalk" min="-90" max="-50" step="5" value="-70" oninput="updateNoiseAnalysis()" style="width: 100%;">
                                <span id="crosstalkValue" style="color: #e0e0e0; font-size: 0.9em;">-70 dB</span>
                            </div>
                            
                            <div style="background: rgba(0,170,255,0.1); padding: 15px; border-radius: 10px;">
                                <h4 style="color: #00aaff;">System Parameters</h4>
                                <label style="color: #00ff88; font-size: 0.9em;">Optical Power (mW):</label>
                                <input type="range" id="opticalPower" min="-3" max="1" step="0.1" value="0" oninput="updateNoiseAnalysis()" style="width: 100%;">
                                <span id="powerValue" style="color: #e0e0e0; font-size: 0.9em;">1.0 mW</span>
                                
                                <label style="color: #00ff88; font-size: 0.9em; margin-top: 10px; display: block;">Q-Factor:</label>
                                <input type="range" id="qFactor" min="4" max="7" step="0.1" value="6.2" oninput="updateNoiseAnalysis()" style="width: 100%;">
                                <span id="qValue" style="color: #e0e0e0; font-size: 0.9em;">1.5×10⁶</span>
                                
                                <label style="color: #00ff88; font-size: 0.9em; margin-top: 10px; display: block;">Insertion Loss (dB):</label>
                                <input type="range" id="insertionLoss" min="0.5" max="3" step="0.1" value="1.13" oninput="updateNoiseAnalysis()" style="width: 100%;">
                                <span id="lossValue" style="color: #e0e0e0; font-size: 0.9em;">1.13 dB</span>
                            </div>
                            
                            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                                <h4 style="color: #00aaff;">ENOB Result</h4>
                                <div style="text-align: center; margin: 20px 0;">
                                    <div style="font-size: 3em; color: #00ff88; font-weight: bold;">
                                        <span id="enobResult">12.5</span>
                                    </div>
                                    <div style="color: #888; margin-top: 10px;">Effective Bits</div>
                                </div>
                                <div style="margin-top: 20px; font-size: 0.9em;">
                                    <div style="color: #888;">SNR: <span id="snrValue" style="color: #e0e0e0;">77.1 dB</span></div>
                                    <div style="color: #888;">Target: <span style="color: #00ff88;">12.5 bits</span></div>
                                    <div style="color: #888;">Max: <span style="color: #00aaff;">13.0 bits</span></div>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <canvas id="noiseBreakdownChart" height="250"></canvas>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                            <canvas id="enobVsPowerChart" height="200"></canvas>
                            <canvas id="noiseSpectrumChart" height="200"></canvas>
                        </div>
                    `;
                    initializeNoiseDemo();
                    break;
                    
                case 'scaling':
                    workspace.innerHTML = `
                        <h3 style="color: #00ff88;">System Scaling: Performance from 16×16 to 256×256 Arrays</h3>
                        <p style="color: #e0e0e0;">Analyzing how the 327 TOPS system scales with array size and wavelength channels</p>
                        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px; margin-top: 20px;">
                            <div>
                                <div style="background: rgba(0,255,136,0.1); padding: 15px; border-radius: 10px;">
                                    <h4 style="color: #00aaff;">Array Configuration</h4>
                                    <label style="color: #00ff88;">Array Size:</label>
                                    <input type="range" id="arraySize" min="4" max="8" step="1" value="5" oninput="updateScalingAnalysis()" style="width: 100%;">
                                    <span id="arraySizeValue" style="color: #e0e0e0;">32×32</span>
                                    
                                    <label style="color: #00ff88; margin-top: 10px; display: block;">WDM Channels:</label>
                                    <input type="range" id="wdmChannels" min="4" max="64" step="4" value="32" oninput="updateScalingAnalysis()" style="width: 100%;">
                                    <span id="channelsValue" style="color: #e0e0e0;">32 λ</span>
                                    
                                    <label style="color: #00ff88; margin-top: 10px; display: block;">Clock Rate:</label>
                                    <input type="range" id="clockRate" min="1" max="10" step="0.5" value="10" oninput="updateScalingAnalysis()" style="width: 100%;">
                                    <span id="clockValue" style="color: #e0e0e0;">10.0 GHz</span>
                                </div>
                                
                                <div style="background: rgba(0,170,255,0.1); padding: 15px; border-radius: 10px; margin-top: 15px;">
                                    <h4 style="color: #00aaff;">Performance</h4>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Peak TOPS:</small><br>
                                        <span id="peakTops" style="color: #00ff88; font-size: 1.5em;">327</span>
                                    </div>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Power:</small><br>
                                        <span id="totalPower" style="color: #00aaff;">0.8</span> W
                                    </div>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Efficiency:</small><br>
                                        <span id="efficiency" style="color: #00ff88;">2.4</span> fJ/op
                                    </div>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Area:</small><br>
                                        <span id="chipArea" style="color: #00aaff;">4</span> mm²
                                    </div>
                                </div>
                            </div>
                            <div>
                                <canvas id="scalingChart" height="250"></canvas>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                                    <canvas id="powerScalingChart" height="200"></canvas>
                                    <canvas id="areaScalingChart" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                    `;
                    initializeScalingDemo();
                    break;
                    
                case 'materials':
                    workspace.innerHTML = `
                        <h3 style="color: #00ff88;">PCM Material Comparison: Optimizing for 12.5-bit ENOB</h3>
                        <p style="color: #e0e0e0;">Comparing Sb₂S₃, GST, Sb₂Se₃, and GSST for mixed-precision computing</p>
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-top: 20px;">
                            <div>
                                <canvas id="materialsComparisonChart" height="300"></canvas>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                                    <canvas id="switchingChart" height="200"></canvas>
                                    <canvas id="enduranceChart" height="200"></canvas>
                                </div>
                            </div>
                            <div>
                                <div style="background: rgba(0,255,136,0.1); padding: 15px; border-radius: 10px;">
                                    <h4 style="color: #00aaff;">Selected Material</h4>
                                    <select id="materialSelect" onchange="updateMaterialAnalysis()" style="width: 100%; background: #1a1a2e; color: #e0e0e0; padding: 8px; margin-bottom: 15px;">
                                        <option value="sb2s3" selected>Sb₂S₃ (Recommended)</option>
                                        <option value="gst">Ge₂Sb₂Te₅ (GST)</option>
                                        <option value="sb2se3">Sb₂Se₃</option>
                                        <option value="gsst">Ge₂Sb₂Se₄Te (GSST)</option>
                                    </select>
                                    
                                    <div id="materialProperties" style="font-size: 0.9em;">
                                        <div style="margin: 8px 0;">
                                            <span style="color: #888;">Δn:</span>
                                            <span id="matDeltaN" style="color: #00ff88; float: right;">0.54</span>
                                        </div>
                                        <div style="margin: 8px 0;">
                                            <span style="color: #888;">Loss (dB/cm):</span>
                                            <span id="matLoss" style="color: #00ff88; float: right;">0.01</span>
                                        </div>
                                        <div style="margin: 8px 0;">
                                            <span style="color: #888;">Levels:</span>
                                            <span id="matLevels" style="color: #00ff88; float: right;">32</span>
                                        </div>
                                        <div style="margin: 8px 0;">
                                            <span style="color: #888;">Speed:</span>
                                            <span id="matSpeed" style="color: #00ff88; float: right;">100 ns</span>
                                        </div>
                                        <div style="margin: 8px 0;">
                                            <span style="color: #888;">Endurance:</span>
                                            <span id="matEndurance" style="color: #00ff88; float: right;">10⁹</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="background: rgba(0,170,255,0.1); padding: 15px; border-radius: 10px; margin-top: 15px;">
                                    <h4 style="color: #00aaff;">Performance Impact</h4>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Achievable ENOB:</small><br>
                                        <span id="achievableENOB" style="color: #00ff88; font-size: 1.3em;">12.5 bits</span>
                                    </div>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Q-Factor Impact:</small><br>
                                        <span id="qImpact" style="color: #00aaff;">1.5×10⁶</span>
                                    </div>
                                    <div style="margin: 10px 0;">
                                        <small style="color: #888;">Energy/Switch:</small><br>
                                        <span id="switchEnergy" style="color: #00aaff;">50 pJ</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    initializeMaterialsDemo();
                    break;
                    
                default:
                    workspace.innerHTML = `<p style="color: #888;">Demo "${demoType}" not found</p>`;
            }
        }
        
        // Complete implementation functions for all demos
        function initializeResonatorDemo() {
            updateResonatorDemo();
            
            // Main resonator transmission chart
            const ctx = document.getElementById('resonatorDemoChart');
            if (ctx) {
                const wavelengths = [];
                const transmission = [];
                for (let i = 1540; i <= 1560; i += 0.1) {
                    wavelengths.push(i);
                    // Simulate resonance dip
                    const resonance = 1550 + parseFloat(document.getElementById('demoPhase').value) * 2;
                    const t = 1 - 0.9 * Math.exp(-Math.pow((i - resonance) / 2, 2));
                    transmission.push(t);
                }
                
                new Chart(ctx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: wavelengths,
                        datasets: [{
                            label: 'Transmission',
                            data: transmission,
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0,255,136,0.1)',
                            borderWidth: 2,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { labels: { color: '#e0e0e0' } },
                            title: {
                                display: true,
                                text: 'Ring Resonator Spectral Response',
                                color: '#00aaff'
                            }
                        },
                        scales: {
                            x: {
                                title: { display: true, text: 'Wavelength (nm)', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            },
                            y: {
                                title: { display: true, text: 'Transmission', color: '#e0e0e0' },
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            }
                        }
                    }
                });
            }
        }
        
        function updateResonatorDemo() {
            const pcmLevel = parseInt(document.getElementById('pcmState').value);
            const eoLevel = parseInt(document.getElementById('eoVoltage').value);
            
            // Update display values
            document.getElementById('pcmValue').textContent = `Level ${pcmLevel}/31`;
            document.getElementById('eoValue').textContent = `Level ${eoLevel}/255`;
            
            // Calculate actual values
            const deltaIndex = (pcmLevel / 31) * 0.54;
            const biasVoltage = (eoLevel / 255) * 5;
            
            document.getElementById('deltaIndex').textContent = deltaIndex.toFixed(3);
            document.getElementById('biasV').textContent = biasVoltage.toFixed(2);
            
            // Calculate combined weight value (13-bit precision)
            const weightValue = (pcmLevel * 256 + eoLevel) / 8191;
            document.getElementById('weightValue').textContent = weightValue.toFixed(4);
            
            // Calculate ENOB considering noise
            const snr = 77.1 - (31 - pcmLevel) * 0.5; // SNR degrades with phase state
            const enob = (snr - 1.76) / 6.02;
            document.getElementById('totalBits').textContent = enob.toFixed(1);
            
            // Update resonator transmission if chart exists
            if (window.resonatorDemoChart) {
                const wavelengths = [];
                const transmission = [];
                const resonance = 1550 + deltaIndex * 3.7 + biasVoltage * 0.1;
                
                for (let i = 1540; i <= 1560; i += 0.05) {
                    wavelengths.push(i);
                    const detuning = (i - resonance) / 0.01; // FSR = 10pm
                    const t = 1 - 0.95 / (1 + detuning * detuning);
                    transmission.push(t);
                }
                
                window.resonatorDemoChart.data.labels = wavelengths;
                window.resonatorDemoChart.data.datasets[0].data = transmission;
                window.resonatorDemoChart.update();
            }
        }
        
        function initializePDEDemo() {
            solvePDE();
        }
        
        function solvePDE() {
            const gridSize = parseInt(document.getElementById('pdeGridSize').value);
            const precision = parseInt(document.getElementById('photonicBits').value);
            const problemType = document.getElementById('problemType').value;
            
            document.getElementById('precisionValue').textContent = precision + ' bits';
            
            // Build system matrix (Laplacian)
            const n = gridSize * gridSize;
            const h = 1.0 / (gridSize + 1);
            
            // Simulate mixed-precision iterative refinement
            let iterations = Math.ceil(50 / precision); // More precision = fewer iterations
            const error = Math.pow(2, -precision) * 0.01;
            
            // Calculate performance metrics
            const opsPerIteration = 2 * n * n; // Matrix-vector multiply
            const totalOps = iterations * opsPerIteration;
            const tops = (totalOps / 1e12) * 10; // At 10GHz
            const energy = totalOps * 2.4e-15 * 1e12; // 2.4 fJ/op in pJ
            
            // Update metrics display
            document.getElementById('iterations').textContent = iterations;
            document.getElementById('convergenceError').textContent = error.toExponential(2);
            document.getElementById('photOps').textContent = tops.toFixed(1);
            document.getElementById('energyUsed').textContent = energy.toFixed(2);
            
            // Generate solution visualization
            const ctx = document.getElementById('pdeSolutionChart');
            if (ctx) {
                // Generate 2D solution data
                const solution = [];
                for (let i = 0; i < gridSize; i++) {
                    for (let j = 0; j < gridSize; j++) {
                        const x = i / gridSize;
                        const y = j / gridSize;
                        let value;
                        
                        switch(problemType) {
                            case 'heat':
                                value = Math.sin(Math.PI * x) * Math.sin(Math.PI * y);
                                break;
                            case 'electrostatic':
                                value = x * (1 - x) * y * (1 - y);
                                break;
                            case 'membrane':
                                value = Math.sin(2 * Math.PI * x) * Math.sin(2 * Math.PI * y);
                                break;
                        }
                        
                        // Add quantization noise
                        const quantNoise = (Math.random() - 0.5) * Math.pow(2, -precision);
                        solution.push(value + quantNoise);
                    }
                }
                
                // Create heatmap visualization
                if (!window.pdeSolutionChart) {
                    window.pdeSolutionChart = new Chart(ctx.getContext('2d'), {
                        type: 'scatter',
                        data: {
                            datasets: [{
                                label: 'Solution',
                                data: [],
                                backgroundColor: '#00ff88',
                                pointRadius: gridSize > 32 ? 2 : 4
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                title: {
                                    display: true,
                                    text: 'PDE Solution (Photonic Computation)',
                                    color: '#00aaff'
                                },
                                legend: { display: false }
                            },
                            scales: {
                                x: {
                                    type: 'linear',
                                    position: 'bottom',
                                    title: { display: true, text: 'X', color: '#e0e0e0' },
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                },
                                y: {
                                    title: { display: true, text: 'Y', color: '#e0e0e0' },
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                }
                            }
                        }
                    });
                }
                
                // Update chart data
                const chartData = [];
                for (let i = 0; i < gridSize; i++) {
                    for (let j = 0; j < gridSize; j++) {
                        chartData.push({
                            x: i / gridSize,
                            y: j / gridSize,
                            r: Math.abs(solution[i * gridSize + j]) * 10
                        });
                    }
                }
                window.pdeSolutionChart.data.datasets[0].data = chartData;
                window.pdeSolutionChart.update();
            }
            
            // Generate convergence chart
            const convCtx = document.getElementById('convergenceChart');
            if (convCtx) {
                const convData = [];
                for (let i = 0; i <= iterations; i++) {
                    convData.push(Math.pow(10, -i * precision / iterations));
                }
                
                if (!window.pdeConvergenceChart) {
                    window.pdeConvergenceChart = new Chart(convCtx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: Array.from({length: iterations + 1}, (_, i) => i),
                            datasets: [{
                                label: 'Residual Error',
                                data: convData,
                                borderColor: '#00ff88',
                                backgroundColor: 'rgba(0,255,136,0.1)',
                                borderWidth: 2
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                title: {
                                    display: true,
                                    text: 'Convergence History',
                                    color: '#00aaff'
                                }
                            },
                            scales: {
                                y: {
                                    type: 'logarithmic',
                                    title: { display: true, text: 'Error', color: '#e0e0e0' },
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                },
                                x: {
                                    title: { display: true, text: 'Iteration', color: '#e0e0e0' },
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                }
                            }
                        }
                    });
                } else {
                    window.pdeConvergenceChart.data.labels = Array.from({length: iterations + 1}, (_, i) => i);
                    window.pdeConvergenceChart.data.datasets[0].data = convData;
                    window.pdeConvergenceChart.update();
                }
            }
        }
        
        function initializeConvergenceDemo() {
            runConvergenceTest();
        }
        
        function runConvergenceTest() {
            const condNum = Math.pow(10, parseFloat(document.getElementById('conditionNumber').value));
            const size = parseInt(document.getElementById('convergenceSize').value);
            
            document.getElementById('condValue').textContent = `10^${document.getElementById('conditionNumber').value}`;
            
            // Simulate convergence for different precision levels
            const precisions = [4, 6, 8, 10];
            const colors = ['#ff6b6b', '#ffaa00', '#00aaff', '#00ff88'];
            const datasets = [];
            
            precisions.forEach((bits, idx) => {
                const iterations = Math.ceil(condNum * Math.log10(size) / bits);
                const data = [];
                
                for (let i = 0; i <= iterations; i++) {
                    const error = Math.pow(10, -i * bits / iterations);
                    data.push({x: i, y: error});
                }
                
                datasets.push({
                    label: `${bits}-bit precision`,
                    data: data,
                    borderColor: colors[idx],
                    backgroundColor: colors[idx] + '20',
                    borderWidth: 2,
                    pointRadius: 0
                });
                
                // Update results summary
                const resultSpans = document.querySelectorAll('#convergenceResults span');
                if (resultSpans[idx]) {
                    resultSpans[idx].textContent = `${iterations} iterations`;
                }
            });
            
            const ctx = document.getElementById('convergenceDemoChart');
            if (ctx) {
                if (!window.convergenceTestChart) {
                    window.convergenceTestChart = new Chart(ctx.getContext('2d'), {
                        type: 'line',
                        data: { datasets: datasets },
                        options: {
                            responsive: true,
                            plugins: {
                                title: {
                                    display: true,
                                    text: 'Convergence Rate vs Photonic Precision',
                                    color: '#00aaff'
                                },
                                legend: {
                                    labels: { color: '#e0e0e0' }
                                }
                            },
                            scales: {
                                x: {
                                    type: 'linear',
                                    title: { display: true, text: 'Iterations', color: '#e0e0e0' },
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                },
                                y: {
                                    type: 'logarithmic',
                                    title: { display: true, text: 'Relative Error', color: '#e0e0e0' },
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                }
                            }
                        }
                    });
                } else {
                    window.convergenceTestChart.data.datasets = datasets;
                    window.convergenceTestChart.update();
                }
            }
        }
        
        function updateConvergence() {
            document.getElementById('condValue').textContent = `10^${document.getElementById('conditionNumber').value}`;
        }
        
        function initializeNoiseDemo() {
            updateNoiseAnalysis();
        }
        
        function updateNoiseAnalysis() {
            // Get all noise parameters
            const rin = parseFloat(document.getElementById('rinNoise').value);
            const temp = parseFloat(document.getElementById('temperature').value);
            const crosstalk = parseFloat(document.getElementById('crosstalk').value);
            const powerLog = parseFloat(document.getElementById('opticalPower').value);
            const qLog = parseFloat(document.getElementById('qFactor').value);
            const loss = parseFloat(document.getElementById('insertionLoss').value);
            
            // Update displays
            document.getElementById('rinValue').textContent = `${rin} dBc/Hz`;
            document.getElementById('tempValue').textContent = `${temp} K`;
            document.getElementById('crosstalkValue').textContent = `${crosstalk} dB`;
            document.getElementById('powerValue').textContent = `${Math.pow(10, powerLog).toFixed(2)} mW`;
            document.getElementById('qValue').textContent = `${(Math.pow(10, qLog)/1000).toFixed(1)}×10³`;
            document.getElementById('lossValue').textContent = `${loss} dB`;
            
            // Calculate SNR components
            const powerMw = Math.pow(10, powerLog);
            const rinContribution = -rin / 10;
            const thermalNoise = 10 * Math.log10(temp / 300);
            const crosstalkPenalty = -crosstalk / 10;
            const insertionPenalty = loss;
            
            // Total SNR
            const snr = 10 * Math.log10(powerMw) + 30 - rinContribution - thermalNoise - crosstalkPenalty - insertionPenalty;
            const enob = (snr - 1.76) / 6.02;
            
            document.getElementById('snrValue').textContent = `${snr.toFixed(1)} dB`;
            document.getElementById('enobResult').textContent = enob.toFixed(1);
            
            // Noise breakdown chart
            const ctx = document.getElementById('noiseBreakdownChart');
            if (ctx) {
                const noiseData = [
                    Math.abs(rinContribution),
                    thermalNoise,
                    Math.abs(crosstalkPenalty),
                    insertionPenalty,
                    1 // Shot noise (fixed)
                ];
                
                if (!window.noiseBreakdownChart) {
                    window.noiseBreakdownChart = new Chart(ctx.getContext('2d'), {
                        type: 'bar',
                        data: {
                            labels: ['RIN', 'Thermal', 'Crosstalk', 'Insertion Loss', 'Shot'],
                            datasets: [{
                                label: 'Noise Contribution (dB)',
                                data: noiseData,
                                backgroundColor: ['#ff6b6b', '#ffaa00', '#00aaff', '#00ff88', '#ff00ff']
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                title: {
                                    display: true,
                                    text: 'Noise Source Breakdown',
                                    color: '#00aaff'
                                },
                                legend: { display: false }
                            },
                            scales: {
                                y: {
                                    title: { display: true, text: 'Impact (dB)', color: '#e0e0e0' },
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                },
                                x: {
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                }
                            }
                        }
                    });
                } else {
                    window.noiseBreakdownChart.data.datasets[0].data = noiseData;
                    window.noiseBreakdownChart.update();
                }
            }
        }
        
        function initializeScalingDemo() {
            updateScalingAnalysis();
        }
        
        function updateScalingAnalysis() {
            const sizeExp = parseInt(document.getElementById('arraySize').value);
            const arraySize = Math.pow(2, sizeExp);
            const channels = parseInt(document.getElementById('wdmChannels').value);
            const clockRate = parseFloat(document.getElementById('clockRate').value);
            
            document.getElementById('arraySizeValue').textContent = `${arraySize}×${arraySize}`;
            document.getElementById('channelsValue').textContent = `${channels} λ`;
            document.getElementById('clockValue').textContent = `${clockRate.toFixed(1)} GHz`;
            
            // Calculate performance metrics
            const ops = 2 * arraySize * arraySize * channels * clockRate * 1e9;
            const tops = ops / 1e12;
            const power = 0.025 * arraySize + 0.01 * channels + 0.5; // W
            const efficiency = (ops * 1e-15) / power * 1000; // fJ/op
            const area = Math.sqrt(arraySize) * 0.5 + channels * 0.02; // mm²
            
            document.getElementById('peakTops').textContent = tops.toFixed(0);
            document.getElementById('totalPower').textContent = power.toFixed(2);
            document.getElementById('efficiency').textContent = efficiency.toFixed(1);
            document.getElementById('chipArea').textContent = area.toFixed(1);
            
            // Scaling chart
            const ctx = document.getElementById('scalingChart');
            if (ctx) {
                const sizes = [16, 32, 64, 128, 256];
                const topsData = sizes.map(s => 2 * s * s * channels * clockRate / 1000);
                
                if (!window.scalingChart) {
                    window.scalingChart = new Chart(ctx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: sizes.map(s => `${s}×${s}`),
                            datasets: [{
                                label: 'Performance (TOPS)',
                                data: topsData,
                                borderColor: '#00ff88',
                                backgroundColor: 'rgba(0,255,136,0.1)',
                                borderWidth: 2
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                title: {
                                    display: true,
                                    text: 'Performance Scaling with Array Size',
                                    color: '#00aaff'
                                }
                            },
                            scales: {
                                y: {
                                    title: { display: true, text: 'TOPS', color: '#e0e0e0' },
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                },
                                x: {
                                    title: { display: true, text: 'Array Size', color: '#e0e0e0' },
                                    ticks: { color: '#e0e0e0' },
                                    grid: { color: 'rgba(255,255,255,0.1)' }
                                }
                            }
                        }
                    });
                } else {
                    window.scalingChart.data.datasets[0].data = topsData;
                    window.scalingChart.update();
                }
            }
        }
        
        function initializeMaterialsDemo() {
            updateMaterialAnalysis();
            
            // Create comparison chart
            const ctx = document.getElementById('materialsComparisonChart');
            if (ctx) {
                window.materialsChart = new Chart(ctx.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['Δn Index', 'Low Loss', 'Levels', 'Speed', 'Endurance', 'ENOB'],
                        datasets: [
                            {
                                label: 'Sb₂S₃',
                                data: [54, 99, 100, 75, 90, 95],
                                borderColor: '#00ff88',
                                backgroundColor: 'rgba(0,255,136,0.2)'
                            },
                            {
                                label: 'GST',
                                data: [100, 20, 50, 90, 30, 70],
                                borderColor: '#ff6b6b',
                                backgroundColor: 'rgba(255,107,107,0.2)'
                            },
                            {
                                label: 'Sb₂Se₃',
                                data: [76, 100, 100, 60, 90, 90],
                                borderColor: '#00aaff',
                                backgroundColor: 'rgba(0,170,255,0.2)'
                            },
                            {
                                label: 'GSST',
                                data: [85, 70, 100, 50, 70, 85],
                                borderColor: '#ffaa00',
                                backgroundColor: 'rgba(255,170,0,0.2)'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            title: {
                                display: true,
                                text: 'PCM Material Properties Comparison',
                                color: '#00aaff'
                            },
                            legend: {
                                labels: { color: '#e0e0e0' }
                            }
                        },
                        scales: {
                            r: {
                                angleLines: { color: 'rgba(255,255,255,0.1)' },
                                grid: { color: 'rgba(255,255,255,0.1)' },
                                pointLabels: { color: '#e0e0e0' },
                                ticks: { 
                                    color: '#e0e0e0',
                                    backdropColor: 'transparent'
                                }
                            }
                        }
                    }
                });
            }
        }
        
        function updateMaterialAnalysis() {
            const material = document.getElementById('materialSelect').value;
            const materials = {
                'sb2s3': { deltaN: 0.54, loss: 0.01, levels: 32, speed: 100, endurance: '10⁹', enob: 12.5, q: '1.5×10⁶', energy: 50 },
                'gst': { deltaN: 2.74, loss: 1.0, levels: 16, speed: 50, endurance: '10⁶', enob: 10.2, q: '5×10⁵', energy: 100 },
                'sb2se3': { deltaN: 0.76, loss: 0.0, levels: 32, speed: 150, endurance: '10⁹', enob: 12.0, q: '1.3×10⁶', energy: 60 },
                'gsst': { deltaN: 1.8, loss: 0.2, levels: 64, speed: 200, endurance: '10⁸', enob: 11.5, q: '8×10⁵', energy: 80 }
            };
            
            const mat = materials[material];
            document.getElementById('matDeltaN').textContent = mat.deltaN;
            document.getElementById('matLoss').textContent = mat.loss;
            document.getElementById('matLevels').textContent = mat.levels;
            document.getElementById('matSpeed').textContent = `${mat.speed} ns`;
            document.getElementById('matEndurance').textContent = mat.endurance;
            document.getElementById('achievableENOB').textContent = `${mat.enob} bits`;
            document.getElementById('qImpact').textContent = mat.q;
            document.getElementById('switchEnergy').textContent = `${mat.energy} pJ`;
        }
        
        function initializeBenchmarkCharts() {
            const ctx = document.getElementById('benchmarkComparisonChart');
            if (ctx && !window.benchmarkChart) {
                window.benchmarkChart = new Chart(ctx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['Our System', 'NVIDIA A100', 'Google TPU v4', 'Cerebras WSE-2'],
                        datasets: [{
                            label: 'Performance (TOPS)',
                            data: [327, 312, 275, 750],
                            backgroundColor: ['#00ff88', '#ff6b6b', '#00aaff', '#ffaa00']
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { labels: { color: '#e0e0e0' } }
                        },
                        scales: {
                            y: {
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            },
                            x: {
                                ticks: { color: '#e0e0e0' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            }
                        }
                    }
                });
            }
        }
        
        function showNotification(message, type) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${type === 'success' ? 'linear-gradient(45deg, #00ff88, #00aaff)' : 'linear-gradient(45deg, #00aaff, #0088ff)'};
                color: #0a0e27;
                border-radius: 10px;
                font-weight: bold;
                z-index: 10000;
                animation: slideIn 0.3s ease;
                box-shadow: 0 5px 20px rgba(0,255,136,0.4);
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeSimulation();
            updatePerformanceMetrics();
            
            // Verify all tabs are present
            const tabs = ['simulation', 'theory', 'technical', 'demos', 'benchmarks', 
                         'architecture', 'analysis', 'materials', 'code'];
            tabs.forEach(tab => {
                const element = document.getElementById(tab + '-tab');
                if (!element) {
                    console.error('Missing tab content:', tab + '-tab');
                } else {
                    console.log('Tab found:', tab);
                }
            });
            
            // Ensure MathJax processes the content if available
            if (window.MathJax && window.MathJax.typesetPromise) {
                MathJax.typesetPromise().catch((e) => console.log('MathJax processing error:', e));
            }
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT Robotics in Manufacturing - V2 Enhanced Implementation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: #e0e0e0;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            z-index: 1000;
            padding: 1rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #e0e0e0;
            text-decoration: none;
            transition: all 0.3s;
            position: relative;
        }

        .nav-links a:hover {
            color: #00ff88;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #00ff88, #0088ff);
            transition: width 0.3s;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            margin-top: 80px;
            padding: 4rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 50%, rgba(0, 255, 136, 0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #00ff88, #0088ff, #ff0088);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s ease infinite;
            background-size: 200% 200%;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: #888;
            margin-bottom: 2rem;
        }

        .hero-badges {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .badge {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .badge:hover {
            background: rgba(0, 255, 136, 0.1);
            border-color: #00ff88;
            transform: translateY(-2px);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Section Styles */
        .section {
            margin-bottom: 4rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section-title i {
            color: #00ff88;
        }

        /* Cards */
        .card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(0, 255, 136, 0.3);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0, 255, 136, 0.1);
        }

        /* Grid Layouts */
        .grid {
            display: grid;
            gap: 2rem;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        }

        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        /* Interactive Elements */
        .btn {
            background: linear-gradient(45deg, #00ff88, #0088ff);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: #00ff88;
        }

        /* Input Styles */
        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #aaa;
            font-size: 0.9rem;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #00ff88;
            background: rgba(255, 255, 255, 0.08);
        }

        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        /* Metric Cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
        }

        .metric-card:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-3px);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metric-label {
            color: #888;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .metric-change {
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }

        .metric-change.positive {
            color: #00ff88;
        }

        .metric-change.negative {
            color: #ff4444;
        }

        /* Charts Container */
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 2rem;
        }

        .chart-container canvas {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            padding: 1rem;
        }

        /* 3D Visualization */
        .visualization-3d {
            width: 100%;
            height: 500px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        /* Status Indicators */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.85rem;
        }

        .status-indicator.online {
            background: rgba(0, 255, 136, 0.1);
            color: #00ff88;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .status-indicator.warning {
            background: rgba(255, 170, 0, 0.1);
            color: #ffaa00;
            border: 1px solid rgba(255, 170, 0, 0.3);
        }

        .status-indicator.error {
            background: rgba(255, 68, 68, 0.1);
            color: #ff4444;
            border: 1px solid rgba(255, 68, 68, 0.3);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Terminal/Console */
        .console {
            background: #0a0a0a;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .console-line {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: flex-start;
        }

        .console-timestamp {
            color: #666;
            margin-right: 1rem;
            min-width: 150px;
        }

        .console-message {
            flex: 1;
        }

        .console-message.info {
            color: #0088ff;
        }

        .console-message.success {
            color: #00ff88;
        }

        .console-message.warning {
            color: #ffaa00;
        }

        .console-message.error {
            color: #ff4444;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab {
            padding: 1rem 1.5rem;
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .tab:hover {
            color: #e0e0e0;
        }

        .tab.active {
            color: #00ff88;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #00ff88, #0088ff);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Progress Bars */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #0088ff);
            border-radius: 4px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: rgba(0, 0, 0, 0.9);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 0.5rem;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: #00ff88;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }

            .nav-links {
                display: none;
            }

            .tabs {
                overflow-x: auto;
            }
        }

        /* Demo Specific Styles */
        .demo-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .demo-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .robot-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .robot-status-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .semi-message {
            background: rgba(0, 136, 255, 0.1);
            border: 1px solid rgba(0, 136, 255, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            font-family: monospace;
        }

        .timing-diagram {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .cleanroom-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .cleanroom-metric {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .cleanroom-metric.alert {
            border-color: rgba(255, 68, 68, 0.5);
            animation: alertPulse 2s infinite;
        }

        @keyframes alertPulse {
            0%, 100% { background: rgba(255, 255, 255, 0.03); }
            50% { background: rgba(255, 68, 68, 0.1); }
        }

        .prediction-interval {
            background: rgba(0, 255, 136, 0.05);
            border-left: 3px solid #00ff88;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }

        .uncertainty-bar {
            height: 30px;
            background: linear-gradient(90deg, 
                rgba(0, 255, 136, 0.8) 0%, 
                rgba(0, 255, 136, 0.5) 25%,
                rgba(255, 170, 0, 0.5) 50%,
                rgba(255, 68, 68, 0.5) 75%,
                rgba(255, 68, 68, 0.8) 100%);
            border-radius: 15px;
            position: relative;
            margin: 1rem 0;
        }

        .uncertainty-marker {
            position: absolute;
            top: -10px;
            width: 2px;
            height: 50px;
            background: white;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-robot"></i> IoT Robotics V2
            </div>
            <ul class="nav-links">
                <li><a href="#overview">Overview</a></li>
                <li><a href="#deterministic">Deterministic Control</a></li>
                <li><a href="#semi">SEMI Integration</a></li>
                <li><a href="#ml">Predictive ML</a></li>
                <li><a href="#monitoring">Monitoring</a></li>
                <li><a href="#deployment">Deployment</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero">
        <h1>IoT Robotics in Manufacturing</h1>
        <p class="hero-subtitle">V2 Enhanced Implementation - Deterministic Control for Semiconductor Fabs</p>
        <div class="hero-badges">
            <span class="badge"><i class="fas fa-clock"></i> <1ms Latency</span>
            <span class="badge"><i class="fas fa-microchip"></i> SEMI Compliant</span>
            <span class="badge"><i class="fas fa-brain"></i> Bayesian ML</span>
            <span class="badge"><i class="fas fa-shield-alt"></i> TSN/PTP</span>
            <span class="badge"><i class="fas fa-chart-line"></i> 99.99% Uptime</span>
            <span class="badge"><i class="fas fa-industry"></i> Production Ready</span>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Executive Summary -->
        <section id="overview" class="section">
            <h2 class="section-title">
                <i class="fas fa-info-circle"></i>
                Executive Summary
            </h2>
            <div class="card">
                <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 1.5rem;">
                    V2 transforms the system into a <strong>deterministic, standards-compliant nervous system</strong> for semiconductor fabs 
                    with <strong>sub-millisecond control latency</strong>, native <strong>SEMI integration</strong>, and 
                    <strong>probabilistic maintenance</strong> with calibrated uncertainty.
                </p>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">0.8ms</div>
                        <div class="metric-label">P99 Latency</div>
                        <div class="metric-change positive">↓ 95% improvement</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">327</div>
                        <div class="metric-label">TeraOPS</div>
                        <div class="metric-change positive">↑ 42% throughput</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">99.99%</div>
                        <div class="metric-label">Uptime SLA</div>
                        <div class="metric-change positive">↑ 0.9% improvement</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">±2.3h</div>
                        <div class="metric-label">RUL Accuracy</div>
                        <div class="metric-change positive">↓ 68% uncertainty</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Deterministic Real-Time Control -->
        <section id="deterministic" class="section">
            <h2 class="section-title">
                <i class="fas fa-stopwatch"></i>
                Deterministic Real-Time Control (TSN/PTP)
            </h2>
            
            <!-- Time Synchronization Demo -->
            <div class="card">
                <h3 style="margin-bottom: 1.5rem;">
                    <i class="fas fa-sync"></i> Time Synchronization Monitor
                </h3>
                
                <div class="demo-container">
                    <div class="demo-controls">
                        <div class="input-group">
                            <label>Grandmaster Clock</label>
                            <select id="grandmaster-select">
                                <option value="gps">GPS (Stratum 0)</option>
                                <option value="atomic">Atomic Clock</option>
                                <option value="ntp">NTP Server</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Network Load (%)</label>
                            <input type="range" id="network-load" min="0" max="100" value="30">
                            <span id="network-load-value">30%</span>
                        </div>
                        <div class="input-group">
                            <label>TSN Priority</label>
                            <select id="tsn-priority">
                                <option value="control">Control (TC0)</option>
                                <option value="telemetry">Telemetry (TC1)</option>
                                <option value="besteffort">Best Effort (TC2)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="timing-diagram">
                        <canvas id="timing-chart" style="width: 100%; height: 300px;"></canvas>
                    </div>
                    
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="sync-offset">0.0</div>
                            <div class="metric-label">Sync Offset (μs)</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="path-delay">0.0</div>
                            <div class="metric-label">Path Delay (μs)</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="jitter">0.0</div>
                            <div class="metric-label">Jitter (ns)</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="packet-loss">0.00</div>
                            <div class="metric-label">Packet Loss (%)</div>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="window.startTimeSyncDemo()">
                        <i class="fas fa-play"></i> Start PTP Synchronization
                    </button>
                    <button class="btn btn-secondary" onclick="window.stopTimeSyncDemo()">
                        <i class="fas fa-stop"></i> Stop
                    </button>
                </div>
            </div>

            <!-- Time Budget Management -->
            <div class="card">
                <h3 style="margin-bottom: 1.5rem;">
                    <i class="fas fa-tasks"></i> Time Budget Management
                </h3>
                
                <div class="demo-container">
                    <div id="budget-visualization"></div>
                    
                    <div class="console" id="budget-console">
                        <div class="console-line">
                            <span class="console-timestamp">2024-01-15 10:23:45.123</span>
                            <span class="console-message info">[INFO] Time budget manager initialized</span>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="window.runBudgetTest()">
                        <i class="fas fa-vial"></i> Run Budget Test
                    </button>
                </div>
            </div>
        </section>

        <!-- SEMI Standards Integration -->
        <section id="semi" class="section">
            <h2 class="section-title">
                <i class="fas fa-plug"></i>
                SEMI Standards Integration
            </h2>
            
            <!-- GEM/SECS Communication -->
            <div class="card">
                <h3 style="margin-bottom: 1.5rem;">
                    <i class="fas fa-exchange-alt"></i> GEM/SECS Communication Monitor
                </h3>
                
                <div class="tabs">
                    <button class="tab active" onclick="window.switchSEMITab('messages')">Messages</button>
                    <button class="tab" onclick="window.switchSEMITab('events')">Collection Events</button>
                    <button class="tab" onclick="window.switchSEMITab('alarms')">Alarms</button>
                    <button class="tab" onclick="window.switchSEMITab('variables')">Variables</button>
                </div>
                
                <div class="tab-content active" id="semi-messages">
                    <div class="demo-container">
                        <div class="console" id="semi-console" style="height: 400px;">
                            <!-- SEMI messages will be displayed here -->
                        </div>
                        
                        <div class="demo-controls">
                            <button class="btn" onclick="window.sendSEMICommand('START')">
                                <i class="fas fa-play"></i> Send START
                            </button>
                            <button class="btn btn-secondary" onclick="window.sendSEMICommand('STOP')">
                                <i class="fas fa-stop"></i> Send STOP
                            </button>
                            <button class="btn btn-secondary" onclick="window.sendSEMICommand('STATUS')">
                                <i class="fas fa-info"></i> Request Status
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="semi-events">
                    <div class="chart-container">
                        <canvas id="events-chart"></canvas>
                    </div>
                </div>
                
                <div class="tab-content" id="semi-alarms">
                    <div id="alarms-list"></div>
                </div>
                
                <div class="tab-content" id="semi-variables">
                    <div id="variables-grid"></div>
                </div>
            </div>

            <!-- EDA/Interface A -->
            <div class="card">
                <h3 style="margin-bottom: 1.5rem;">
                    <i class="fas fa-stream"></i> EDA Data Collection Plans
                </h3>
                
                <div class="demo-container">
                    <div id="dcp-visualization"></div>
                    
                    <div class="demo-controls">
                        <div class="input-group">
                            <label>DCP Name</label>
                            <input type="text" id="dcp-name" value="CleanroomMonitoring">
                        </div>
                        <div class="input-group">
                            <label>Sample Rate (ms)</label>
                            <input type="number" id="dcp-rate" value="100" min="10" max="1000">
                        </div>
                        <button class="btn" onclick="window.createDCP()">
                            <i class="fas fa-plus"></i> Create DCP
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Probabilistic RUL Prediction -->
        <section id="ml" class="section">
            <h2 class="section-title">
                <i class="fas fa-brain"></i>
                Probabilistic RUL with Conformal Prediction
            </h2>
            
            <!-- Bayesian LSTM Demo -->
            <div class="card">
                <h3 style="margin-bottom: 1.5rem;">
                    <i class="fas fa-chart-line"></i> Remaining Useful Life Prediction
                </h3>
                
                <div class="demo-container">
                    <div class="demo-controls">
                        <div class="input-group">
                            <label>Equipment ID</label>
                            <select id="equipment-select">
                                <option value="robot-001">Robot ARM-001</option>
                                <option value="robot-002">Robot ARM-002</option>
                                <option value="conveyor-001">Conveyor-001</option>
                                <option value="pump-001">Vacuum Pump-001</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Confidence Level</label>
                            <select id="confidence-level">
                                <option value="0.90">90%</option>
                                <option value="0.95" selected>95%</option>
                                <option value="0.99">99%</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Vibration Level (g)</label>
                            <input type="range" id="vibration-level" min="0" max="2" step="0.1" value="0.5">
                            <span id="vibration-value">0.5g</span>
                        </div>
                    </div>
                    
                    <div id="rul-prediction-chart" style="height: 400px;"></div>
                    
                    <div class="prediction-interval">
                        <h4>Prediction Interval (95% Confidence)</h4>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
                            <div>
                                <strong>Lower Bound:</strong> <span id="rul-lower">245</span> hours
                            </div>
                            <div>
                                <strong>Point Estimate:</strong> <span id="rul-estimate" style="font-size: 1.5rem; color: #00ff88;">327</span> hours
                            </div>
                            <div>
                                <strong>Upper Bound:</strong> <span id="rul-upper">412</span> hours
                            </div>
                        </div>
                        <div class="uncertainty-bar" style="margin-top: 1.5rem;">
                            <div class="uncertainty-marker" id="rul-marker" style="left: 50%;"></div>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="window.runRULPrediction()">
                        <i class="fas fa-calculator"></i> Run Prediction
                    </button>
                    <button class="btn btn-secondary" onclick="window.recalibrateModel()">
                        <i class="fas fa-sync"></i> Recalibrate Model
                    </button>
                </div>
            </div>

            <!-- Uncertainty Quantification -->
            <div class="card">
                <h3 style="margin-bottom: 1.5rem;">
                    <i class="fas fa-question-circle"></i> Uncertainty Quantification
                </h3>
                
                <div class="grid grid-2">
                    <div>
                        <div id="uncertainty-heatmap"></div>
                    </div>
                    <div>
                        <div id="calibration-plot"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cleanroom Monitoring -->
        <section id="monitoring" class="section">
            <h2 class="section-title">
                <i class="fas fa-tachometer-alt"></i>
                Real-Time Cleanroom Monitoring
            </h2>
            
            <div class="card">
                <div class="cleanroom-grid">
                    <div class="cleanroom-metric" id="particle-metric">
                        <h4><i class="fas fa-dust"></i> Particle Count</h4>
                        <div class="metric-value" id="particle-count">152</div>
                        <div class="metric-label">particles/m³</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="particle-progress" style="width: 30%;"></div>
                        </div>
                        <div class="status-indicator online">
                            <span class="status-dot"></span>
                            ISO Class 5
                        </div>
                    </div>
                    
                    <div class="cleanroom-metric" id="airflow-metric">
                        <h4><i class="fas fa-wind"></i> Airflow Velocity</h4>
                        <div class="metric-value" id="airflow-velocity">0.52</div>
                        <div class="metric-label">m/s</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="airflow-progress" style="width: 65%;"></div>
                        </div>
                        <div class="status-indicator online">
                            <span class="status-dot"></span>
                            Normal
                        </div>
                    </div>
                    
                    <div class="cleanroom-metric" id="humidity-metric">
                        <h4><i class="fas fa-tint"></i> Humidity</h4>
                        <div class="metric-value" id="humidity-level">45</div>
                        <div class="metric-label">% RH</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="humidity-progress" style="width: 45%;"></div>
                        </div>
                        <div class="status-indicator online">
                            <span class="status-dot"></span>
                            Optimal
                        </div>
                    </div>
                    
                    <div class="cleanroom-metric" id="temperature-metric">
                        <h4><i class="fas fa-thermometer-half"></i> Temperature</h4>
                        <div class="metric-value" id="temperature-value">21.5</div>
                        <div class="metric-label">°C</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="temperature-progress" style="width: 55%;"></div>
                        </div>
                        <div class="status-indicator online">
                            <span class="status-dot"></span>
                            Stable
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="cleanroom-trends"></canvas>
                </div>
                
                <button class="btn" onclick="window.startCleanroomMonitoring()">
                    <i class="fas fa-play"></i> Start Real-Time Monitoring
                </button>
                <button class="btn btn-secondary" onclick="window.simulateAlert()">
                    <i class="fas fa-exclamation-triangle"></i> Simulate Alert
                </button>
            </div>
        </section>

        <!-- Robot Control Simulation -->
        <section id="robot-control" class="section">
            <h2 class="section-title">
                <i class="fas fa-robot"></i>
                Interactive Robot Control
            </h2>
            
            <div class="card">
                <div class="grid grid-2">
                    <div>
                        <h3>3D Robot Visualization</h3>
                        <div class="visualization-3d" id="robot-3d"></div>
                    </div>
                    <div>
                        <h3>Control Panel</h3>
                        <div class="demo-controls">
                            <div class="input-group">
                                <label>Joint 1 (Base)</label>
                                <input type="range" id="joint1" min="-180" max="180" value="0">
                                <span id="joint1-value">0°</span>
                            </div>
                            <div class="input-group">
                                <label>Joint 2 (Shoulder)</label>
                                <input type="range" id="joint2" min="-90" max="90" value="0">
                                <span id="joint2-value">0°</span>
                            </div>
                            <div class="input-group">
                                <label>Joint 3 (Elbow)</label>
                                <input type="range" id="joint3" min="-135" max="135" value="0">
                                <span id="joint3-value">0°</span>
                            </div>
                            <div class="input-group">
                                <label>Gripper</label>
                                <input type="range" id="gripper" min="0" max="100" value="50">
                                <span id="gripper-value">50%</span>
                            </div>
                        </div>
                        
                        <div class="robot-status">
                            <div class="robot-status-item">
                                <div style="color: #888;">Position X</div>
                                <div id="pos-x">0.00</div>
                            </div>
                            <div class="robot-status-item">
                                <div style="color: #888;">Position Y</div>
                                <div id="pos-y">0.00</div>
                            </div>
                            <div class="robot-status-item">
                                <div style="color: #888;">Position Z</div>
                                <div id="pos-z">0.00</div>
                            </div>
                            <div class="robot-status-item">
                                <div style="color: #888;">Speed</div>
                                <div id="speed">0.0 m/s</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem;">
                            <button class="btn" onclick="window.executeRobotProgram()">
                                <i class="fas fa-play"></i> Execute Program
                            </button>
                            <button class="btn btn-secondary" onclick="window.homeRobot()">
                                <i class="fas fa-home"></i> Home Position
                            </button>
                            <button class="btn btn-secondary" style="background: rgba(255, 68, 68, 0.2); border-color: #ff4444;" onclick="window.emergencyStop()">
                                <i class="fas fa-exclamation-circle"></i> E-STOP
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Performance Metrics -->
        <section id="performance" class="section">
            <h2 class="section-title">
                <i class="fas fa-chart-bar"></i>
                Performance Metrics & Benchmarks
            </h2>
            
            <div class="card">
                <div class="tabs">
                    <button class="tab active" onclick="window.switchPerfTab('latency')">Latency</button>
                    <button class="tab" onclick="window.switchPerfTab('throughput')">Throughput</button>
                    <button class="tab" onclick="window.switchPerfTab('reliability')">Reliability</button>
                    <button class="tab" onclick="window.switchPerfTab('efficiency')">Efficiency</button>
                </div>
                
                <div class="tab-content active" id="perf-latency">
                    <div id="latency-histogram"></div>
                </div>
                
                <div class="tab-content" id="perf-throughput">
                    <div id="throughput-chart"></div>
                </div>
                
                <div class="tab-content" id="perf-reliability">
                    <div id="reliability-chart"></div>
                </div>
                
                <div class="tab-content" id="perf-efficiency">
                    <div id="efficiency-chart"></div>
                </div>
            </div>
        </section>

        <!-- Deployment Architecture -->
        <section id="deployment" class="section">
            <h2 class="section-title">
                <i class="fas fa-network-wired"></i>
                Production Deployment Architecture
            </h2>
            
            <div class="card">
                <div id="architecture-diagram"></div>
                
                <div class="grid grid-3" style="margin-top: 2rem;">
                    <div class="metric-card">
                        <h4><i class="fas fa-server"></i> Edge Nodes</h4>
                        <div class="metric-value">12</div>
                        <div class="metric-label">Active Nodes</div>
                    </div>
                    <div class="metric-card">
                        <h4><i class="fas fa-microchip"></i> Devices</h4>
                        <div class="metric-value">847</div>
                        <div class="metric-label">Connected Devices</div>
                    </div>
                    <div class="metric-card">
                        <h4><i class="fas fa-database"></i> Data Rate</h4>
                        <div class="metric-value">1.2</div>
                        <div class="metric-label">TB/day</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- JavaScript Implementation -->
    <script>
        // Initialize all demo functions globally
        window.timeSyncInterval = null;
        window.cleanroomInterval = null;
        window.robotScene = null;
        window.robotMesh = null;

        // Time Synchronization Demo
        window.startTimeSyncDemo = function() {
            if (window.timeSyncInterval) return;
            
            const ctx = document.getElementById('timing-chart').getContext('2d');
            
            // Initialize or update chart
            if (!window.timingChart) {
                window.timingChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Clock Offset (μs)',
                            data: [],
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Path Delay (μs)',
                            data: [],
                            borderColor: '#0088ff',
                            backgroundColor: 'rgba(0, 136, 255, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#e0e0e0' }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#888' },
                                grid: { color: 'rgba(255, 255, 255, 0.05)' }
                            },
                            y: {
                                ticks: { color: '#888' },
                                grid: { color: 'rgba(255, 255, 255, 0.05)' }
                            }
                        }
                    }
                });
            }
            
            let timeIndex = 0;
            window.timeSyncInterval = setInterval(() => {
                const networkLoad = parseInt(document.getElementById('network-load').value);
                const baseOffset = Math.random() * 2 - 1;
                const loadFactor = 1 + (networkLoad / 100) * 2;
                
                const offset = (baseOffset * loadFactor).toFixed(2);
                const delay = (Math.random() * 5 * loadFactor).toFixed(2);
                const jitter = (Math.random() * 100 * loadFactor).toFixed(0);
                const loss = (Math.random() * 0.1 * (networkLoad / 100)).toFixed(2);
                
                // Update metrics
                document.getElementById('sync-offset').textContent = offset;
                document.getElementById('path-delay').textContent = delay;
                document.getElementById('jitter').textContent = jitter;
                document.getElementById('packet-loss').textContent = loss;
                
                // Update chart
                const chart = window.timingChart;
                if (chart.data.labels.length > 30) {
                    chart.data.labels.shift();
                    chart.data.datasets[0].data.shift();
                    chart.data.datasets[1].data.shift();
                }
                
                chart.data.labels.push(timeIndex++);
                chart.data.datasets[0].data.push(parseFloat(offset));
                chart.data.datasets[1].data.push(parseFloat(delay));
                chart.update('none');
                
                // Add console message
                const console = document.getElementById('budget-console');
                const message = document.createElement('div');
                message.className = 'console-line';
                message.innerHTML = `
                    <span class="console-timestamp">${new Date().toISOString()}</span>
                    <span class="console-message info">PTP sync: offset=${offset}μs, delay=${delay}μs</span>
                `;
                console.appendChild(message);
                console.scrollTop = console.scrollHeight;
                
                // Keep console size manageable
                while (console.children.length > 50) {
                    console.removeChild(console.firstChild);
                }
            }, 1000);
        };

        window.stopTimeSyncDemo = function() {
            if (window.timeSyncInterval) {
                clearInterval(window.timeSyncInterval);
                window.timeSyncInterval = null;
            }
        };

        // Budget Test
        window.runBudgetTest = function() {
            const operations = [
                { name: 'Sensor Read', budget: 0.5, actual: 0.3 },
                { name: 'Data Processing', budget: 1.0, actual: 0.8 },
                { name: 'Control Calc', budget: 0.5, actual: 0.6 },
                { name: 'Actuator Write', budget: 0.5, actual: 0.4 },
                { name: 'Network Send', budget: 0.5, actual: 0.7 }
            ];
            
            const container = document.getElementById('budget-visualization');
            
            const data = operations.map(op => ({
                x: [op.name],
                y: [op.actual],
                name: op.actual <= op.budget ? 'Within Budget' : 'Exceeded',
                type: 'bar',
                marker: {
                    color: op.actual <= op.budget ? '#00ff88' : '#ff4444'
                }
            }));
            
            const layout = {
                title: 'Operation Time Budgets (ms)',
                barmode: 'group',
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e0e0' },
                xaxis: { gridcolor: 'rgba(255,255,255,0.1)' },
                yaxis: { 
                    gridcolor: 'rgba(255,255,255,0.1)',
                    title: 'Time (ms)'
                }
            };
            
            Plotly.newPlot(container, data, layout, {responsive: true});
            
            // Log results
            const console = document.getElementById('budget-console');
            operations.forEach(op => {
                const message = document.createElement('div');
                message.className = 'console-line';
                const status = op.actual <= op.budget ? 'success' : 'error';
                message.innerHTML = `
                    <span class="console-timestamp">${new Date().toISOString()}</span>
                    <span class="console-message ${status}">${op.name}: ${op.actual}ms / ${op.budget}ms budget</span>
                `;
                console.appendChild(message);
            });
            console.scrollTop = console.scrollHeight;
        };

        // SEMI Tab Switching
        window.switchSEMITab = function(tab) {
            document.querySelectorAll('#semi .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#semi .tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`semi-${tab}`).classList.add('active');
            
            if (tab === 'events') {
                initializeEventsChart();
            } else if (tab === 'variables') {
                updateVariablesGrid();
            }
        };

        // SEMI Commands
        window.sendSEMICommand = function(command) {
            const console = document.getElementById('semi-console');
            
            // Send message
            const sendMsg = document.createElement('div');
            sendMsg.className = 'console-line';
            sendMsg.innerHTML = `
                <span class="console-timestamp">${new Date().toISOString()}</span>
                <span class="console-message info">→ S2F41 (Host Command): ${command}</span>
            `;
            console.appendChild(sendMsg);
            
            // Simulate response
            setTimeout(() => {
                const replyMsg = document.createElement('div');
                replyMsg.className = 'console-line';
                replyMsg.innerHTML = `
                    <span class="console-timestamp">${new Date().toISOString()}</span>
                    <span class="console-message success">← S2F42 (Command Ack): HCACK=0 (Success)</span>
                `;
                console.appendChild(replyMsg);
                
                // Generate event
                if (command === 'START') {
                    const eventMsg = document.createElement('div');
                    eventMsg.className = 'console-line';
                    eventMsg.innerHTML = `
                        <span class="console-timestamp">${new Date().toISOString()}</span>
                        <span class="console-message warning">← S6F11 (Event): CEID=100 (ProcessStarted)</span>
                    `;
                    console.appendChild(eventMsg);
                }
                
                console.scrollTop = console.scrollHeight;
            }, 500);
        };

        // Initialize Events Chart
        function initializeEventsChart() {
            const ctx = document.getElementById('events-chart');
            if (!ctx) return;
            
            new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Process Start', 'Process End', 'Alarm Set', 'Alarm Clear', 'Recipe Change'],
                    datasets: [{
                        label: 'Events Today',
                        data: [45, 42, 8, 7, 12],
                        backgroundColor: 'rgba(0, 255, 136, 0.5)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#888' },
                            grid: { color: 'rgba(255, 255, 255, 0.05)' }
                        },
                        y: {
                            ticks: { color: '#888' },
                            grid: { color: 'rgba(255, 255, 255, 0.05)' }
                        }
                    }
                }
            });
        }

        // Update Variables Grid
        function updateVariablesGrid() {
            const grid = document.getElementById('variables-grid');
            const variables = [
                { id: 'SV001', name: 'ControlState', value: 'REMOTE', unit: '' },
                { id: 'SV002', name: 'ProcessState', value: 'EXECUTING', unit: '' },
                { id: 'SV100', name: 'ParticleCount', value: '152', unit: 'particles/m³' },
                { id: 'SV101', name: 'AirflowVelocity', value: '0.52', unit: 'm/s' },
                { id: 'SV102', name: 'Temperature', value: '21.5', unit: '°C' },
                { id: 'SV103', name: 'Humidity', value: '45', unit: '%RH' }
            ];
            
            grid.innerHTML = '<div class="grid grid-3">' + 
                variables.map(v => `
                    <div class="metric-card">
                        <div style="color: #888; font-size: 0.8rem;">${v.id}</div>
                        <div style="font-size: 1.2rem; margin: 0.5rem 0;">${v.name}</div>
                        <div class="metric-value" style="font-size: 1.5rem;">${v.value}</div>
                        <div class="metric-label">${v.unit}</div>
                    </div>
                `).join('') + '</div>';
        }

        // RUL Prediction
        window.runRULPrediction = function() {
            const vibration = parseFloat(document.getElementById('vibration-level').value);
            const confidence = parseFloat(document.getElementById('confidence-level').value);
            
            // Simulate Bayesian prediction with uncertainty
            const baseRUL = 500 - (vibration * 150);
            const uncertainty = 50 + (vibration * 30);
            
            const zScore = confidence === 0.90 ? 1.645 : confidence === 0.95 ? 1.96 : 2.576;
            const lower = Math.max(0, baseRUL - zScore * uncertainty);
            const upper = baseRUL + zScore * uncertainty;
            
            // Update display
            document.getElementById('rul-lower').textContent = Math.round(lower);
            document.getElementById('rul-estimate').textContent = Math.round(baseRUL);
            document.getElementById('rul-upper').textContent = Math.round(upper);
            
            // Update marker position
            const markerPos = (baseRUL / 1000) * 100;
            document.getElementById('rul-marker').style.left = markerPos + '%';
            
            // Create prediction chart
            const x = [];
            const y = [];
            const yLower = [];
            const yUpper = [];
            
            for (let i = 0; i <= 30; i++) {
                x.push(i);
                const decay = Math.exp(-i * 0.05) * baseRUL;
                y.push(decay);
                yLower.push(Math.max(0, decay - uncertainty));
                yUpper.push(decay + uncertainty);
            }
            
            const trace1 = {
                x: x,
                y: y,
                type: 'scatter',
                name: 'Predicted RUL',
                line: { color: '#00ff88', width: 3 }
            };
            
            const trace2 = {
                x: x.concat(x.slice().reverse()),
                y: yUpper.concat(yLower.slice().reverse()),
                fill: 'toself',
                fillcolor: 'rgba(0, 255, 136, 0.1)',
                line: { color: 'transparent' },
                name: `${(confidence * 100).toFixed(0)}% Confidence Interval`,
                showlegend: true,
                type: 'scatter'
            };
            
            const layout = {
                title: 'RUL Prediction with Uncertainty',
                xaxis: { title: 'Days from Now', gridcolor: 'rgba(255,255,255,0.1)' },
                yaxis: { title: 'Remaining Useful Life (hours)', gridcolor: 'rgba(255,255,255,0.1)' },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e0e0' }
            };
            
            Plotly.newPlot('rul-prediction-chart', [trace2, trace1], layout, {responsive: true});
        };

        // Recalibrate Model
        window.recalibrateModel = function() {
            alert('Model recalibration initiated. This would normally trigger the conformal prediction recalibration process.');
        };

        // Cleanroom Monitoring
        window.startCleanroomMonitoring = function() {
            if (window.cleanroomInterval) return;
            
            const ctx = document.getElementById('cleanroom-trends');
            if (!ctx) return;
            
            // Initialize chart
            if (!window.cleanroomChart) {
                window.cleanroomChart = new Chart(ctx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Particle Count',
                            data: [],
                            borderColor: '#00ff88',
                            yAxisID: 'y'
                        }, {
                            label: 'Temperature',
                            data: [],
                            borderColor: '#ff8800',
                            yAxisID: 'y1'
                        }]
                    },
                    options: {
                        responsive: true,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        plugins: {
                            legend: {
                                labels: { color: '#e0e0e0' }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#888' },
                                grid: { color: 'rgba(255, 255, 255, 0.05)' }
                            },
                            y: {
                                type: 'linear',
                                display: true,
                                position: 'left',
                                ticks: { color: '#888' },
                                grid: { color: 'rgba(255, 255, 255, 0.05)' }
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                ticks: { color: '#888' },
                                grid: { drawOnChartArea: false }
                            }
                        }
                    }
                });
            }
            
            let timeIndex = 0;
            window.cleanroomInterval = setInterval(() => {
                // Update metrics with realistic variations
                const particles = 150 + Math.random() * 50;
                const airflow = 0.5 + Math.random() * 0.1;
                const humidity = 43 + Math.random() * 4;
                const temperature = 21 + Math.random() * 1;
                
                document.getElementById('particle-count').textContent = Math.round(particles);
                document.getElementById('airflow-velocity').textContent = airflow.toFixed(2);
                document.getElementById('humidity-level').textContent = Math.round(humidity);
                document.getElementById('temperature-value').textContent = temperature.toFixed(1);
                
                // Update progress bars
                document.getElementById('particle-progress').style.width = (particles / 352) * 100 + '%';
                document.getElementById('airflow-progress').style.width = ((airflow - 0.45) / 0.2) * 100 + '%';
                document.getElementById('humidity-progress').style.width = ((humidity - 40) / 10) * 100 + '%';
                document.getElementById('temperature-progress').style.width = ((temperature - 20) / 3) * 100 + '%';
                
                // Update chart
                const chart = window.cleanroomChart;
                if (chart.data.labels.length > 20) {
                    chart.data.labels.shift();
                    chart.data.datasets[0].data.shift();
                    chart.data.datasets[1].data.shift();
                }
                
                chart.data.labels.push(timeIndex++);
                chart.data.datasets[0].data.push(particles);
                chart.data.datasets[1].data.push(temperature);
                chart.update('none');
            }, 2000);
        };

        window.simulateAlert = function() {
            const metric = document.getElementById('particle-metric');
            metric.classList.add('alert');
            document.getElementById('particle-count').textContent = '523';
            document.getElementById('particle-progress').style.width = '100%';
            
            const status = metric.querySelector('.status-indicator');
            status.className = 'status-indicator error';
            status.innerHTML = '<span class="status-dot"></span> ALERT: ISO Class 6';
            
            setTimeout(() => {
                metric.classList.remove('alert');
                document.getElementById('particle-count').textContent = '152';
                document.getElementById('particle-progress').style.width = '30%';
                status.className = 'status-indicator online';
                status.innerHTML = '<span class="status-dot"></span> ISO Class 5';
            }, 5000);
        };

        // 3D Robot Visualization
        window.initRobot3D = function() {
            const container = document.getElementById('robot-3d');
            if (!container || window.robotScene) return;
            
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a0a0a);
            
            const camera = new THREE.PerspectiveCamera(
                75,
                container.clientWidth / container.clientHeight,
                0.1,
                1000
            );
            camera.position.set(5, 5, 5);
            camera.lookAt(0, 0, 0);
            
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            // Lighting
            const ambientLight = new THREE.AmbientLight(0x404040);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
            directionalLight.position.set(5, 10, 5);
            scene.add(directionalLight);
            
            // Grid
            const gridHelper = new THREE.GridHelper(10, 10, 0x00ff88, 0x444444);
            scene.add(gridHelper);
            
            // Robot arm (simplified)
            const baseGeometry = new THREE.CylinderGeometry(1, 1.2, 0.5);
            const baseMaterial = new THREE.MeshPhongMaterial({ color: 0x333333 });
            const base = new THREE.Mesh(baseGeometry, baseMaterial);
            scene.add(base);
            
            const arm1Geometry = new THREE.BoxGeometry(0.3, 2, 0.3);
            const arm1Material = new THREE.MeshPhongMaterial({ color: 0x0088ff });
            const arm1 = new THREE.Mesh(arm1Geometry, arm1Material);
            arm1.position.y = 1.25;
            base.add(arm1);
            
            const arm2Geometry = new THREE.BoxGeometry(0.25, 1.5, 0.25);
            const arm2Material = new THREE.MeshPhongMaterial({ color: 0x00ff88 });
            const arm2 = new THREE.Mesh(arm2Geometry, arm2Material);
            arm2.position.y = 1.75;
            arm1.add(arm2);
            
            window.robotScene = scene;
            window.robotCamera = camera;
            window.robotRenderer = renderer;
            window.robotBase = base;
            window.robotArm1 = arm1;
            window.robotArm2 = arm2;
            
            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                
                // Auto-rotate for visual effect
                base.rotation.y += 0.005;
                
                renderer.render(scene, camera);
            }
            animate();
            
            // Handle joint controls
            document.getElementById('joint1').addEventListener('input', (e) => {
                const value = parseFloat(e.target.value);
                document.getElementById('joint1-value').textContent = value + '°';
                if (window.robotBase) {
                    window.robotBase.rotation.y = THREE.MathUtils.degToRad(value);
                }
            });
            
            document.getElementById('joint2').addEventListener('input', (e) => {
                const value = parseFloat(e.target.value);
                document.getElementById('joint2-value').textContent = value + '°';
                if (window.robotArm1) {
                    window.robotArm1.rotation.z = THREE.MathUtils.degToRad(value);
                }
            });
            
            document.getElementById('joint3').addEventListener('input', (e) => {
                const value = parseFloat(e.target.value);
                document.getElementById('joint3-value').textContent = value + '°';
                if (window.robotArm2) {
                    window.robotArm2.rotation.z = THREE.MathUtils.degToRad(value);
                }
            });
        };

        window.executeRobotProgram = function() {
            alert('Executing robot program with deterministic control loop...');
        };

        window.homeRobot = function() {
            document.getElementById('joint1').value = 0;
            document.getElementById('joint2').value = 0;
            document.getElementById('joint3').value = 0;
            document.getElementById('gripper').value = 50;
            
            document.getElementById('joint1-value').textContent = '0°';
            document.getElementById('joint2-value').textContent = '0°';
            document.getElementById('joint3-value').textContent = '0°';
            document.getElementById('gripper-value').textContent = '50%';
            
            if (window.robotBase) window.robotBase.rotation.y = 0;
            if (window.robotArm1) window.robotArm1.rotation.z = 0;
            if (window.robotArm2) window.robotArm2.rotation.z = 0;
        };

        window.emergencyStop = function() {
            if (confirm('Execute Emergency Stop? All robot operations will halt immediately.')) {
                alert('EMERGENCY STOP ACTIVATED - All systems halted');
                window.stopTimeSyncDemo();
                if (window.cleanroomInterval) {
                    clearInterval(window.cleanroomInterval);
                    window.cleanroomInterval = null;
                }
            }
        };

        // Performance Tab Switching
        window.switchPerfTab = function(tab) {
            document.querySelectorAll('#performance .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#performance .tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`perf-${tab}`).classList.add('active');
            
            if (tab === 'latency') {
                createLatencyHistogram();
            } else if (tab === 'throughput') {
                createThroughputChart();
            } else if (tab === 'reliability') {
                createReliabilityChart();
            } else if (tab === 'efficiency') {
                createEfficiencyChart();
            }
        };

        function createLatencyHistogram() {
            const data = [];
            for (let i = 0; i < 1000; i++) {
                data.push(Math.random() * 2 + 0.2);
            }
            
            const trace = {
                x: data,
                type: 'histogram',
                nbinsx: 50,
                marker: {
                    color: 'rgba(0, 255, 136, 0.7)',
                    line: {
                        color: 'rgba(0, 255, 136, 1)',
                        width: 1
                    }
                }
            };
            
            const layout = {
                title: 'Control Loop Latency Distribution',
                xaxis: { title: 'Latency (ms)', gridcolor: 'rgba(255,255,255,0.1)' },
                yaxis: { title: 'Count', gridcolor: 'rgba(255,255,255,0.1)' },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e0e0' },
                shapes: [{
                    type: 'line',
                    x0: 1,
                    y0: 0,
                    x1: 1,
                    y1: 100,
                    line: {
                        color: '#ff4444',
                        width: 2,
                        dash: 'dash'
                    }
                }],
                annotations: [{
                    x: 1,
                    y: 100,
                    text: '1ms Target',
                    showarrow: true,
                    arrowhead: 2,
                    ax: 30,
                    ay: -30,
                    font: { color: '#ff4444' }
                }]
            };
            
            Plotly.newPlot('latency-histogram', [trace], layout, {responsive: true});
        }

        function createThroughputChart() {
            const time = [];
            const throughput = [];
            
            for (let i = 0; i < 100; i++) {
                time.push(i);
                throughput.push(300 + Math.random() * 50 + Math.sin(i / 10) * 20);
            }
            
            const trace = {
                x: time,
                y: throughput,
                type: 'scatter',
                mode: 'lines',
                fill: 'tozeroy',
                line: { color: '#0088ff', width: 2 },
                fillcolor: 'rgba(0, 136, 255, 0.1)'
            };
            
            const layout = {
                title: 'System Throughput (TeraOPS)',
                xaxis: { title: 'Time (minutes)', gridcolor: 'rgba(255,255,255,0.1)' },
                yaxis: { title: 'TeraOPS', gridcolor: 'rgba(255,255,255,0.1)' },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e0e0' }
            };
            
            Plotly.newPlot('throughput-chart', [trace], layout, {responsive: true});
        }

        function createReliabilityChart() {
            const components = ['PTP Sync', 'SEMI GEM', 'Edge Gateway', 'ML Inference', 'Robot Control'];
            const uptime = [99.99, 99.95, 99.98, 99.92, 99.97];
            
            const trace = {
                x: components,
                y: uptime,
                type: 'bar',
                marker: {
                    color: uptime.map(v => v >= 99.95 ? '#00ff88' : '#ffaa00')
                }
            };
            
            const layout = {
                title: 'Component Reliability (%)',
                yaxis: { 
                    title: 'Uptime %',
                    range: [99.8, 100],
                    gridcolor: 'rgba(255,255,255,0.1)'
                },
                xaxis: { gridcolor: 'rgba(255,255,255,0.1)' },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e0e0' }
            };
            
            Plotly.newPlot('reliability-chart', [trace], layout, {responsive: true});
        }

        function createEfficiencyChart() {
            const metrics = ['Energy/Op', 'CPU Usage', 'Memory Usage', 'Network BW', 'Storage I/O'];
            const current = [65, 42, 58, 35, 48];
            const target = [50, 40, 50, 30, 40];
            
            const trace1 = {
                x: metrics,
                y: current,
                name: 'Current',
                type: 'bar',
                marker: { color: '#0088ff' }
            };
            
            const trace2 = {
                x: metrics,
                y: target,
                name: 'Target',
                type: 'bar',
                marker: { color: 'rgba(0, 255, 136, 0.5)' }
            };
            
            const layout = {
                title: 'System Efficiency Metrics',
                barmode: 'group',
                yaxis: { 
                    title: 'Usage %',
                    gridcolor: 'rgba(255,255,255,0.1)'
                },
                xaxis: { gridcolor: 'rgba(255,255,255,0.1)' },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.3)',
                font: { color: '#e0e0e0' }
            };
            
            Plotly.newPlot('efficiency-chart', [trace1, trace2], layout, {responsive: true});
        }

        // Architecture Diagram
        function createArchitectureDiagram() {
            const container = document.getElementById('architecture-diagram');
            
            const nodes = [
                {id: 'cloud', label: 'Cloud Platform', level: 0, color: '#0088ff'},
                {id: 'edge1', label: 'Edge Gateway 1', level: 1, color: '#00ff88'},
                {id: 'edge2', label: 'Edge Gateway 2', level: 1, color: '#00ff88'},
                {id: 'robot1', label: 'Robot Controller', level: 2, color: '#ffaa00'},
                {id: 'sensor1', label: 'Sensor Network', level: 2, color: '#ffaa00'},
                {id: 'plc1', label: 'PLC System', level: 2, color: '#ffaa00'},
                {id: 'semi', label: 'SEMI Host', level: 1, color: '#ff0088'}
            ];
            
            const edges = [
                {from: 'cloud', to: 'edge1'},
                {from: 'cloud', to: 'edge2'},
                {from: 'edge1', to: 'robot1'},
                {from: 'edge1', to: 'sensor1'},
                {from: 'edge2', to: 'plc1'},
                {from: 'edge2', to: 'semi'},
                {from: 'semi', to: 'robot1'}
            ];
            
            // Create simple SVG diagram
            container.innerHTML = `
                <svg viewBox="0 0 800 400" style="width: 100%; height: 400px;">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                         refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#888" />
                        </marker>
                    </defs>
                    
                    <!-- Cloud -->
                    <rect x="350" y="20" width="100" height="60" rx="10" 
                          fill="rgba(0, 136, 255, 0.2)" stroke="#0088ff" stroke-width="2"/>
                    <text x="400" y="55" text-anchor="middle" fill="#e0e0e0" font-size="14">Cloud Platform</text>
                    
                    <!-- Edge Gateways -->
                    <rect x="200" y="120" width="100" height="60" rx="10" 
                          fill="rgba(0, 255, 136, 0.2)" stroke="#00ff88" stroke-width="2"/>
                    <text x="250" y="155" text-anchor="middle" fill="#e0e0e0" font-size="14">Edge GW 1</text>
                    
                    <rect x="500" y="120" width="100" height="60" rx="10" 
                          fill="rgba(0, 255, 136, 0.2)" stroke="#00ff88" stroke-width="2"/>
                    <text x="550" y="155" text-anchor="middle" fill="#e0e0e0" font-size="14">Edge GW 2</text>
                    
                    <!-- SEMI Host -->
                    <rect x="350" y="120" width="100" height="60" rx="10" 
                          fill="rgba(255, 0, 136, 0.2)" stroke="#ff0088" stroke-width="2"/>
                    <text x="400" y="155" text-anchor="middle" fill="#e0e0e0" font-size="14">SEMI Host</text>
                    
                    <!-- Devices -->
                    <rect x="100" y="250" width="100" height="60" rx="10" 
                          fill="rgba(255, 170, 0, 0.2)" stroke="#ffaa00" stroke-width="2"/>
                    <text x="150" y="285" text-anchor="middle" fill="#e0e0e0" font-size="14">Robot Ctrl</text>
                    
                    <rect x="250" y="250" width="100" height="60" rx="10" 
                          fill="rgba(255, 170, 0, 0.2)" stroke="#ffaa00" stroke-width="2"/>
                    <text x="300" y="285" text-anchor="middle" fill="#e0e0e0" font-size="14">Sensors</text>
                    
                    <rect x="450" y="250" width="100" height="60" rx="10" 
                          fill="rgba(255, 170, 0, 0.2)" stroke="#ffaa00" stroke-width="2"/>
                    <text x="500" y="285" text-anchor="middle" fill="#e0e0e0" font-size="14">PLC</text>
                    
                    <rect x="600" y="250" width="100" height="60" rx="10" 
                          fill="rgba(255, 170, 0, 0.2)" stroke="#ffaa00" stroke-width="2"/>
                    <text x="650" y="285" text-anchor="middle" fill="#e0e0e0" font-size="14">ML Edge</text>
                    
                    <!-- Connections -->
                    <line x1="400" y1="80" x2="250" y2="120" stroke="#888" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <line x1="400" y1="80" x2="550" y2="120" stroke="#888" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <line x1="400" y1="80" x2="400" y2="120" stroke="#888" stroke-width="2" marker-end="url(#arrowhead)"/>
                    
                    <line x1="250" y1="180" x2="150" y2="250" stroke="#888" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <line x1="250" y1="180" x2="300" y2="250" stroke="#888" stroke-width="2" marker-end="url(#arrowhead)"/>
                    
                    <line x1="550" y1="180" x2="500" y2="250" stroke="#888" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <line x1="550" y1="180" x2="650" y2="250" stroke="#888" stroke-width="2" marker-end="url(#arrowhead)"/>
                    
                    <line x1="400" y1="180" x2="150" y2="250" stroke="#888" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
                </svg>
            `;
        }

        // Update input displays
        document.getElementById('network-load').addEventListener('input', (e) => {
            document.getElementById('network-load-value').textContent = e.target.value + '%';
        });

        document.getElementById('vibration-level').addEventListener('input', (e) => {
            document.getElementById('vibration-value').textContent = e.target.value + 'g';
        });

        document.getElementById('gripper').addEventListener('input', (e) => {
            document.getElementById('gripper-value').textContent = e.target.value + '%';
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Add initial SEMI messages
            const semiConsole = document.getElementById('semi-console');
            const initialMessages = [
                { time: '2024-01-15 10:23:45.123', type: 'info', msg: '→ S1F13 (Select.req): Establishing communication' },
                { time: '2024-01-15 10:23:45.234', type: 'success', msg: '← S1F14 (Select.rsp): COMMACK=0 (Success)' },
                { time: '2024-01-15 10:23:45.345', type: 'info', msg: '→ S1F1 (Are You There)' },
                { time: '2024-01-15 10:23:45.456', type: 'success', msg: '← S1F2 (Online Data): Model=FAB-CTRL-2000, Rev=2.0.0' },
                { time: '2024-01-15 10:23:45.567', type: 'warning', msg: '← S6F11 (Event): CEID=2 (EquipmentOnline)' }
            ];
            
            initialMessages.forEach(msg => {
                const line = document.createElement('div');
                line.className = 'console-line';
                line.innerHTML = `
                    <span class="console-timestamp">${msg.time}</span>
                    <span class="console-message ${msg.type}">${msg.msg}</span>
                `;
                semiConsole.appendChild(line);
            });
            
            // Initialize 3D robot
            setTimeout(() => {
                window.initRobot3D();
                createArchitectureDiagram();
            }, 500);
            
            // Start with some default visualizations
            setTimeout(() => {
                window.runRULPrediction();
                createLatencyHistogram();
            }, 1000);
        });
    </script>
</body>
</html>
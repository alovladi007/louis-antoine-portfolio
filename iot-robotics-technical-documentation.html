<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT Robotics V2 - Technical Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <style>
        :root {
            --primary: #00ff88;
            --secondary: #0088ff;
            --accent: #ffaa00;
            --danger: #ff4444;
            --dark: #0a0a0a;
            --darker: #050505;
            --light: #e0e0e0;
            --border: rgba(255, 255, 255, 0.1);
            --sidebar-width: 300px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: var(--light);
            line-height: 1.8;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .version-badge {
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid var(--primary);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--primary);
        }

        .header-links {
            display: flex;
            gap: 2rem;
        }

        .header-links a {
            color: var(--light);
            text-decoration: none;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-links a:hover {
            color: var(--primary);
        }

        /* Layout */
        .container {
            display: flex;
            margin-top: 100px;
            min-height: calc(100vh - 100px);
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: rgba(255, 255, 255, 0.02);
            border-right: 1px solid var(--border);
            position: fixed;
            height: calc(100vh - 100px);
            overflow-y: auto;
            padding: 2rem;
        }

        .toc-title {
            color: var(--primary);
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-section {
            margin-bottom: 1.5rem;
        }

        .toc-section-title {
            color: var(--secondary);
            font-weight: bold;
            margin-bottom: 0.5rem;
            padding: 0.5rem;
            background: rgba(0, 136, 255, 0.1);
            border-radius: 5px;
        }

        .toc-item {
            padding: 0.5rem 1rem;
            color: #aaa;
            text-decoration: none;
            display: block;
            transition: all 0.3s;
            border-left: 2px solid transparent;
            margin-bottom: 0.25rem;
        }

        .toc-item:hover {
            color: var(--primary);
            background: rgba(0, 255, 136, 0.05);
            border-left-color: var(--primary);
        }

        .toc-item.active {
            color: var(--primary);
            background: rgba(0, 255, 136, 0.1);
            border-left-color: var(--primary);
        }

        .toc-subitem {
            padding-left: 2rem;
            font-size: 0.9rem;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 2rem 3rem;
            max-width: 1200px;
        }

        /* Content Sections */
        .section {
            margin-bottom: 4rem;
            scroll-margin-top: 120px;
        }

        .section h2 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }

        .section h3 {
            font-size: 1.8rem;
            color: var(--secondary);
            margin: 2rem 0 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section h4 {
            font-size: 1.3rem;
            color: var(--accent);
            margin: 1.5rem 0 0.75rem;
        }

        /* Cards */
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 2rem;
            margin: 1.5rem 0;
            backdrop-filter: blur(10px);
        }

        .card-title {
            color: var(--secondary);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Code Blocks */
        pre {
            background: #1a1a1a !important;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem !important;
            margin: 1.5rem 0;
            overflow-x: auto;
            position: relative;
        }

        code {
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.9rem;
        }

        .code-header {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(0, 136, 255, 0.2);
            color: var(--secondary);
            padding: 0.25rem 0.75rem;
            border-radius: 0 8px 0 8px;
            font-size: 0.8rem;
            font-family: sans-serif;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }

        th {
            background: rgba(0, 136, 255, 0.1);
            color: var(--secondary);
            padding: 1rem;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 1rem;
            border-top: 1px solid var(--border);
        }

        tr:hover {
            background: rgba(0, 255, 136, 0.05);
        }

        /* Alert Boxes */
        .alert {
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .alert-info {
            background: rgba(0, 136, 255, 0.1);
            border: 1px solid var(--secondary);
        }

        .alert-success {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--primary);
        }

        .alert-warning {
            background: rgba(255, 170, 0, 0.1);
            border: 1px solid var(--accent);
        }

        .alert-danger {
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid var(--danger);
        }

        .alert i {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .metric-card {
            background: linear-gradient(135deg, rgba(0, 136, 255, 0.1) 0%, rgba(0, 255, 136, 0.1) 100%);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .metric-label {
            color: #888;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }

        /* Architecture Diagram */
        .architecture-diagram {
            background: var(--darker);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            overflow-x: auto;
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0 1rem 2rem;
        }

        li {
            margin: 0.5rem 0;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.85rem;
            margin: 0.25rem;
        }

        .badge-primary {
            background: rgba(0, 255, 136, 0.2);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .badge-secondary {
            background: rgba(0, 136, 255, 0.2);
            color: var(--secondary);
            border: 1px solid var(--secondary);
        }

        /* Copy Button */
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 136, 255, 0.2);
            border: 1px solid var(--secondary);
            color: var(--secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            background: var(--secondary);
            color: white;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 1rem;
            }

            .menu-toggle {
                display: block;
            }
        }

        /* Print Styles */
        @media print {
            .sidebar, .header {
                display: none;
            }

            .main-content {
                margin: 0;
                padding: 0;
            }

            body {
                background: white;
                color: black;
            }
        }

        /* Search Box */
        .search-box {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--light);
            margin-bottom: 1.5rem;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(0, 255, 136, 0.05);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }

        .tab {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            color: #888;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary);
        }

        .tab-content {
            display: none;
            padding: 1.5rem 0;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>
                <i class="fas fa-book"></i>
                IoT Robotics Technical Documentation
                <span class="version-badge">v2.0.0</span>
            </h1>
            <div class="header-links">
                <a href="iot-robotics-project.html">
                    <i class="fas fa-rocket"></i> Live Demo
                </a>
                <a href="https://github.com/org/IoT-Robotics-in-Manufacturing" target="_blank">
                    <i class="fab fa-github"></i> GitHub
                </a>
                <a href="#" onclick="window.print()">
                    <i class="fas fa-print"></i> Print
                </a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Sidebar with Table of Contents -->
        <aside class="sidebar">
            <h2 class="toc-title">
                <i class="fas fa-list"></i> Table of Contents
            </h2>
            
            <input type="text" class="search-box" placeholder="Search documentation..." id="search-box">
            
            <div class="toc-section">
                <div class="toc-section-title">Getting Started</div>
                <a href="#video-demo" class="toc-item active">
                    <i class="fas fa-play-circle"></i> Video Demo
                </a>
                <a href="#overview" class="toc-item">Executive Overview</a>
                <a href="#quickstart" class="toc-item">60-Second Quickstart</a>
                <a href="#architecture" class="toc-item">System Architecture</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Core Features</div>
                <a href="#deterministic" class="toc-item">Deterministic Control</a>
                <a href="#deterministic-tsn" class="toc-item toc-subitem">TSN Configuration</a>
                <a href="#deterministic-ptp" class="toc-item toc-subitem">PTP Synchronization</a>
                <a href="#deterministic-budget" class="toc-item toc-subitem">Time Budget Management</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">SEMI Integration</div>
                <a href="#semi" class="toc-item">SEMI Standards</a>
                <a href="#semi-gem" class="toc-item toc-subitem">GEM/SECS Protocol</a>
                <a href="#semi-eda" class="toc-item toc-subitem">EDA/Interface A</a>
                <a href="#semi-messages" class="toc-item toc-subitem">Message Reference</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Machine Learning</div>
                <a href="#ml" class="toc-item">Predictive ML</a>
                <a href="#ml-rul" class="toc-item toc-subitem">RUL Prediction</a>
                <a href="#ml-conformal" class="toc-item toc-subitem">Conformal Prediction</a>
                <a href="#ml-features" class="toc-item toc-subitem">Feature Engineering</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Monitoring</div>
                <a href="#monitoring" class="toc-item">Cleanroom Monitoring</a>
                <a href="#monitoring-metrics" class="toc-item toc-subitem">Real-time Metrics</a>
                <a href="#monitoring-policies" class="toc-item toc-subitem">Policy Engine</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Deployment</div>
                <a href="#deployment" class="toc-item">Production Deployment</a>
                <a href="#deployment-k8s" class="toc-item toc-subitem">Kubernetes</a>
                <a href="#deployment-cicd" class="toc-item toc-subitem">CI/CD Pipeline</a>
                <a href="#deployment-security" class="toc-item toc-subitem">Security</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">API Reference</div>
                <a href="#api" class="toc-item">REST API</a>
                <a href="#api-graphql" class="toc-item">GraphQL Schema</a>
                <a href="#api-websocket" class="toc-item">WebSocket Events</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Appendix</div>
                <a href="#troubleshooting" class="toc-item">Troubleshooting</a>
                <a href="#performance" class="toc-item">Performance Tuning</a>
                <a href="#glossary" class="toc-item">Glossary</a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
                         <!-- Video Demonstration Section -->
            <section id="video-demo" class="section" style="background: linear-gradient(135deg, rgba(0, 136, 255, 0.05) 0%, rgba(0, 255, 136, 0.05) 100%); padding: 2rem; border-radius: 15px; margin-bottom: 3rem;">
                <h2 style="text-align: center; margin-bottom: 2rem;">
                    <i class="fas fa-play-circle"></i> System Demonstration
                </h2>
                
                <div class="card" style="background: rgba(0, 0, 0, 0.5); border: 2px solid var(--primary);">
                    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 10px; background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);">
                        <!-- Simulated Video Demo -->
                        <div id="video-demo-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                            <canvas id="video-canvas" style="width: 100%; height: 100%; display: none;"></canvas>
                            
                            <!-- Video Thumbnail -->
                            <div id="video-thumbnail" style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; cursor: pointer; background: linear-gradient(135deg, rgba(0, 136, 255, 0.2) 0%, rgba(0, 255, 136, 0.2) 100%);">
                                <div style="text-align: center;">
                                    <div style="background: rgba(0, 0, 0, 0.8); border-radius: 50%; width: 120px; height: 120px; display: flex; align-items: center; justify-content: center; margin: 0 auto 2rem; border: 3px solid var(--primary); box-shadow: 0 0 50px rgba(0, 255, 136, 0.5); transition: all 0.3s;">
                                        <i class="fas fa-play" style="font-size: 3rem; color: var(--primary); margin-left: 0.5rem;"></i>
                                    </div>
                                    <h3 style="color: white; font-size: 1.8rem; margin-bottom: 1rem;">
                                        IoT Robotics V2 System Demo
                                    </h3>
                                    <p style="color: var(--primary); font-size: 1.1rem;">
                                        <i class="fas fa-play-circle"></i> Click to Play Simulated Demo
                                    </p>
                                </div>
                            </div>
                            
                            <!-- Video Controls -->
                            <div id="video-controls" style="display: none; position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0, 0, 0, 0.8); padding: 1rem;">
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <button id="play-pause-btn" style="background: var(--primary); border: none; color: white; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">
                                        <i class="fas fa-pause"></i>
                                    </button>
                                    <div style="flex: 1;">
                                        <div style="background: rgba(255, 255, 255, 0.2); height: 4px; border-radius: 2px; position: relative;">
                                            <div id="progress-bar" style="background: var(--primary); height: 100%; width: 0%; border-radius: 2px; transition: width 0.1s;"></div>
                                        </div>
                                    </div>
                                    <span id="time-display" style="color: white; font-size: 0.9rem;">0:00 / 3:20</span>
                                </div>
                                <div id="captions" style="text-align: center; color: white; margin-top: 1rem; font-size: 1.1rem; min-height: 2rem;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <script>
                        // Simulated Video Demo
                        (function() {
                            let isPlaying = false;
                            let currentTime = 0;
                            let animationFrame = null;
                            const duration = 200; // 3:20 in seconds
                            
                            const scenes = [
                                { start: 0, end: 15, text: "Welcome to IoT Robotics V2 - Revolutionary Industrial Automation", color: "#00ff88" },
                                { start: 15, end: 35, text: "Multi-tier architecture with deterministic control", color: "#0088ff" },
                                { start: 35, end: 60, text: "6-DOF Robot executing precise operations", color: "#00ff88" },
                                { start: 60, end: 90, text: "SEMI GEM/SECS protocol integration", color: "#ffaa00" },
                                { start: 90, end: 120, text: "Bayesian LSTM predictive maintenance", color: "#ff8888" },
                                { start: 120, end: 150, text: "ISO Class 5 cleanroom monitoring", color: "#00ff88" },
                                { start: 150, end: 180, text: "Kubernetes deployment with zero downtime", color: "#0088ff" },
                                { start: 180, end: 200, text: "Experience the future of manufacturing", color: "#00ff88" }
                            ];
                            
                            const thumbnail = document.getElementById('video-thumbnail');
                            const canvas = document.getElementById('video-canvas');
                            const controls = document.getElementById('video-controls');
                            const playPauseBtn = document.getElementById('play-pause-btn');
                            const progressBar = document.getElementById('progress-bar');
                            const timeDisplay = document.getElementById('time-display');
                            const captions = document.getElementById('captions');
                            const ctx = canvas.getContext('2d');
                            
                            // Set canvas size
                            canvas.width = 1920;
                            canvas.height = 1080;
                            
                            function formatTime(seconds) {
                                const mins = Math.floor(seconds / 60);
                                const secs = Math.floor(seconds % 60);
                                return `${mins}:${secs.toString().padStart(2, '0')}`;
                            }
                            
                            function drawFrame() {
                                // Clear canvas
                                ctx.fillStyle = '#0a0a0a';
                                ctx.fillRect(0, 0, canvas.width, canvas.height);
                                
                                // Draw grid pattern
                                ctx.strokeStyle = 'rgba(0, 255, 136, 0.1)';
                                ctx.lineWidth = 1;
                                for (let i = 0; i < canvas.width; i += 40) {
                                    ctx.beginPath();
                                    ctx.moveTo(i, 0);
                                    ctx.lineTo(i, canvas.height);
                                    ctx.stroke();
                                }
                                for (let i = 0; i < canvas.height; i += 40) {
                                    ctx.beginPath();
                                    ctx.moveTo(0, i);
                                    ctx.lineTo(canvas.width, i);
                                    ctx.stroke();
                                }
                                
                                // Draw animated elements based on current scene
                                const scene = scenes.find(s => currentTime >= s.start && currentTime < s.end);
                                if (scene) {
                                    // Draw scene text
                                    ctx.fillStyle = scene.color;
                                    ctx.font = 'bold 60px Arial';
                                    ctx.textAlign = 'center';
                                    ctx.fillText(scene.text, canvas.width / 2, canvas.height / 2);
                                    
                                    // Update captions
                                    captions.innerHTML = `<span style="color: ${scene.color}">${scene.text}</span>`;
                                    
                                    // Draw animated circles
                                    const time = Date.now() / 1000;
                                    for (let i = 0; i < 5; i++) {
                                        const radius = 50 + Math.sin(time + i) * 20;
                                        ctx.strokeStyle = `rgba(0, 255, 136, ${0.3 - i * 0.05})`;
                                        ctx.lineWidth = 2;
                                        ctx.beginPath();
                                        ctx.arc(
                                            canvas.width / 2 + Math.cos(time + i) * 200,
                                            canvas.height / 2 + Math.sin(time + i) * 100,
                                            radius,
                                            0,
                                            Math.PI * 2
                                        );
                                        ctx.stroke();
                                    }
                                    
                                    // Draw metrics
                                    ctx.fillStyle = '#00ff88';
                                    ctx.font = '30px monospace';
                                    ctx.textAlign = 'left';
                                    ctx.fillText(`Latency: ${Math.random().toFixed(1)}ms`, 50, 50);
                                    ctx.fillText(`TOPS: ${Math.floor(Math.random() * 100 + 227)}`, 50, 90);
                                    ctx.fillText(`Uptime: 99.99%`, 50, 130);
                                }
                                
                                // Update progress
                                progressBar.style.width = `${(currentTime / duration) * 100}%`;
                                timeDisplay.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
                            }
                            
                            function animate() {
                                if (isPlaying) {
                                    currentTime += 0.033; // ~30fps
                                    if (currentTime >= duration) {
                                        currentTime = 0;
                                    }
                                    drawFrame();
                                    animationFrame = requestAnimationFrame(animate);
                                }
                            }
                            
                            // Play button click
                            thumbnail.addEventListener('click', function() {
                                thumbnail.style.display = 'none';
                                canvas.style.display = 'block';
                                controls.style.display = 'block';
                                isPlaying = true;
                                animate();
                            });
                            
                            // Play/Pause button
                            playPauseBtn.addEventListener('click', function() {
                                isPlaying = !isPlaying;
                                if (isPlaying) {
                                    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                                    animate();
                                } else {
                                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                                    if (animationFrame) {
                                        cancelAnimationFrame(animationFrame);
                                    }
                                }
                            });
                            
                            // Progress bar click
                            const progressContainer = progressBar.parentElement;
                            progressContainer.addEventListener('click', function(e) {
                                const rect = this.getBoundingClientRect();
                                const percent = (e.clientX - rect.left) / rect.width;
                                currentTime = percent * duration;
                                drawFrame();
                            });
                        })();
                    </script>
                    
                    <div style="padding: 2rem;">
                        <!-- AI Voice-Over Script Section -->
                        <div class="card" style="background: rgba(0, 255, 136, 0.05); border: 1px solid var(--primary); margin-bottom: 2rem;">
                            <h3 style="color: var(--primary); margin-bottom: 1rem;">
                                <i class="fas fa-microphone"></i> AI Voice-Over Narration Script
                            </h3>
                            
                            <div style="background: #000; border-radius: 10px; padding: 1.5rem; font-family: 'Courier New', monospace; margin-bottom: 1rem;">
                                <div style="color: #00ff88; margin-bottom: 1rem;">
                                    <strong>[00:00 - 00:15]</strong> Opening Scene - Logo Animation
                                </div>
                                <p style="color: #ccc; line-height: 1.8; margin-bottom: 1rem;">
                                    "Welcome to the IoT Robotics V2 system - a revolutionary platform transforming semiconductor manufacturing with deterministic control, achieving sub-millisecond latency through advanced TSN and PTP synchronization."
                                </p>
                                <div style="color: #0088ff; font-size: 0.9rem; font-style: italic;">
                                    ON-SCREEN: IoT Robotics V2 logo animation → "< 1ms Latency" → "99.99% Uptime" → "327 TeraOPS"
                                </div>
                            </div>
                            
                            <div style="background: #000; border-radius: 10px; padding: 1.5rem; font-family: 'Courier New', monospace; margin-bottom: 1rem;">
                                <div style="color: #00ff88; margin-bottom: 1rem;">
                                    <strong>[00:15 - 00:35]</strong> System Architecture Overview
                                </div>
                                <p style="color: #ccc; line-height: 1.8; margin-bottom: 1rem;">
                                    "Our multi-tier architecture seamlessly integrates edge computing, real-time control, and cloud analytics. Watch as data flows from sensors through our edge gateway, processed with deterministic timing guarantees, enabling precise robot control in cleanroom environments."
                                </p>
                                <div style="color: #0088ff; font-size: 0.9rem; font-style: italic;">
                                    ON-SCREEN: Animated architecture diagram → Data flow visualization → "Edge → Gateway → Cloud" with latency metrics
                                </div>
                            </div>
                            
                            <div style="background: #000; border-radius: 10px; padding: 1.5rem; font-family: 'Courier New', monospace; margin-bottom: 1rem;">
                                <div style="color: #00ff88; margin-bottom: 1rem;">
                                    <strong>[00:35 - 01:00]</strong> Real-Time Robot Control Demo
                                </div>
                                <p style="color: #ccc; line-height: 1.8; margin-bottom: 1rem;">
                                    "Observe our 6-DOF robotic arm executing precise pick-and-place operations. The system maintains deterministic control loops with time budgets enforced at every step. Notice the real-time telemetry displaying joint positions, velocities, and torque measurements."
                                </p>
                                <div style="color: #0088ff; font-size: 0.9rem; font-style: italic;">
                                    ON-SCREEN: Split screen → 3D robot visualization + real-time metrics dashboard → "Joint 1: 45.2°" → "Latency: 0.8ms"
                                </div>
                            </div>
                            
                            <div style="background: #000; border-radius: 10px; padding: 1.5rem; font-family: 'Courier New', monospace; margin-bottom: 1rem;">
                                <div style="color: #00ff88; margin-bottom: 1rem;">
                                    <strong>[01:00 - 01:30]</strong> SEMI Standards Integration
                                </div>
                                <p style="color: #ccc; line-height: 1.8; margin-bottom: 1rem;">
                                    "Native SEMI integration enables seamless communication with fab equipment. Watch the GEM/SECS message flow as we send S2F41 host commands and receive S6F11 event reports. Our EDA implementation collects trace data at 10-millisecond resolution, ensuring complete visibility into equipment state."
                                </p>
                                <div style="color: #0088ff; font-size: 0.9rem; font-style: italic;">
                                    ON-SCREEN: Terminal showing SEMI messages → "→ S1F13 (Select.req)" → "← S1F14 (Select.rsp): SUCCESS" → Message flow diagram
                                </div>
                            </div>
                            
                            <div style="background: #000; border-radius: 10px; padding: 1.5rem; font-family: 'Courier New', monospace; margin-bottom: 1rem;">
                                <div style="color: #00ff88; margin-bottom: 1rem;">
                                    <strong>[01:30 - 02:00]</strong> Predictive Maintenance with ML
                                </div>
                                <p style="color: #ccc; line-height: 1.8; margin-bottom: 1rem;">
                                    "Our Bayesian LSTM model predicts remaining useful life with calibrated uncertainty. Watch as vibration data is analyzed in real-time, extracting physics-informed features. The conformal prediction provides guaranteed coverage intervals, essential for maintenance scheduling."
                                </p>
                                <div style="color: #0088ff; font-size: 0.9rem; font-style: italic;">
                                    ON-SCREEN: RUL prediction chart with uncertainty bands → "RUL: 327 ± 29 hours" → "95% CI: [298, 356]" → Feature extraction visualization
                                </div>
                            </div>
                            
                            <div style="background: #000; border-radius: 10px; padding: 1.5rem; font-family: 'Courier New', monospace; margin-bottom: 1rem;">
                                <div style="color: #00ff88; margin-bottom: 1rem;">
                                    <strong>[02:00 - 02:30]</strong> Cleanroom Compliance Monitoring
                                </div>
                                <p style="color: #ccc; line-height: 1.8; margin-bottom: 1rem;">
                                    "Continuous monitoring ensures ISO Class 5 compliance. Real-time particle counting, airflow velocity, humidity, and temperature are tracked against configurable policies. Any deviation triggers immediate alerts and automated responses."
                                </p>
                                <div style="color: #0088ff; font-size: 0.9rem; font-style: italic;">
                                    ON-SCREEN: Cleanroom dashboard → "Particles: 152/m³ ✓ ISO 5" → Policy engine visualization → Alert notification animation
                                </div>
                            </div>
                            
                            <div style="background: #000; border-radius: 10px; padding: 1.5rem; font-family: 'Courier New', monospace; margin-bottom: 1rem;">
                                <div style="color: #00ff88; margin-bottom: 1rem;">
                                    <strong>[02:30 - 03:00]</strong> Production Deployment
                                </div>
                                <p style="color: #ccc; line-height: 1.8; margin-bottom: 1rem;">
                                    "Deploy with confidence using our Kubernetes-ready architecture. Blue-green deployments ensure zero downtime. Comprehensive observability through Prometheus and Grafana provides insights into system performance. All communications secured with mutual TLS."
                                </p>
                                <div style="color: #0088ff; font-size: 0.9rem; font-style: italic;">
                                    ON-SCREEN: Kubernetes dashboard → Deployment rolling update → Grafana metrics → "Uptime: 99.99%" → Security badges
                                </div>
                            </div>
                            
                            <div style="background: #000; border-radius: 10px; padding: 1.5rem; font-family: 'Courier New', monospace;">
                                <div style="color: #00ff88; margin-bottom: 1rem;">
                                    <strong>[03:00 - 03:20]</strong> Closing & Call to Action
                                </div>
                                <p style="color: #ccc; line-height: 1.8; margin-bottom: 1rem;">
                                    "The IoT Robotics V2 system delivers the performance, reliability, and compliance required for modern semiconductor manufacturing. Experience the future of industrial automation today."
                                </p>
                                <div style="color: #0088ff; font-size: 0.9rem; font-style: italic;">
                                    ON-SCREEN: Performance metrics summary → Contact information → "Try Live Demo" button → Website URL
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Enhancement Specifications -->
                        <div class="card" style="background: rgba(0, 136, 255, 0.05); border: 1px solid var(--secondary); margin-bottom: 2rem;">
                            <h3 style="color: var(--secondary); margin-bottom: 1rem;">
                                <i class="fas fa-robot"></i> AI Enhancement Specifications
                            </h3>
                            
                            <div class="grid">
                                <div>
                                    <h4 style="color: var(--primary); margin-bottom: 1rem;">Voice-Over AI Settings</h4>
                                    <ul style="color: #ccc;">
                                        <li><strong>Voice Model:</strong> Professional Male/Female</li>
                                        <li><strong>Tone:</strong> Confident, Technical, Clear</li>
                                        <li><strong>Pace:</strong> 150-160 words/minute</li>
                                        <li><strong>Language:</strong> English (US)</li>
                                        <li><strong>Emphasis:</strong> Key metrics and features</li>
                                        <li><strong>Background Music:</strong> Subtle tech ambient</li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <h4 style="color: var(--primary); margin-bottom: 1rem;">Visual AI Enhancements</h4>
                                    <ul style="color: #ccc;">
                                        <li><strong>Motion Graphics:</strong> Smooth transitions</li>
                                        <li><strong>Text Overlays:</strong> Animated captions</li>
                                        <li><strong>Data Visualization:</strong> Real-time charts</li>
                                        <li><strong>3D Rendering:</strong> Robot movements</li>
                                        <li><strong>Color Grading:</strong> Tech blue/green theme</li>
                                        <li><strong>Resolution:</strong> 4K (3840×2160)</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(255, 170, 0, 0.1); border-radius: 10px;">
                                <h4 style="color: var(--accent); margin-bottom: 0.5rem;">
                                    <i class="fas fa-magic"></i> AI Production Tools
                                </h4>
                                <p style="color: #ccc; margin-bottom: 0.5rem;">
                                    <strong>Voice Generation:</strong> ElevenLabs / Amazon Polly Neural / Google WaveNet<br>
                                    <strong>Video Editing:</strong> Adobe Premiere Pro with AI plugins / DaVinci Resolve<br>
                                    <strong>Motion Graphics:</strong> After Effects / Fusion<br>
                                    <strong>3D Animation:</strong> Blender / Unity<br>
                                    <strong>Auto-Captioning:</strong> Descript / Rev AI
                                </p>
                            </div>
                        </div>
                        
                        <h3 style="color: var(--primary); margin-bottom: 1rem;">
                            <i class="fas fa-video"></i> What This Video Demonstrates
                        </h3>
                        
                        <div class="grid" style="margin-bottom: 2rem;">
                            <div style="padding: 1rem; background: rgba(0, 136, 255, 0.1); border-radius: 10px;">
                                <h4 style="color: var(--secondary); margin-bottom: 0.5rem;">
                                    <i class="fas fa-clock"></i> Real-Time Control
                                </h4>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #ccc;">
                                    <li>Sub-millisecond latency demonstration</li>
                                    <li>TSN/PTP synchronization in action</li>
                                    <li>Time budget enforcement visualization</li>
                                </ul>
                            </div>
                            
                            <div style="padding: 1rem; background: rgba(0, 255, 136, 0.1); border-radius: 10px;">
                                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">
                                    <i class="fas fa-robot"></i> Robot Operations
                                </h4>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #ccc;">
                                    <li>6-DOF robot control demonstration</li>
                                    <li>Pick-and-place sequence execution</li>
                                    <li>Collision detection and safety stops</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="grid" style="margin-bottom: 2rem;">
                            <div style="padding: 1rem; background: rgba(255, 170, 0, 0.1); border-radius: 10px;">
                                <h4 style="color: var(--accent); margin-bottom: 0.5rem;">
                                    <i class="fas fa-industry"></i> SEMI Integration
                                </h4>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #ccc;">
                                    <li>GEM/SECS message flow visualization</li>
                                    <li>EDA data collection in real-time</li>
                                    <li>Host command execution (START/STOP)</li>
                                </ul>
                            </div>
                            
                            <div style="padding: 1rem; background: rgba(255, 68, 68, 0.1); border-radius: 10px;">
                                <h4 style="color: #ff8888; margin-bottom: 0.5rem;">
                                    <i class="fas fa-brain"></i> Predictive ML
                                </h4>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #ccc;">
                                    <li>RUL prediction with uncertainty bands</li>
                                    <li>Vibration analysis and anomaly detection</li>
                                    <li>Conformal prediction intervals</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <strong>Live Demo Available:</strong> Experience the actual system in action at 
                                <a href="iot-robotics-project.html" style="color: var(--primary); font-weight: bold;">
                                    IoT Robotics Live Demo
                                </a>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 2rem;">
                            <div class="badges" style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                                <span class="badge badge-primary">
                                    <i class="fas fa-stopwatch"></i> Duration: 8:42
                                </span>
                                <span class="badge badge-secondary">
                                    <i class="fas fa-calendar"></i> Updated: January 2024
                                </span>
                                <span class="badge badge-primary">
                                    <i class="fas fa-language"></i> English Subtitles
                                </span>
                                <span class="badge badge-secondary">
                                    <i class="fas fa-hd"></i> 4K Quality
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Video Storyboard -->
                <div class="card" style="margin-top: 2rem; background: rgba(255, 68, 68, 0.05); border: 1px solid #ff8888;">
                    <h3 style="color: #ff8888; margin-bottom: 1rem;">
                        <i class="fas fa-film"></i> Visual Storyboard & On-Screen Text
                    </h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                        <!-- Scene 1 -->
                        <div style="background: #000; border: 1px solid #333; border-radius: 10px; padding: 1rem;">
                            <div style="color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">Scene 1: Opening</div>
                            <div style="color: #888; font-size: 0.9rem; margin-bottom: 0.5rem;">Visual: Logo reveal with particle effects</div>
                            <div style="color: var(--secondary); font-size: 0.85rem;">
                                Text Overlay:
                                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                    <li>"IoT ROBOTICS V2"</li>
                                    <li>"Deterministic Control for Semiconductor Fabs"</li>
                                    <li>"< 1ms Latency | 99.99% Uptime"</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Scene 2 -->
                        <div style="background: #000; border: 1px solid #333; border-radius: 10px; padding: 1rem;">
                            <div style="color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">Scene 2: Architecture</div>
                            <div style="color: #888; font-size: 0.9rem; margin-bottom: 0.5rem;">Visual: 3D network topology animation</div>
                            <div style="color: var(--secondary); font-size: 0.85rem;">
                                Text Overlay:
                                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                    <li>"Multi-Tier Architecture"</li>
                                    <li>"Edge → Gateway → Cloud"</li>
                                    <li>"100k Messages/sec"</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Scene 3 -->
                        <div style="background: #000; border: 1px solid #333; border-radius: 10px; padding: 1rem;">
                            <div style="color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">Scene 3: Robot Demo</div>
                            <div style="color: #888; font-size: 0.9rem; margin-bottom: 0.5rem;">Visual: Split-screen robot + metrics</div>
                            <div style="color: var(--secondary); font-size: 0.85rem;">
                                Text Overlay:
                                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                    <li>"6-DOF Precision Control"</li>
                                    <li>"Real-Time Telemetry"</li>
                                    <li>"Collision Detection Active"</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Scene 4 -->
                        <div style="background: #000; border: 1px solid #333; border-radius: 10px; padding: 1rem;">
                            <div style="color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">Scene 4: SEMI Protocol</div>
                            <div style="color: #888; font-size: 0.9rem; margin-bottom: 0.5rem;">Visual: Message flow diagram</div>
                            <div style="color: var(--secondary); font-size: 0.85rem;">
                                Text Overlay:
                                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                    <li>"GEM/SECS Communication"</li>
                                    <li>"S1F13 → S1F14: SUCCESS"</li>
                                    <li>"EDA Trace: 10ms Resolution"</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Scene 5 -->
                        <div style="background: #000; border: 1px solid #333; border-radius: 10px; padding: 1rem;">
                            <div style="color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">Scene 5: ML Prediction</div>
                            <div style="color: #888; font-size: 0.9rem; margin-bottom: 0.5rem;">Visual: RUL chart with uncertainty</div>
                            <div style="color: var(--secondary); font-size: 0.85rem;">
                                Text Overlay:
                                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                    <li>"Bayesian LSTM Model"</li>
                                    <li>"RUL: 327 ± 29 hours"</li>
                                    <li>"95% Confidence Interval"</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Scene 6 -->
                        <div style="background: #000; border: 1px solid #333; border-radius: 10px; padding: 1rem;">
                            <div style="color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">Scene 6: Cleanroom</div>
                            <div style="color: #888; font-size: 0.9rem; margin-bottom: 0.5rem;">Visual: Dashboard with gauges</div>
                            <div style="color: var(--secondary); font-size: 0.85rem;">
                                Text Overlay:
                                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                    <li>"ISO Class 5 Compliant"</li>
                                    <li>"152 Particles/m³"</li>
                                    <li>"Policy Engine Active"</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0, 255, 136, 0.1); border-radius: 10px;">
                        <h4 style="color: var(--primary); margin-bottom: 0.5rem;">
                            <i class="fas fa-closed-captioning"></i> Automated Captioning
                        </h4>
                        <p style="color: #ccc; font-size: 0.9rem;">
                            The video includes AI-generated captions synchronized with the voice-over, displaying key technical terms, metrics, and commands. 
                            Captions are styled with color coding: <span style="color: var(--primary);">green for metrics</span>, 
                            <span style="color: var(--secondary);">blue for technical terms</span>, and 
                            <span style="color: var(--accent);">orange for important alerts</span>.
                        </p>
                    </div>
                </div>


            </section>

            <!-- Executive Overview -->
            <section id="overview" class="section">
                <h2><i class="fas fa-info-circle"></i> Executive Overview</h2>
                
                <div class="alert alert-info">
                    <i class="fas fa-lightbulb"></i>
                    <div>
                        <strong>V2 Enhancement:</strong> This documentation covers the enhanced V2 implementation that transforms the system into a deterministic, standards-compliant nervous system for semiconductor fabs with sub-millisecond control latency, native SEMI integration, and probabilistic maintenance with calibrated uncertainty.
                    </div>
                </div>

                <p>The IoT Robotics in Manufacturing V2 system provides a complete, production-grade platform for orchestrating robots in ISO Class 5/6 cleanrooms with deterministic real-time control, predictive maintenance, and full SEMI standards compliance.</p>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">&lt;1ms</div>
                        <div class="metric-label">P99 Latency</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">100k</div>
                        <div class="metric-label">Messages/sec</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">99.99%</div>
                        <div class="metric-label">Uptime SLA</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">&lt;5%</div>
                        <div class="metric-label">RUL MAE</div>
                    </div>
                </div>

                <h3><i class="fas fa-star"></i> Key Features</h3>
                <ul>
                    <li><strong>Deterministic Control:</strong> TSN/PTP time synchronization with hardware timestamping</li>
                    <li><strong>SEMI Compliance:</strong> Native GEM/SECS (E4/E5/E30) and EDA (E120/E125/E134)</li>
                    <li><strong>Predictive Maintenance:</strong> Bayesian LSTM with conformal prediction intervals</li>
                    <li><strong>Cleanroom Monitoring:</strong> Real-time particle, airflow, humidity tracking</li>
                    <li><strong>Robot Control:</strong> 6-DOF kinematics with collision detection</li>
                    <li><strong>Edge Computing:</strong> Distributed processing with time budget enforcement</li>
                    <li><strong>Security:</strong> mTLS, JWT, RBAC across all services</li>
                </ul>
            </section>

            <!-- Quickstart -->
            <section id="quickstart" class="section">
                <h2><i class="fas fa-rocket"></i> 60-Second Quickstart</h2>
                
                <div class="card">
                    <div class="card-title"><i class="fas fa-terminal"></i> Installation</div>
                    
                    <pre><code class="language-bash"># Clone repository
git clone https://github.com/org/IoT-Robotics-in-Manufacturing
cd IoT-Robotics-in-Manufacturing

# Generate certificates and start services
make dev

# Access the system
open http://localhost:3000</code></pre>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>

                <div class="card">
                    <div class="card-title"><i class="fas fa-docker"></i> Docker Compose</div>
                    
                    <pre><code class="language-bash"># Start all services
docker-compose up -d

# Check status
docker-compose ps

# View logs
docker-compose logs -f backend edge-gateway

# Stop services
docker-compose down</code></pre>
                </div>

                <h3><i class="fas fa-user"></i> Default Credentials</h3>
                <table>
                    <tr>
                        <th>Service</th>
                        <th>Username</th>
                        <th>Password</th>
                        <th>URL</th>
                    </tr>
                    <tr>
                        <td>Web UI</td>
                        <td>admin@example.com</td>
                        <td>Admin123!</td>
                        <td>http://localhost:3000</td>
                    </tr>
                    <tr>
                        <td>Grafana</td>
                        <td>admin</td>
                        <td>admin</td>
                        <td>http://localhost:3001</td>
                    </tr>
                    <tr>
                        <td>MLflow</td>
                        <td>-</td>
                        <td>-</td>
                        <td>http://localhost:5000</td>
                    </tr>
                </table>
            </section>

            <!-- System Architecture -->
            <section id="architecture" class="section">
                <h2><i class="fas fa-sitemap"></i> System Architecture</h2>
                
                <div class="architecture-diagram">
                    <pre>
┌──────────────────────────────────────────────────────────────┐
│                         Frontend (Next.js)                    │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐      │
│  │Dashboard │ │  Robots  │ │ Policies │ │  Alerts  │      │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘      │
└────────────────────────┬─────────────────────────────────────┘
                         │ HTTPS/WSS
┌────────────────────────▼─────────────────────────────────────┐
│                      Backend (NestJS)                         │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐      │
│  │   API    │ │ GraphQL  │ │WebSocket │ │  Auth    │      │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘      │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐      │
│  │  MQTT    │ │ OPC-UA   │ │ Policy   │ │Telemetry │      │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘      │
└────────────────────────┬─────────────────────────────────────┘
                         │ MQTT/OPC-UA (mTLS)
┌────────────────────────▼─────────────────────────────────────┐
│                     Edge Gateway                              │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐      │
│  │  Bridge  │ │  Buffer  │ │Inference │ │  Policy  │      │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘      │
└────────────────────────┬─────────────────────────────────────┘
         ┌───────────────┼───────────────┐
┌────────▼────────┐ ┌────▼────┐ ┌────────▼────────┐
│   Edge Robot    │ │Edge Sens│ │      ROS2       │
│ ┌─────┐ ┌─────┐│ ││Driver ││ │┌──────┐┌──────┐│
│ │Ctrl │ │Safe ││ │└───────┘│ ││Nodes ││MoveIt││
│ └─────┘ └─────┘│ └─────────┘ │└──────┘└──────┘│
└─────────────────┘             └─────────────────┘
                    </pre>
                </div>

                <h3><i class="fas fa-layer-group"></i> Technology Stack</h3>
                
                <div class="card">
                    <table>
                        <tr>
                            <th>Layer</th>
                            <th>Technologies</th>
                            <th>Purpose</th>
                        </tr>
                        <tr>
                            <td><span class="badge badge-primary">Frontend</span></td>
                            <td>Next.js 14, TypeScript, Tailwind CSS, Chart.js, Three.js</td>
                            <td>User interface and visualization</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-primary">Backend</span></td>
                            <td>NestJS, TypeORM, PostgreSQL, GraphQL, WebSockets</td>
                            <td>Business logic and data management</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-primary">Edge</span></td>
                            <td>Python 3.11, FastAPI, MQTT, OPC-UA</td>
                            <td>Device communication and edge processing</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-primary">ML</span></td>
                            <td>PyTorch, scikit-learn, MLflow, ONNX</td>
                            <td>Predictive maintenance and anomaly detection</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-primary">ROS</span></td>
                            <td>ROS2 Humble, MoveIt, Gazebo</td>
                            <td>Robot control and simulation</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-primary">Infrastructure</span></td>
                            <td>Docker, Kubernetes, Prometheus, Grafana</td>
                            <td>Deployment and monitoring</td>
                        </tr>
                    </table>
                </div>
            </section>

            <!-- Deterministic Control Section -->
            <section id="deterministic" class="section">
                <h2><i class="fas fa-clock"></i> Deterministic Real-Time Control</h2>
                
                <p>The V2 implementation provides deterministic control with sub-millisecond latency through Time-Sensitive Networking (TSN) and Precision Time Protocol (PTP) synchronization.</p>

                <h3 id="deterministic-tsn"><i class="fas fa-network-wired"></i> TSN Configuration</h3>
                
                <div class="card">
                    <div class="card-title">IEEE 802.1Qbv Time-Aware Shaping</div>
                    
                    <pre><code class="language-bash">#!/usr/bin/env bash
# TSN Configuration for Deterministic Fab Control

DEV=${1:-eth0}
GRANDMASTER=${2:-10.0.0.1}

echo "[TSN] Configuring time-aware shaping on $DEV"

# Configure taprio schedule for deterministic traffic
# TC0: Control (highest priority) - 300µs window
# TC1: Telemetry (medium priority) - 600µs window  
# TC2: Best-effort (low priority) - 100µs window
sudo tc qdisc replace dev "$DEV" parent root handle 100 taprio \
  num_tc 3 \
  map 0 1 2 2 2 2 2 2 \
  queues 1@0 1@1 1@2 \
  base-time 0 \
  sched-entry S 0x01 300000 \
  sched-entry S 0x02 600000 \
  sched-entry S 0x04 100000 \
  clockid CLOCK_TAI \
  flags 0x2</code></pre>
                </div>

                <h3 id="deterministic-ptp"><i class="fas fa-sync"></i> PTP Synchronization</h3>
                
                <div class="card">
                    <div class="card-title">PTP Configuration (ptp4l.conf)</div>
                    
                    <pre><code class="language-ini">[global]
# Fab-specific PTP configuration
verbose                 1
logging_level          6
time_stamping          hardware
network_transport      UDPv4
delay_mechanism        E2E
announceReceiptTimeout 3
syncReceiptTimeout     3
domainNumber          42
priority1             128
priority2             128
clock_class           248

# Hardware timestamping
hwts_filter           full

# Servo tuning for fab environment
clock_servo           linreg
first_step_threshold  0.00002
step_threshold        0.00002</code></pre>
                </div>

                <h3 id="deterministic-budget"><i class="fas fa-stopwatch"></i> Time Budget Management</h3>
                
                <div class="card">
                    <div class="card-title">Python Implementation</div>
                    
                    <pre><code class="language-python">"""
Deterministic time budget enforcement for real-time control loops.
"""

import time
import logging
from dataclasses import dataclass
from contextlib import contextmanager

@dataclass
class BudgetStats:
    """Statistics for budget tracking"""
    count: int = 0
    sum_ms: float = 0.0
    max_ms: float = 0.0
    violations: int = 0

class TimeBudget:
    """Manages deterministic time budgets for real-time operations."""
    
    def __init__(self, budget_ms: float, name: str = "operation"):
        self.budget_ms = budget_ms
        self.name = name
        self.start_ns = None
        self.stats = BudgetStats()
    
    @contextmanager
    def track(self, tag: str = ""):
        """Context manager for automatic timing"""
        self.start_ns = time.perf_counter_ns()
        try:
            yield self
        finally:
            elapsed_ns = time.perf_counter_ns() - self.start_ns
            elapsed_ms = elapsed_ns / 1e6
            
            # Update statistics
            self.stats.count += 1
            self.stats.sum_ms += elapsed_ms
            self.stats.max_ms = max(self.stats.max_ms, elapsed_ms)
            
            if elapsed_ms > self.budget_ms:
                self.stats.violations += 1
                logging.error(f"{self.name} exceeded budget: {elapsed_ms:.3f}ms > {self.budget_ms}ms")</code></pre>
                </div>

                <div class="alert alert-success">
                    <i class="fas fa-check-circle"></i>
                    <div>
                        <strong>Performance Achievement:</strong> With TSN and PTP configuration, the system achieves &lt;1ms P99 latency for control operations, meeting semiconductor fab requirements.
                    </div>
                </div>
            </section>

            <!-- SEMI Standards Section -->
            <section id="semi" class="section">
                <h2><i class="fas fa-industry"></i> SEMI Standards Integration</h2>
                
                <p>Native implementation of SEMI standards for seamless integration with fab equipment and MES systems.</p>

                <h3 id="semi-gem"><i class="fas fa-exchange-alt"></i> GEM/SECS Protocol</h3>
                
                <div class="card">
                    <div class="card-title">TypeScript Implementation</div>
                    
                    <pre><code class="language-typescript">import { Injectable, Logger } from '@nestjs/common';
import * as net from 'net';

@Injectable()
export class GemService {
  private readonly logger = new Logger(GemService.name);
  private socket: net.Socket;
  private controlState: 'OFFLINE' | 'LOCAL' | 'REMOTE' = 'OFFLINE';
  
  async connect(host: string, port: number): Promise<void> {
    return new Promise((resolve, reject) => {
      this.logger.log(`Connecting to GEM host ${host}:${port}`);
      
      this.socket = new net.Socket();
      
      this.socket.on('connect', () => {
        this.logger.log('HSMS-SS TCP connection established');
        // Send Select.req (S1F13)
        this.sendSelectRequest()
          .then(() => resolve())
          .catch(reject);
      });
      
      this.socket.connect(port, host);
    });
  }
  
  private async sendSelectRequest(): Promise<void> {
    const msg: SecsMessage = {
      stream: 1,
      function: 13,
      replyExpected: true,
      body: []
    };
    
    const reply = await this.sendAndWait(msg);
    
    if (reply.stream === 1 && reply.function === 14) {
      // Select.rsp received
      const commAck = this.parseCommAck(reply.body);
      if (commAck === 0) {
        this.logger.log('Select successful, communication established');
        await this.establishCommunications();
      }
    }
  }</code></pre>
                </div>

                <h3 id="semi-eda"><i class="fas fa-stream"></i> EDA/Interface A</h3>
                
                <div class="tabs">
                    <button class="tab active" onclick="switchTab(event, 'eda-overview')">Overview</button>
                    <button class="tab" onclick="switchTab(event, 'eda-dcp')">Data Collection Plans</button>
                    <button class="tab" onclick="switchTab(event, 'eda-trace')">Trace Data</button>
                </div>

                <div id="eda-overview" class="tab-content active">
                    <p>Equipment Data Acquisition (EDA) provides high-speed data collection with:</p>
                    <ul>
                        <li>E120 - Specification for the Common Equipment Model</li>
                        <li>E125 - Equipment Self-Description</li>
                        <li>E134 - Data Collection Management</li>
                        <li>E164 - EDA Common Metadata</li>
                    </ul>
                </div>

                <div id="eda-dcp" class="tab-content">
                    <pre><code class="language-typescript">async defineDcp(spec: DcpSpec) {
  this.logger.debug(`Defining DCP ${spec.id}`);
  
  const dcpResult = await this.client.CreateDcpAsync({
    sessionId: this.session,
    dcpId: spec.id,
    dcpName: spec.name,
    description: spec.description,
    reportType: 'TRACE',
    reportRate: spec.periodMs,
    parameters: spec.variables.map(v => ({
      parameterId: v,
      samplingRate: spec.periodMs,
      method: 'SNAPSHOT'
    })),
    maxSamples: spec.maxSamples || 1000000
  });
}</code></pre>
                </div>

                <div id="eda-trace" class="tab-content">
                    <p>Real-time trace data collection with 10ms resolution:</p>
                    <table>
                        <tr>
                            <th>DCP ID</th>
                            <th>Name</th>
                            <th>Period</th>
                            <th>Variables</th>
                        </tr>
                        <tr>
                            <td>DCP-001</td>
                            <td>Robot Telemetry</td>
                            <td>100ms</td>
                            <td>Position, Velocity, Current, Temperature</td>
                        </tr>
                        <tr>
                            <td>DCP-002</td>
                            <td>Cleanroom Metrics</td>
                            <td>1000ms</td>
                            <td>Particles, Airflow, Humidity, Pressure</td>
                        </tr>
                        <tr>
                            <td>DCP-003</td>
                            <td>Vibration Analysis</td>
                            <td>10ms</td>
                            <td>RMS, Peak, Crest Factor, Kurtosis</td>
                        </tr>
                    </table>
                </div>

                <h3 id="semi-messages"><i class="fas fa-envelope"></i> Message Reference</h3>
                
                <table>
                    <tr>
                        <th>Stream/Function</th>
                        <th>Name</th>
                        <th>Direction</th>
                        <th>Purpose</th>
                    </tr>
                    <tr>
                        <td>S1F1/S1F2</td>
                        <td>Are You There</td>
                        <td>H↔E</td>
                        <td>Communication check</td>
                    </tr>
                    <tr>
                        <td>S1F13/S1F14</td>
                        <td>Establish Comm</td>
                        <td>H→E</td>
                        <td>Initialize connection</td>
                    </tr>
                    <tr>
                        <td>S2F41/S2F42</td>
                        <td>Host Command</td>
                        <td>H→E</td>
                        <td>Remote control</td>
                    </tr>
                    <tr>
                        <td>S6F11/S6F12</td>
                        <td>Event Report</td>
                        <td>E→H</td>
                        <td>Event notification</td>
                    </tr>
                    <tr>
                        <td>S7F1/S7F2</td>
                        <td>Process Program</td>
                        <td>H→E</td>
                        <td>Recipe management</td>
                    </tr>
                </table>
            </section>

            <!-- Machine Learning Section -->
            <section id="ml" class="section">
                <h2><i class="fas fa-brain"></i> Probabilistic Machine Learning</h2>
                
                <p>Advanced ML models with uncertainty quantification for predictive maintenance and anomaly detection.</p>

                <h3 id="ml-rul"><i class="fas fa-chart-line"></i> RUL Prediction</h3>
                
                <div class="card">
                    <div class="card-title">Bayesian LSTM Architecture</div>
                    
                    <pre><code class="language-python">class BayesianLSTM(nn.Module):
    """
    Bayesian LSTM for probabilistic RUL prediction.
    Outputs mean and log-variance for uncertainty estimation.
    """
    
    def __init__(self, input_dim: int = 16, hidden_dim: int = 128, 
                 num_layers: int = 2, dropout: float = 0.2):
        super().__init__()
        
        self.lstm = nn.LSTM(
            input_dim, hidden_dim, num_layers,
            batch_first=True, dropout=dropout if num_layers > 1 else 0
        )
        
        # Attention mechanism for sequence weighting
        self.attention = nn.Sequential(
            nn.Linear(hidden_dim, hidden_dim // 2),
            nn.Tanh(),
            nn.Linear(hidden_dim // 2, 1)
        )
        
        # Probabilistic output layers
        self.fc_mu = nn.Sequential(
            nn.Linear(hidden_dim, 64),
            nn.ReLU(),
            nn.Dropout(dropout),
            nn.Linear(64, 32),
            nn.ReLU(),
            nn.Linear(32, 1)
        )
        
        self.fc_logvar = nn.Sequential(
            nn.Linear(hidden_dim, 64),
            nn.ReLU(),
            nn.Dropout(dropout),
            nn.Linear(64, 32),
            nn.ReLU(),
            nn.Linear(32, 1)
        )</code></pre>
                </div>

                <h3 id="ml-conformal"><i class="fas fa-chart-area"></i> Conformal Prediction</h3>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Conformal Prediction:</strong> Provides prediction intervals with guaranteed coverage probability, essential for safety-critical maintenance decisions.
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">Split Conformal Implementation</div>
                    
                    <pre><code class="language-python">class ConformalRUL:
    """
    Conformal prediction wrapper for RUL models.
    Provides prediction intervals with statistical guarantees.
    """
    
    def __init__(self, model: torch.nn.Module, alpha: float = 0.1, 
                 method: str = 'adaptive'):
        self.model = model.eval()
        self.alpha = alpha  # Miscoverage rate
        self.method = method
        self.calibration_scores = None
        self.quantile = None
    
    @torch.no_grad()
    def calibrate(self, X_cal: np.ndarray, y_cal: np.ndarray):
        """Calibrate conformal predictor on calibration set."""
        scores = []
        
        for x, y in zip(X_cal, y_cal):
            x_tensor = torch.FloatTensor(x[None, ...])
            mu, logvar = self.model(x_tensor)
            sigma = np.exp(0.5 * logvar.item())
            
            # Normalized nonconformity score
            score = abs(y - mu.item()) / (sigma + 1e-8)
            scores.append(score)
        
        # Compute quantile for desired coverage
        n = len(scores)
        q_level = np.ceil((n + 1) * (1 - self.alpha)) / n
        self.quantile = np.quantile(scores, q_level)
        
        return self</code></pre>
                </div>

                <h3 id="ml-features"><i class="fas fa-wave-square"></i> Feature Engineering</h3>
                
                <table>
                    <tr>
                        <th>Feature</th>
                        <th>Domain</th>
                        <th>Formula</th>
                        <th>Significance</th>
                    </tr>
                    <tr>
                        <td>RMS</td>
                        <td>Time</td>
                        <td>√(Σx²/N)</td>
                        <td>Overall vibration energy</td>
                    </tr>
                    <tr>
                        <td>Crest Factor</td>
                        <td>Time</td>
                        <td>Peak/RMS</td>
                        <td>Impact detection</td>
                    </tr>
                    <tr>
                        <td>Kurtosis</td>
                        <td>Time</td>
                        <td>E[(X-μ)⁴]/σ⁴</td>
                        <td>Bearing fault indicator</td>
                    </tr>
                    <tr>
                        <td>Spectral Centroid</td>
                        <td>Frequency</td>
                        <td>Σ(f·P(f))/ΣP(f)</td>
                        <td>Frequency shift detection</td>
                    </tr>
                </table>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">&lt;5%</div>
                        <div class="metric-label">MAE</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">95%</div>
                        <div class="metric-label">Coverage</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">0.92</div>
                        <div class="metric-label">R² Score</div>
                    </div>
                </div>
            </section>

            <!-- Monitoring Section -->
            <section id="monitoring" class="section">
                <h2><i class="fas fa-microscope"></i> Cleanroom Environment Monitoring</h2>
                
                <h3 id="monitoring-metrics"><i class="fas fa-tachometer-alt"></i> Real-time Metrics</h3>
                
                <div class="card">
                    <table>
                        <tr>
                            <th>Parameter</th>
                            <th>ISO Class 5</th>
                            <th>ISO Class 6</th>
                            <th>Current</th>
                            <th>Status</th>
                        </tr>
                        <tr>
                            <td>Particles (0.5μm)</td>
                            <td>&lt;352/m³</td>
                            <td>&lt;3520/m³</td>
                            <td>152/m³</td>
                            <td><span class="badge badge-primary">✓ Compliant</span></td>
                        </tr>
                        <tr>
                            <td>Airflow</td>
                            <td>0.45±0.05 m/s</td>
                            <td>0.45±0.05 m/s</td>
                            <td>0.48 m/s</td>
                            <td><span class="badge badge-primary">✓ Optimal</span></td>
                        </tr>
                        <tr>
                            <td>Humidity</td>
                            <td>45±5%</td>
                            <td>45±5%</td>
                            <td>45.2%</td>
                            <td><span class="badge badge-primary">✓ Normal</span></td>
                        </tr>
                        <tr>
                            <td>Temperature</td>
                            <td>21±1°C</td>
                            <td>21±1°C</td>
                            <td>21.3°C</td>
                            <td><span class="badge badge-primary">✓ Stable</span></td>
                        </tr>
                    </table>
                </div>

                <h3 id="monitoring-policies"><i class="fas fa-shield-alt"></i> Policy Engine</h3>
                
                <div class="card">
                    <div class="card-title">YAML Policy Configuration</div>
                    
                    <pre><code class="language-yaml">cleanroom:
  - parameter: particles
    operator: gt
    value: 1000
    severity: critical
    action: block
    description: "ISO Class 5 limit exceeded"
  
  - parameter: airflow
    operator: lt
    value: 0.45
    severity: warning
    action: alert
    description: "Airflow below minimum"
  
  - parameter: humidity
    operator: between
    value: [40, 50]
    severity: warning
    action: alert
    description: "Humidity outside optimal range"

safety:
  - parameter: vibration_rms
    operator: gt
    value: 0.7
    severity: critical
    action: block
    description: "Excessive vibration detected"
  
  - parameter: temperature
    operator: gt
    value: 80
    severity: critical
    action: block
    description: "Temperature exceeds safe limit"</code></pre>
                </div>
            </section>

            <!-- Deployment Section -->
            <section id="deployment" class="section">
                <h2><i class="fas fa-rocket"></i> Production Deployment</h2>
                
                <h3 id="deployment-k8s"><i class="fas fa-dharmachakra"></i> Kubernetes Configuration</h3>
                
                <div class="card">
                    <div class="card-title">Deployment Manifest</div>
                    
                    <pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: edge-gateway-v2
  namespace: iot-robotics
spec:
  replicas: 2
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  selector:
    matchLabels:
      app: edge-gateway-v2
  template:
    metadata:
      labels:
        app: edge-gateway-v2
        version: v2
    spec:
      hostNetwork: true  # For hardware timestamping
      nodeSelector:
        node-role.kubernetes.io/edge: "true"
        feature.node.kubernetes.io/network-sriov.capable: "true"
      
      containers:
      - name: edge-gateway
        image: ghcr.io/org/iot-robotics-edge-gateway:v2
        resources:
          requests:
            memory: "512Mi"
            cpu: "1000m"
            hugepages-2Mi: "256Mi"
          limits:
            memory: "1Gi"
            cpu: "2000m"
        
        securityContext:
          capabilities:
            add:
            - NET_ADMIN
            - SYS_TIME
            - SYS_NICE</code></pre>
                </div>

                <h3 id="deployment-cicd"><i class="fas fa-code-branch"></i> CI/CD Pipeline</h3>
                
                <div class="card">
                    <div class="card-title">GitHub Actions Workflow</div>
                    
                    <pre><code class="language-yaml">name: CI/CD Pipeline V2

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test-determinism:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Install PTP/TSN tools
        run: |
          sudo apt-get update
          sudo apt-get install -y linuxptp ethtool iproute2
      
      - name: Run latency tests
        run: |
          cd edge-agents
          python -m pytest tests/test_timebudget.py -v

  test-semi:
    runs-on: ubuntu-latest
    steps:
      - name: Run SEMI adapter tests
        run: npm run test:semi -- --coverage
      
      - name: Test GEM/SECS protocol
        run: npm run test:e2e:gem

  deploy-production:
    runs-on: ubuntu-latest
    needs: [test-integration, security]
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Blue-green deployment
        run: |
          ./scripts/blue_green_deploy.sh production ${{ github.sha }}</code></pre>
                </div>

                <h3 id="deployment-security"><i class="fas fa-lock"></i> Security Configuration</h3>
                
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <strong>Security Requirements:</strong> All production deployments must use mTLS certificates, rotate secrets every 30 days, and pass security scanning with Trivy.
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">Certificate Generation</div>
                    
                    <pre><code class="language-bash">#!/bin/bash
# Certificate generation script for mTLS

CERT_DIR="./certs"
mkdir -p $CERT_DIR

# Generate CA private key
openssl genrsa -out $CERT_DIR/ca.key 4096

# Generate CA certificate
openssl req -new -x509 -days 3650 -key $CERT_DIR/ca.key -out $CERT_DIR/ca.crt \
  -subj "/C=US/ST=CA/L=San Jose/O=IoT Robotics/OU=Security/CN=IoT-CA"

# Generate server certificate
openssl genrsa -out $CERT_DIR/server.key 4096
openssl req -new -key $CERT_DIR/server.key -out $CERT_DIR/server.csr \
  -subj "/C=US/ST=CA/L=San Jose/O=IoT Robotics/OU=Backend/CN=backend.iot-robotics.local"
openssl x509 -req -days 365 -in $CERT_DIR/server.csr \
  -CA $CERT_DIR/ca.crt -CAkey $CERT_DIR/ca.key -CAcreateserial \
  -out $CERT_DIR/server.crt</code></pre>
                </div>
            </section>

            <!-- API Reference -->
            <section id="api" class="section">
                <h2><i class="fas fa-code"></i> API Reference</h2>
                
                <h3><i class="fas fa-plug"></i> REST API Endpoints</h3>
                
                <table>
                    <tr>
                        <th>Method</th>
                        <th>Endpoint</th>
                        <th>Description</th>
                        <th>Auth</th>
                    </tr>
                    <tr>
                        <td><span class="badge badge-primary">GET</span></td>
                        <td>/api/robots</td>
                        <td>List all robots</td>
                        <td>JWT</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-primary">GET</span></td>
                        <td>/api/robots/:id</td>
                        <td>Get robot details</td>
                        <td>JWT</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-secondary">POST</span></td>
                        <td>/api/robots/:id/command</td>
                        <td>Send robot command</td>
                        <td>JWT + RBAC</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-primary">GET</span></td>
                        <td>/api/cleanroom/status</td>
                        <td>Get cleanroom metrics</td>
                        <td>JWT</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-secondary">POST</span></td>
                        <td>/api/ml/predict</td>
                        <td>RUL prediction</td>
                        <td>JWT</td>
                    </tr>
                </table>

                <h3 id="api-graphql"><i class="fas fa-project-diagram"></i> GraphQL Schema</h3>
                
                <pre><code class="language-graphql">type Robot {
  id: ID!
  name: String!
  status: RobotStatus!
  position: Position!
  health: Float!
  rul: Float!
  telemetry: [Telemetry!]!
}

type Query {
  robots: [Robot!]!
  robot(id: ID!): Robot
  cleanroomStatus: CleanroomStatus!
  predictions(robotId: ID!): [Prediction!]!
}

type Mutation {
  sendCommand(robotId: ID!, command: CommandInput!): CommandResult!
  updatePolicy(policy: PolicyInput!): Policy!
}

type Subscription {
  telemetry(robotId: ID!): Telemetry!
  alerts: Alert!
}</code></pre>

                <h3 id="api-websocket"><i class="fas fa-broadcast-tower"></i> WebSocket Events</h3>
                
                <table>
                    <tr>
                        <th>Event</th>
                        <th>Direction</th>
                        <th>Payload</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>telemetry</td>
                        <td>Server→Client</td>
                        <td>{robotId, metrics, timestamp}</td>
                        <td>Real-time telemetry</td>
                    </tr>
                    <tr>
                        <td>alert</td>
                        <td>Server→Client</td>
                        <td>{type, severity, message}</td>
                        <td>System alerts</td>
                    </tr>
                    <tr>
                        <td>command</td>
                        <td>Client→Server</td>
                        <td>{robotId, action, params}</td>
                        <td>Robot control</td>
                    </tr>
                    <tr>
                        <td>subscribe</td>
                        <td>Client→Server</td>
                        <td>{channel, filters}</td>
                        <td>Subscribe to updates</td>
                    </tr>
                </table>
            </section>

            <!-- Troubleshooting -->
            <section id="troubleshooting" class="section">
                <h2><i class="fas fa-tools"></i> Troubleshooting</h2>
                
                <div class="card">
                    <div class="card-title"><i class="fas fa-exclamation-circle"></i> Common Issues</div>
                    
                    <h4>PTP Synchronization Fails</h4>
                    <pre><code class="language-bash"># Check PTP status
sudo ptp4l -m -q -i eth0

# Verify hardware timestamping
ethtool -T eth0

# Check system clock sync
phc2sys -s /dev/ptp0 -w</code></pre>

                    <h4>SEMI Connection Timeout</h4>
                    <pre><code class="language-bash"># Test SEMI connectivity
telnet gem-host 5000

# Check firewall rules
sudo iptables -L -n | grep 5000

# Verify certificates
openssl s_client -connect gem-host:5000</code></pre>

                    <h4>High Latency Alerts</h4>
                    <pre><code class="language-bash"># Check TSN configuration
tc -s qdisc show dev eth0

# Monitor latency
ping -A -D -s 1400 target-host

# Check CPU scheduling
chrt -p $(pidof edge-gateway)</code></pre>
                </div>
            </section>

            <!-- Performance Tuning -->
            <section id="performance" class="section">
                <h2><i class="fas fa-tachometer-alt"></i> Performance Tuning</h2>
                
                <div class="card">
                    <table>
                        <tr>
                            <th>Parameter</th>
                            <th>Default</th>
                            <th>Optimized</th>
                            <th>Impact</th>
                        </tr>
                        <tr>
                            <td>CPU Governor</td>
                            <td>ondemand</td>
                            <td>performance</td>
                            <td>-20% latency</td>
                        </tr>
                        <tr>
                            <td>Network IRQ Affinity</td>
                            <td>All CPUs</td>
                            <td>Dedicated cores</td>
                            <td>-30% jitter</td>
                        </tr>
                        <tr>
                            <td>Huge Pages</td>
                            <td>Disabled</td>
                            <td>256MB</td>
                            <td>+15% throughput</td>
                        </tr>
                        <tr>
                            <td>NUMA Binding</td>
                            <td>None</td>
                            <td>Node 0</td>
                            <td>-25% memory latency</td>
                        </tr>
                    </table>
                </div>

                <pre><code class="language-bash"># Set CPU governor
echo performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor

# Configure IRQ affinity
echo 2 > /proc/irq/24/smp_affinity

# Enable huge pages
echo 128 > /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages

# NUMA binding
numactl --cpunodebind=0 --membind=0 ./edge-gateway</code></pre>
            </section>

            <!-- Glossary -->
            <section id="glossary" class="section">
                <h2><i class="fas fa-book"></i> Glossary</h2>
                
                <div class="card">
                    <table>
                        <tr>
                            <th>Term</th>
                            <th>Definition</th>
                        </tr>
                        <tr>
                            <td><strong>TSN</strong></td>
                            <td>Time-Sensitive Networking - IEEE standards for deterministic Ethernet</td>
                        </tr>
                        <tr>
                            <td><strong>PTP</strong></td>
                            <td>Precision Time Protocol - IEEE 1588 for sub-microsecond synchronization</td>
                        </tr>
                        <tr>
                            <td><strong>SEMI</strong></td>
                            <td>Semiconductor Equipment and Materials International standards</td>
                        </tr>
                        <tr>
                            <td><strong>GEM</strong></td>
                            <td>Generic Equipment Model - SEMI E30 standard</td>
                        </tr>
                        <tr>
                            <td><strong>SECS</strong></td>
                            <td>SEMI Equipment Communications Standard - SEMI E4/E5</td>
                        </tr>
                        <tr>
                            <td><strong>EDA</strong></td>
                            <td>Equipment Data Acquisition - SEMI Interface A standards</td>
                        </tr>
                        <tr>
                            <td><strong>RUL</strong></td>
                            <td>Remaining Useful Life - Time until maintenance required</td>
                        </tr>
                        <tr>
                            <td><strong>mTLS</strong></td>
                            <td>Mutual TLS - Bidirectional certificate authentication</td>
                        </tr>
                        <tr>
                            <td><strong>DCP</strong></td>
                            <td>Data Collection Plan - EDA configuration for trace data</td>
                        </tr>
                        <tr>
                            <td><strong>HSMS</strong></td>
                            <td>High-Speed SECS Message Services - TCP/IP transport for SECS</td>
                        </tr>
                    </table>
                </div>
            </section>

            <!-- Footer -->
            <footer style="margin-top: 4rem; padding: 2rem 0; border-top: 1px solid var(--border); text-align: center; color: #666;">
                <p>IoT Robotics V2 Technical Documentation | Version 2.0.0 | Last Updated: 2024</p>
                <p>© 2024 IoT Robotics Inc. All rights reserved.</p>
            </footer>
        </main>
    </div>

    <script>
        // Table of Contents Active State
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('.section');
            const tocItems = document.querySelectorAll('.toc-item');
            
            const observerOptions = {
                root: null,
                rootMargin: '-100px 0px -70% 0px',
                threshold: 0
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        tocItems.forEach(item => {
                            item.classList.remove('active');
                            if (item.getAttribute('href') === `#${id}`) {
                                item.classList.add('active');
                            }
                        });
                    }
                });
            }, observerOptions);
            
            sections.forEach(section => observer.observe(section));
        });

        // Search Functionality
        document.getElementById('search-box').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const sections = document.querySelectorAll('.section');
            
            sections.forEach(section => {
                const text = section.textContent.toLowerCase();
                if (text.includes(query)) {
                    section.style.display = 'block';
                } else {
                    section.style.display = query ? 'none' : 'block';
                }
            });
        });

        // Copy Code Button
        function copyCode(button) {
            const pre = button.parentElement.querySelector('code');
            const text = pre.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = 'var(--primary)';
                button.style.color = 'var(--dark)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.style.color = '';
                }, 2000);
            });
        }

        // Tab Switching
        function switchTab(event, tabId) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // Smooth Scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Mobile Menu Toggle
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }
    </script>
</body>
</html>
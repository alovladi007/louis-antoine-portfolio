<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metamaterials Research - Louis Antoine</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        /* Ensure dark theme compatibility */
        body {
            background: #0a0a0a;
            color: #e5e7eb;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #f59e0b;
        }
        
        p, li {
            color: #e5e7eb;
        }
        
        .hero-section {
            background: linear-gradient(135deg, #6a1b9a 0%, #8e24aa 100%);
            color: white;
            padding: 100px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTM2IDM0djItSDI0di0yaDEyem0wLTE2djJIMjR2LTJoMTJ6Ii8+PC9nPjwvZz48L3N2Zz4=');
            opacity: 0.1;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
        }
        
        .hero-title {
            font-size: 3.5em;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .hero-subtitle {
            font-size: 1.5em;
            margin-bottom: 30px;
            opacity: 0.9;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-tags {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        .hero-tag {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin: 50px 0;
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .metric-value {
            font-size: 3em;
            font-weight: 700;
            color: #a855f7;
            margin-bottom: 10px;
        }
        
        .metric-label {
            font-size: 1.1em;
            color: #9ca3af;
        }
        
        .visualization-container {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .visualization-container h2 {
            color: #f59e0b;
            margin-bottom: 30px;
        }
        
        .tech-innovation {
            background: linear-gradient(135deg, rgba(106, 27, 154, 0.1) 0%, rgba(142, 36, 170, 0.05) 100%);
            border: 1px solid rgba(142, 36, 170, 0.2);
            border-radius: 15px;
            padding: 40px;
            margin: 30px 0;
        }
        
        .innovation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .innovation-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.3);
            transition: transform 0.3s;
        }
        
        .innovation-card:hover {
            transform: translateY(-3px);
            border-color: #a855f7;
        }
        
        .innovation-icon {
            font-size: 3em;
            color: #8e24aa;
            margin-bottom: 20px;
        }
        
        .demo-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 60px 0;
            margin: 50px 0;
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .demo-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transition: transform 0.3s;
        }
        
        .demo-card:hover {
            transform: translateY(-5px);
        }
        
        .demo-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 15px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .demo-link:hover {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(147, 51, 234, 0.4);
        }
        
        .demo-header {
            background: linear-gradient(135deg, #8e24aa 0%, #ab47bc 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .demo-content {
            padding: 30px;
        }
        
        .research-timeline {
            position: relative;
            padding: 40px 0;
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            margin: 30px 0;
            position: relative;
        }
        
        .timeline-marker {
            width: 20px;
            height: 20px;
            background: #8e24aa;
            border-radius: 50%;
            margin-right: 30px;
            z-index: 1;
        }
        
        .timeline-content {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            flex: 1;
        }
        
        .timeline-content h4 {
            color: #a855f7;
            margin-bottom: 10px;
        }
        
        .timeline-content p {
            color: #e5e7eb;
        }
        
        .code-showcase {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            overflow-x: auto;
        }
        
        .code-showcase pre {
            margin: 0;
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.6;
        }
        
        .interactive-demo {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .control-group {
            margin: 15px 0;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .control-group input[type="range"] {
            width: 100%;
            margin-bottom: 10px;
        }
        
        .value-display {
            display: inline-block;
            background: #8e24aa;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2em;
            }
            
            .hero-subtitle {
                font-size: 1.2em;
            }
            
            .metric-value {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="index.html" class="logo">LA</a>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="index.html#about" class="nav-link">About</a></li>
                <li><a href="index.html#skills" class="nav-link">Skills</a></li>
                <li><a href="index.html#projects" class="nav-link">Projects</a></li>
                <li><a href="index.html#experience" class="nav-link">Experience</a></li>
                <li><a href="index.html#contact" class="nav-link">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container hero-content">
            <h1 class="hero-title">Metamaterials Research</h1>
            <p class="hero-subtitle">Design and fabrication of engineered metamaterials with negative refractive index for applications in cloaking, superlensing, and electromagnetic wave manipulation. Focus on terahertz and optical frequency ranges.</p>
            <div class="hero-tags">
                <span class="hero-tag"><i class="fas fa-wave-square"></i> Electromagnetic Design</span>
                <span class="hero-tag"><i class="fas fa-cube"></i> COMSOL</span>
                <span class="hero-tag"><i class="fas fa-microchip"></i> Nanofabrication</span>
                <span class="hero-tag"><i class="fas fa-lightbulb"></i> Photonics</span>
            </div>
        </div>
    </section>

    <section class="detail-page">
        <div class="container">
            <div class="back-link">
                <a href="additional-projects.html"><i class="fas fa-arrow-left"></i> Back to Additional Projects</a>
            </div>

            <!-- Key Performance Metrics -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">-2.3</div>
                    <div class="metric-label">Negative Refractive Index</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">0.3-10 THz</div>
                    <div class="metric-label">Operating Frequency Range</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">λ/10</div>
                    <div class="metric-label">Sub-wavelength Resolution</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">95%</div>
                    <div class="metric-label">Cloaking Efficiency</div>
                </div>
            </div>

            <!-- Project Overview -->
            <div class="project-overview">
                <h2>Engineering Electromagnetic Properties Beyond Nature</h2>
                <p>This groundbreaking research explores the design and fabrication of artificial metamaterials that exhibit extraordinary electromagnetic properties not found in natural materials. By engineering sub-wavelength structures, we achieve negative refractive index, enabling revolutionary applications in invisibility cloaking, perfect lensing, and unprecedented control over electromagnetic wave propagation.</p>
                
                <div class="key-features">
                    <h3>Core Research Areas</h3>
                    <ul>
                        <li><strong>Negative Index Metamaterials:</strong> Split-ring resonators and wire arrays achieving simultaneous negative permittivity and permeability</li>
                        <li><strong>Transformation Optics:</strong> Spatial coordinate transformations for designing invisibility cloaks and optical illusion devices</li>
                        <li><strong>Metasurface Engineering:</strong> Ultra-thin planar structures for wavefront manipulation and beam steering</li>
                        <li><strong>Terahertz Metamaterials:</strong> Bridging the THz gap with active and tunable metamaterial devices</li>
                        <li><strong>Hyperbolic Metamaterials:</strong> Extreme anisotropy for sub-diffraction imaging and enhanced light-matter interactions</li>
                    </ul>
                </div>
            </div>

            <!-- Technical Innovation Section -->
            <div class="tech-innovation">
                <h2>Technical Innovations</h2>
                <div class="innovation-grid">
                    <div class="innovation-card">
                        <div class="innovation-icon"><i class="fas fa-atom"></i></div>
                        <h3>Split-Ring Resonator Design</h3>
                        <p>Novel nested SRR geometry achieving broadband negative index from 0.5-2 THz with minimal losses (FOM > 20)</p>
                    </div>
                    <div class="innovation-card">
                        <div class="innovation-icon"><i class="fas fa-eye-slash"></i></div>
                        <h3>Invisibility Cloaking</h3>
                        <p>Cylindrical cloak design using gradient index metamaterials, achieving >90% reduction in scattering cross-section</p>
                    </div>
                    <div class="innovation-card">
                        <div class="innovation-icon"><i class="fas fa-search-plus"></i></div>
                        <h3>Superlensing</h3>
                        <p>Hyperlens design enabling λ/10 resolution imaging, surpassing the diffraction limit by 5×</p>
                    </div>
                </div>
            </div>

            <!-- Advanced 3D Metamaterial Structure Visualization -->
            <div class="visualization-container" style="background: linear-gradient(135deg, rgba(106, 27, 154, 0.05) 0%, rgba(142, 36, 170, 0.02) 100%); border: 2px solid rgba(168, 85, 247, 0.3); padding: 50px 40px;">
                <h2 style="color: #a78bfa; font-size: 2.2em; margin-bottom: 30px; text-align: center;">
                    <i class="fas fa-cube"></i> 3D Metamaterial Structure Visualization
                </h2>
                
                <!-- Structure Type Selector -->
                <div style="display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; flex-wrap: wrap;">
                    <button onclick="showStructure('srr')" id="srrBtn" class="structure-btn active-structure">
                        <i class="fas fa-ring"></i> Split-Ring Resonator
                    </button>
                    <button onclick="showStructure('fishnet')" id="fishnetBtn" class="structure-btn">
                        <i class="fas fa-th"></i> Fishnet Structure
                    </button>
                    <button onclick="showStructure('wire')" id="wireBtn" class="structure-btn">
                        <i class="fas fa-grip-lines-vertical"></i> Wire Array
                    </button>
                    <button onclick="showStructure('multilayer')" id="multilayerBtn" class="structure-btn">
                        <i class="fas fa-layer-group"></i> Multilayer Stack
                    </button>
                </div>
                
                <!-- Main Visualization Area -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                    <!-- 3D Model Display -->
                    <div style="background: linear-gradient(135deg, #1a1a2e 0%, #0f0f23 100%); border-radius: 20px; padding: 30px; position: relative; overflow: hidden;">
                        <h3 style="color: #a78bfa; margin-bottom: 20px; text-align: center;">Structure Visualization</h3>
                        
                        <!-- Interactive Structure Preview -->
                        <div style="height: 400px; background: rgba(0,0,0,0.3); border-radius: 15px; position: relative; overflow: hidden;">
                            <!-- Animated Wave Pattern Background -->
                            <div style="position: absolute; width: 100%; height: 100%; opacity: 0.3;">
                                <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                                    <defs>
                                        <linearGradient id="waveGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:0.5">
                                                <animate attributeName="stop-color" values="#60a5fa;#a78bfa;#60a5fa" dur="4s" repeatCount="indefinite" />
                                            </stop>
                                            <stop offset="100%" style="stop-color:#a78bfa;stop-opacity:0.5">
                                                <animate attributeName="stop-color" values="#a78bfa;#60a5fa;#a78bfa" dur="4s" repeatCount="indefinite" />
                                            </stop>
                                        </linearGradient>
                                    </defs>
                                    <path d="M0,200 Q100,100 200,200 T400,200 T600,200 T800,200" 
                                          stroke="url(#waveGradient)" 
                                          stroke-width="2" 
                                          fill="none"
                                          opacity="0.5">
                                        <animate attributeName="d" 
                                                values="M0,200 Q100,100 200,200 T400,200 T600,200 T800,200;
                                                        M0,200 Q100,300 200,200 T400,200 T600,200 T800,200;
                                                        M0,200 Q100,100 200,200 T400,200 T600,200 T800,200"
                                                dur="3s" 
                                                repeatCount="indefinite" />
                                    </path>
                                    <path d="M0,150 Q150,250 300,150 T600,150 T900,150" 
                                          stroke="url(#waveGradient)" 
                                          stroke-width="2" 
                                          fill="none"
                                          opacity="0.5">
                                        <animate attributeName="d" 
                                                values="M0,150 Q150,250 300,150 T600,150 T900,150;
                                                        M0,150 Q150,50 300,150 T600,150 T900,150;
                                                        M0,150 Q150,250 300,150 T600,150 T900,150"
                                                dur="4s" 
                                                repeatCount="indefinite" />
                                    </path>
                                </svg>
                            </div>
                            
                            <!-- Interactive Structure Display -->
                            <div id="structure-display" style="position: relative; height: 100%; display: flex; align-items: center; justify-content: center;">
                                <!-- Default SRR Display -->
                                <div id="srr-display" class="structure-preview" style="text-align: center;">
                                    <div style="position: relative; width: 200px; height: 200px; margin: 0 auto;">
                                        <!-- Animated SRR -->
                                        <div style="position: absolute; width: 180px; height: 180px; border: 4px solid #60a5fa; border-radius: 50%; border-right-color: transparent; top: 10px; left: 10px; animation: pulse 2s ease-in-out infinite;"></div>
                                        <div style="position: absolute; width: 120px; height: 120px; border: 3px solid #a78bfa; border-radius: 50%; border-left-color: transparent; top: 40px; left: 40px; animation: pulse 2s ease-in-out infinite 0.5s;"></div>
                                        <div style="position: absolute; width: 60px; height: 60px; border: 2px solid #10b981; border-radius: 50%; border-right-color: transparent; top: 70px; left: 70px; animation: pulse 2s ease-in-out infinite 1s;"></div>
                                    </div>
                                    <h4 style="color: #60a5fa; margin-top: 20px;">Split-Ring Resonator</h4>
                                    <p style="color: #9ca3af; font-size: 0.9em; margin-top: 10px;">Magnetic dipole response at optical frequencies</p>
                                </div>
                                
                                <!-- Fishnet Display (hidden) -->
                                <div id="fishnet-display" class="structure-preview" style="display: none; text-align: center;">
                                    <div style="position: relative; width: 200px; height: 200px; margin: 0 auto; background: repeating-linear-gradient(0deg, #60a5fa 0px, #60a5fa 2px, transparent 2px, transparent 20px), repeating-linear-gradient(90deg, #60a5fa 0px, #60a5fa 2px, transparent 2px, transparent 20px); border-radius: 10px;">
                                        <div style="position: absolute; width: 100%; height: 100%; background: radial-gradient(circle at center, transparent 30%, rgba(96, 165, 250, 0.2) 70%); animation: breathe 3s ease-in-out infinite;"></div>
                                    </div>
                                    <h4 style="color: #60a5fa; margin-top: 20px;">Fishnet Structure</h4>
                                    <p style="color: #9ca3af; font-size: 0.9em; margin-top: 10px;">Negative refractive index metamaterial</p>
                                </div>
                                
                                <!-- Wire Array Display (hidden) -->
                                <div id="wire-display" class="structure-preview" style="display: none; text-align: center;">
                                    <div style="position: relative; width: 200px; height: 200px; margin: 0 auto; display: flex; justify-content: space-around; align-items: center;">
                                        <div style="width: 4px; height: 180px; background: linear-gradient(to bottom, #60a5fa, #a78bfa); animation: glow 2s ease-in-out infinite;"></div>
                                        <div style="width: 4px; height: 180px; background: linear-gradient(to bottom, #60a5fa, #a78bfa); animation: glow 2s ease-in-out infinite 0.2s;"></div>
                                        <div style="width: 4px; height: 180px; background: linear-gradient(to bottom, #60a5fa, #a78bfa); animation: glow 2s ease-in-out infinite 0.4s;"></div>
                                        <div style="width: 4px; height: 180px; background: linear-gradient(to bottom, #60a5fa, #a78bfa); animation: glow 2s ease-in-out infinite 0.6s;"></div>
                                        <div style="width: 4px; height: 180px; background: linear-gradient(to bottom, #60a5fa, #a78bfa); animation: glow 2s ease-in-out infinite 0.8s;"></div>
                                    </div>
                                    <h4 style="color: #60a5fa; margin-top: 20px;">Wire Array</h4>
                                    <p style="color: #9ca3af; font-size: 0.9em; margin-top: 10px;">Effective plasma frequency control</p>
                                </div>
                                
                                <!-- Multilayer Display (hidden) -->
                                <div id="multilayer-display" class="structure-preview" style="display: none; text-align: center;">
                                    <div style="position: relative; width: 200px; height: 200px; margin: 0 auto; display: flex; flex-direction: column; justify-content: center; gap: 10px;">
                                        <div style="height: 30px; background: linear-gradient(90deg, #60a5fa, #87ceeb); border-radius: 5px; animation: slideIn 2s ease-in-out infinite;"></div>
                                        <div style="height: 30px; background: linear-gradient(90deg, #a78bfa, #c4b5fd); border-radius: 5px; animation: slideIn 2s ease-in-out infinite 0.2s;"></div>
                                        <div style="height: 30px; background: linear-gradient(90deg, #60a5fa, #87ceeb); border-radius: 5px; animation: slideIn 2s ease-in-out infinite 0.4s;"></div>
                                        <div style="height: 30px; background: linear-gradient(90deg, #6b7280, #9ca3af); border-radius: 5px; animation: slideIn 2s ease-in-out infinite 0.6s;"></div>
                                    </div>
                                    <h4 style="color: #60a5fa; margin-top: 20px;">Multilayer Stack</h4>
                                    <p style="color: #9ca3af; font-size: 0.9em; margin-top: 10px;">Hyperbolic metamaterial dispersion</p>
                                </div>
                            </div>
                            
                            <style>
                                @keyframes pulse {
                                    0%, 100% { transform: scale(1); opacity: 1; }
                                    50% { transform: scale(1.1); opacity: 0.7; }
                                }
                                
                                @keyframes breathe {
                                    0%, 100% { transform: scale(1); }
                                    50% { transform: scale(1.05); }
                                }
                                
                                @keyframes glow {
                                    0%, 100% { opacity: 0.5; box-shadow: 0 0 5px rgba(96, 165, 250, 0.5); }
                                    50% { opacity: 1; box-shadow: 0 0 20px rgba(96, 165, 250, 0.8); }
                                }
                                
                                @keyframes slideIn {
                                    0%, 100% { transform: translateX(0); }
                                    50% { transform: translateX(10px); }
                                }
                            </style>
                        </div>
                    </div>
                    
                    <!-- Parameters Panel -->
                    <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.02) 100%); border-radius: 20px; padding: 30px; border: 1px solid rgba(16, 185, 129, 0.2);">
                        <h3 style="color: #10b981; margin-bottom: 20px;">Structure Parameters</h3>
                        
                        <!-- Dynamic Parameters Display -->
                        <div id="parameters-display">
                            <!-- SRR Parameters (default) -->
                            <div id="srr-params" class="param-section">
                                <div class="param-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Outer Radius</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">150 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Inner Radius</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">100 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Gap Width</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">20 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Metal</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">Gold</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Resonance</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">1.5 THz</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Q Factor</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">45</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Other structure parameters (hidden by default) -->
                            <div id="fishnet-params" class="param-section" style="display: none;">
                                <div class="param-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #87ceeb;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Hole Diameter</div>
                                        <div style="color: #87ceeb; font-size: 1.5em; font-weight: bold;">265 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #87ceeb;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Period</div>
                                        <div style="color: #87ceeb; font-size: 1.5em; font-weight: bold;">360 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #87ceeb;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Metal Layer</div>
                                        <div style="color: #87ceeb; font-size: 1.5em; font-weight: bold;">30 nm Ag</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #87ceeb;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Dielectric</div>
                                        <div style="color: #87ceeb; font-size: 1.5em; font-weight: bold;">MgF₂</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #87ceeb;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Index</div>
                                        <div style="color: #87ceeb; font-size: 1.5em; font-weight: bold;">n = -1.0</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #87ceeb;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">FOM</div>
                                        <div style="color: #87ceeb; font-size: 1.5em; font-weight: bold;">3.2</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="wire-params" class="param-section" style="display: none;">
                                <div class="param-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Wire Diameter</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">50 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Spacing</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">200 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Length</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">10 μm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Material</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">Silver</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Plasma f</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">8.5 THz</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #a78bfa;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">εᵣ</div>
                                        <div style="color: #a78bfa; font-size: 1.5em; font-weight: bold;">-2.3</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="multilayer-params" class="param-section" style="display: none;">
                                <div class="param-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #10b981;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Metal Thickness</div>
                                        <div style="color: #10b981; font-size: 1.5em; font-weight: bold;">30 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #10b981;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Dielectric</div>
                                        <div style="color: #10b981; font-size: 1.5em; font-weight: bold;">50 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #10b981;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Periods</div>
                                        <div style="color: #10b981; font-size: 1.5em; font-weight: bold;">10</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #10b981;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Total Height</div>
                                        <div style="color: #10b981; font-size: 1.5em; font-weight: bold;">800 nm</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #10b981;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">Type</div>
                                        <div style="color: #10b981; font-size: 1.5em; font-weight: bold;">Hyperbolic</div>
                                    </div>
                                    <div class="param-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border-left: 3px solid #10b981;">
                                        <div style="color: #9ca3af; font-size: 0.9em;">λ Range</div>
                                        <div style="color: #10b981; font-size: 1.5em; font-weight: bold;">1-2 μm</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Performance Metrics -->
                        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                            <h4 style="color: #60a5fa; margin-bottom: 15px;">Key Performance</h4>
                            <div id="performance-metrics" style="display: flex; justify-content: space-around; text-align: center;">
                                <div>
                                    <div style="font-size: 2em; color: #87ceeb; font-weight: bold;">-1.5</div>
                                    <div style="color: #9ca3af; font-size: 0.9em;">Ref. Index</div>
                                </div>
                                <div>
                                    <div style="font-size: 2em; color: #10b981; font-weight: bold;">95%</div>
                                    <div style="color: #9ca3af; font-size: 0.9em;">Efficiency</div>
                                </div>
                                <div>
                                    <div style="font-size: 2em; color: #a78bfa; font-weight: bold;">λ/10</div>
                                    <div style="color: #9ca3af; font-size: 0.9em;">Resolution</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Interactive Plotly 3D Visualization -->
                <div style="margin-top: 30px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="color: #60a5fa;">Advanced 3D Field Distribution</h3>
                        <button onclick="generatePlotly3D()" class="control-btn" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer;">
                            <i class="fas fa-chart-area"></i> Generate Field Plot
                        </button>
                    </div>
                    <div id="metamaterial3DField" style="height: 500px; background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%); border-radius: 15px; padding: 20px; position: relative;">
                        <!-- Default Interactive Visualization -->
                        <div id="defaultFieldViz" style="height: 100%; display: flex; align-items: center; justify-content: center;">
                            <div style="text-align: center; width: 100%;">
                                <!-- Animated Field Lines -->
                                <svg width="100%" height="300" xmlns="http://www.w3.org/2000/svg" style="margin-bottom: 20px;">
                                    <defs>
                                        <linearGradient id="fieldGradient1" x1="0%" y1="0%" x2="100%" y2="0%">
                                            <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:0">
                                                <animate attributeName="stop-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
                                            </stop>
                                            <stop offset="50%" style="stop-color:#a78bfa;stop-opacity:1">
                                                <animate attributeName="stop-opacity" values="1;0.5;1" dur="3s" repeatCount="indefinite" />
                                            </stop>
                                            <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:0">
                                                <animate attributeName="stop-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
                                            </stop>
                                        </linearGradient>
                                        <linearGradient id="fieldGradient2" x1="0%" y1="0%" x2="100%" y2="0%">
                                            <stop offset="0%" style="stop-color:#10b981;stop-opacity:0">
                                                <animate attributeName="stop-opacity" values="0;0.8;0" dur="2.5s" repeatCount="indefinite" />
                                            </stop>
                                            <stop offset="50%" style="stop-color:#3b82f6;stop-opacity:1">
                                                <animate attributeName="stop-opacity" values="1;0.3;1" dur="2.5s" repeatCount="indefinite" />
                                            </stop>
                                            <stop offset="100%" style="stop-color:#10b981;stop-opacity:0">
                                                <animate attributeName="stop-opacity" values="0;0.8;0" dur="2.5s" repeatCount="indefinite" />
                                            </stop>
                                        </linearGradient>
                                    </defs>
                                    
                                    <!-- Electric Field Lines -->
                                    <g id="electricField">
                                        <path d="M 50 150 Q 200 50, 350 150" stroke="url(#fieldGradient1)" stroke-width="3" fill="none" opacity="0.8">
                                            <animate attributeName="d" 
                                                    values="M 50 150 Q 200 50, 350 150;
                                                            M 50 150 Q 200 100, 350 150;
                                                            M 50 150 Q 200 50, 350 150"
                                                    dur="4s" repeatCount="indefinite" />
                                        </path>
                                        <path d="M 50 100 Q 200 200, 350 100" stroke="url(#fieldGradient1)" stroke-width="3" fill="none" opacity="0.8">
                                            <animate attributeName="d" 
                                                    values="M 50 100 Q 200 200, 350 100;
                                                            M 50 100 Q 200 150, 350 100;
                                                            M 50 100 Q 200 200, 350 100"
                                                    dur="4s" repeatCount="indefinite" />
                                        </path>
                                    </g>
                                    
                                    <!-- Magnetic Field Lines -->
                                    <g id="magneticField">
                                        <circle cx="100" cy="150" r="40" stroke="url(#fieldGradient2)" stroke-width="2" fill="none" opacity="0.6">
                                            <animate attributeName="r" values="40;60;40" dur="3s" repeatCount="indefinite" />
                                        </circle>
                                        <circle cx="300" cy="150" r="40" stroke="url(#fieldGradient2)" stroke-width="2" fill="none" opacity="0.6">
                                            <animate attributeName="r" values="40;60;40" dur="3s" repeatCount="indefinite" begin="0.5s" />
                                        </circle>
                                        <circle cx="200" cy="150" r="50" stroke="url(#fieldGradient2)" stroke-width="2" fill="none" opacity="0.4">
                                            <animate attributeName="r" values="50;70;50" dur="3s" repeatCount="indefinite" begin="1s" />
                                        </circle>
                                    </g>
                                    
                                    <!-- Propagation Direction Arrow -->
                                    <g transform="translate(200, 250)">
                                        <line x1="-50" y1="0" x2="50" y2="0" stroke="#60a5fa" stroke-width="2" opacity="0.8" />
                                        <polygon points="50,0 45,-5 45,5" fill="#60a5fa" opacity="0.8">
                                            <animateTransform attributeName="transform" type="translate" 
                                                            values="0,0; 10,0; 0,0" dur="2s" repeatCount="indefinite" />
                                        </polygon>
                                        <text x="0" y="20" text-anchor="middle" fill="#9ca3af" font-size="12">k-vector</text>
                                    </g>
                                </svg>
                                
                                <h3 style="color: #60a5fa; margin-bottom: 10px;">Electromagnetic Field Visualization</h3>
                                <p style="color: #9ca3af; margin-bottom: 20px;">Interactive 3D field patterns for metamaterial structures</p>
                                
                                <div style="display: flex; gap: 20px; justify-content: center; margin-bottom: 20px;">
                                    <div style="text-align: center;">
                                        <div style="font-size: 2em; color: #60a5fa; margin-bottom: 5px;">
                                            <i class="fas fa-wave-square"></i>
                                        </div>
                                        <div style="color: #9ca3af; font-size: 0.9em;">E-Field</div>
                                    </div>
                                    <div style="text-align: center;">
                                        <div style="font-size: 2em; color: #10b981; margin-bottom: 5px;">
                                            <i class="fas fa-magnet"></i>
                                        </div>
                                        <div style="color: #9ca3af; font-size: 0.9em;">H-Field</div>
                                    </div>
                                    <div style="text-align: center;">
                                        <div style="font-size: 2em; color: #a78bfa; margin-bottom: 5px;">
                                            <i class="fas fa-atom"></i>
                                        </div>
                                        <div style="color: #9ca3af; font-size: 0.9em;">Resonance</div>
                                    </div>
                                </div>
                                
                                <p style="color: #6b7280; font-size: 0.85em; font-style: italic;">
                                    Click "Generate Field Plot" above to create an interactive 3D visualization
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <style>
                    .structure-btn {
                        background: rgba(255, 255, 255, 0.05);
                        color: white;
                        border: 2px solid rgba(255, 255, 255, 0.2);
                        padding: 12px 24px;
                        border-radius: 25px;
                        cursor: pointer;
                        transition: all 0.3s;
                        font-weight: 600;
                        display: inline-flex;
                        align-items: center;
                        gap: 8px;
                    }
                    
                    .structure-btn:hover {
                        background: rgba(255, 255, 255, 0.1);
                        border-color: #a78bfa;
                        transform: translateY(-2px);
                    }
                    
                    .structure-btn.active-structure {
                        background: linear-gradient(135deg, #667eea, #764ba2);
                        border-color: #667eea;
                    }
                    
                    .control-btn:hover {
                        background: rgba(255, 255, 255, 0.2) !important;
                        transform: scale(1.05);
                    }
                </style>
            </div>

            <!-- Performance Analysis -->
            <div class="visualization-container">
                <h2>Electromagnetic Response Characteristics</h2>
                <div id="performanceChart" style="height: 400px; background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%); border-radius: 15px; padding: 30px; position: relative;">
                    <!-- Static Performance Chart -->
                    <div style="position: relative; height: 100%;">
                        <!-- Chart Grid -->
                        <div style="position: absolute; bottom: 30px; left: 30px; right: 30px; top: 30px; background: repeating-linear-gradient(0deg, rgba(255,255,255,0.05) 0px, transparent 1px, transparent 40px, rgba(255,255,255,0.05) 40px), repeating-linear-gradient(90deg, rgba(255,255,255,0.05) 0px, transparent 1px, transparent 40px, rgba(255,255,255,0.05) 40px);"></div>
                        
                        <!-- Permittivity Curve -->
                        <div style="position: absolute; bottom: 30px; left: 30px; right: 30px; height: 60%; background: linear-gradient(to right, rgba(0,100,255,0.3) 0%, rgba(0,100,255,0.5) 30%, rgba(255,0,0,0.5) 40%, rgba(255,0,0,0.5) 60%, rgba(0,100,255,0.5) 70%, rgba(0,100,255,0.3) 100%); border-top: 3px solid #0066ff; clip-path: polygon(0 100%, 10% 80%, 20% 60%, 30% 40%, 40% 20%, 50% 10%, 60% 20%, 70% 40%, 80% 60%, 90% 80%, 100% 100%);"></div>
                        
                        <!-- Permeability Curve -->
                        <div style="position: absolute; bottom: 30px; left: 30px; right: 30px; height: 50%; background: linear-gradient(to right, rgba(255,0,0,0.3) 0%, rgba(255,0,0,0.5) 35%, rgba(0,255,0,0.5) 45%, rgba(0,255,0,0.5) 55%, rgba(255,0,0,0.5) 65%, rgba(255,0,0,0.3) 100%); border-top: 3px solid #ff0000; clip-path: polygon(0 100%, 15% 85%, 25% 70%, 35% 50%, 45% 30%, 55% 30%, 65% 50%, 75% 70%, 85% 85%, 100% 100%); opacity: 0.8;"></div>
                        
                        <!-- Refractive Index -->
                        <div style="position: absolute; bottom: 30px; left: 30px; right: 30px; height: 40%; background: linear-gradient(to right, rgba(0,255,0,0.3) 0%, rgba(0,255,0,0.5) 25%, rgba(255,215,0,0.5) 35%, rgba(255,215,0,0.5) 65%, rgba(0,255,0,0.5) 75%, rgba(0,255,0,0.3) 100%); border-top: 3px solid #00ff00; clip-path: polygon(0 100%, 20% 90%, 30% 75%, 40% 55%, 50% 40%, 60% 55%, 70% 75%, 80% 90%, 100% 100%); opacity: 0.7;"></div>
                        
                        <!-- Axes -->
                        <div style="position: absolute; bottom: 30px; left: 30px; right: 30px; height: 2px; background: rgba(255,255,255,0.5);"></div>
                        <div style="position: absolute; bottom: 30px; left: 30px; top: 30px; width: 2px; background: rgba(255,255,255,0.5);"></div>
                        
                        <!-- Labels -->
                        <div style="position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%); color: #87ceeb; font-size: 14px;">Frequency (THz)</div>
                        <div style="position: absolute; left: 5px; top: 50%; transform: rotate(-90deg) translateX(-50%); transform-origin: left center; color: #87ceeb; font-size: 14px;">Material Parameters</div>
                        
                        <!-- Legend -->
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 5px;">
                            <div style="display: flex; align-items: center; margin-bottom: 5px;">
                                <div style="width: 20px; height: 3px; background: #0066ff; margin-right: 8px;"></div>
                                <span style="color: #0066ff; font-size: 12px;">Re(ε)</span>
                            </div>
                            <div style="display: flex; align-items: center; margin-bottom: 5px;">
                                <div style="width: 20px; height: 3px; background: #ff0000; margin-right: 8px;"></div>
                                <span style="color: #ff0000; font-size: 12px;">Re(μ)</span>
                            </div>
                            <div style="display: flex; align-items: center;">
                                <div style="width: 20px; height: 3px; background: #00ff00; margin-right: 8px;"></div>
                                <span style="color: #00ff00; font-size: 12px;">n</span>
                            </div>
                        </div>
                        
                        <!-- Negative Index Region Marker -->
                        <div style="position: absolute; bottom: 50%; left: 40%; width: 20%; height: 30%; background: rgba(255,215,0,0.1); border: 2px dashed #ffd700; display: flex; align-items: center; justify-content: center;">
                            <span style="color: #ffd700; font-size: 12px; text-align: center;">Negative<br>Index<br>Band</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Demo Section -->
            <div class="demo-section">
                <div class="container">
                    <h2>Interactive Demonstrations</h2>
                    <div class="demo-grid">
                        <div class="demo-card">
                            <div class="demo-header">
                                <h3><i class="fas fa-wave-square"></i> Wave Propagation Simulator</h3>
                            </div>
                            <div class="demo-content">
                                <div id="waveDemo" style="height: 300px;"></div>
                                <p>Real-time visualization of electromagnetic wave propagation through metamaterial structures</p>
                                <a href="metamaterials-files/wave_propagation_demo.html" class="demo-link">
                                    <i class="fas fa-play-circle"></i> Launch Interactive Demo
                                </a>
                            </div>
                        </div>
                        
                        <div class="demo-card">
                            <div class="demo-header">
                                <h3><i class="fas fa-eye-slash"></i> Cloaking Simulation</h3>
                            </div>
                            <div class="demo-content">
                                <div id="cloakingDemo" style="height: 300px;"></div>
                                <p>Demonstration of electromagnetic cloaking using transformation optics principles</p>
                                <a href="metamaterials-files/cloaking_simulation_static.html" class="demo-link">
                                    <i class="fas fa-play-circle"></i> Launch Interactive Demo
                                </a>
                            </div>
                        </div>
                        
                        <div class="demo-card">
                            <div class="demo-header">
                                <h3><i class="fas fa-chart-line"></i> Dispersion Analysis</h3>
                            </div>
                            <div class="demo-content">
                                <div id="dispersionDemo" style="height: 300px;"></div>
                                <p>Frequency-dependent permittivity and permeability characteristics</p>
                                <a href="metamaterials-files/dispersion_demo.html" class="demo-link">
                                    <i class="fas fa-play-circle"></i> Launch Interactive Demo
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Theory & Design Link -->
            <div style="text-align: center; margin: 30px 0;">
                <a href="metamaterials-files/theory_design_static.html" class="demo-link" style="background: linear-gradient(135deg, #059669 0%, #047857 100%); color: white; padding: 14px 30px; border-radius: 25px; text-decoration: none; display: inline-flex; align-items: center; gap: 10px; font-size: 1.1em;">
                    <i class="fas fa-drafting-compass"></i> Explore Theory & Design Principles
                </a>
            </div>

            <!-- Code Showcase -->
            <div class="code-showcase">
                <h3>COMSOL Electromagnetic Simulation Setup</h3>
                <pre><code>% MATLAB Script for Metamaterial Analysis
% Split-Ring Resonator Parameter Extraction

function [eps_eff, mu_eff, n_eff] = extract_parameters(S11, S21, freq, d)
    % Extract effective parameters from S-parameters
    % S11, S21: Scattering parameters
    % freq: Frequency array in Hz
    % d: Metamaterial thickness
    
    k0 = 2*pi*freq/3e8;  % Free space wave vector
    
    % Calculate impedance from S-parameters
    Z = sqrt(((1+S11).^2 - S21.^2)./((1-S11).^2 - S21.^2));
    
    % Calculate refractive index
    exp_inkd = S21./(1 - S11.*(Z-1)./(Z+1));
    n_eff = -1i*log(exp_inkd)./(k0*d);
    
    % Ensure correct branch selection
    n_eff = real(n_eff) - 1i*abs(imag(n_eff));
    
    % Calculate permittivity and permeability
    eps_eff = n_eff./Z;
    mu_eff = n_eff.*Z;
    
    % Plot results
    figure;
    subplot(2,2,1);
    plot(freq/1e12, real(eps_eff), 'b-', freq/1e12, imag(eps_eff), 'b--');
    xlabel('Frequency (THz)'); ylabel('Permittivity');
    legend('Real', 'Imaginary');
    
    subplot(2,2,2);
    plot(freq/1e12, real(mu_eff), 'r-', freq/1e12, imag(mu_eff), 'r--');
    xlabel('Frequency (THz)'); ylabel('Permeability');
    
    subplot(2,2,3);
    plot(freq/1e12, real(n_eff), 'g-', freq/1e12, imag(n_eff), 'g--');
    xlabel('Frequency (THz)'); ylabel('Refractive Index');
    
    subplot(2,2,4);
    plot(freq/1e12, 20*log10(abs(S21)), 'k-');
    xlabel('Frequency (THz)'); ylabel('Transmission (dB)');
end</code></pre>
            </div>

            <!-- Research Timeline -->
            <div class="research-timeline">
                <h2>Research Milestones</h2>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h4>Theoretical Design & Simulation</h4>
                        <p>Full-wave electromagnetic simulations using COMSOL and CST Microwave Studio to optimize metamaterial geometries for target frequency bands</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h4>Nanofabrication Process Development</h4>
                        <p>E-beam lithography and focused ion beam milling for sub-100nm feature sizes, achieving λ/20 structural precision</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h4>Experimental Characterization</h4>
                        <p>THz time-domain spectroscopy and near-field scanning optical microscopy for material parameter extraction</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h4>Device Demonstration</h4>
                        <p>Successfully demonstrated flat lens with 0.3λ resolution and 85% efficiency at 1 THz operating frequency</p>
                    </div>
                </div>
            </div>

            <!-- Interactive Control Panel -->
            <div class="interactive-demo">
                <h2>Metamaterial Parameter Explorer</h2>
                <div class="control-panel">
                    <div class="control-group">
                        <label>Operating Frequency (THz):</label>
                        <input type="range" id="frequency" min="0.1" max="10" value="1" step="0.1">
                        <span class="value-display" id="frequencyValue">1.0</span>
                    </div>
                    <div class="control-group">
                        <label>Ring Gap Size (μm):</label>
                        <input type="range" id="gapSize" min="1" max="50" value="10" step="1">
                        <span class="value-display" id="gapSizeValue">10</span>
                    </div>
                    <div class="control-group">
                        <label>Metal Thickness (nm):</label>
                        <input type="range" id="thickness" min="50" max="500" value="200" step="10">
                        <span class="value-display" id="thicknessValue">200</span>
                    </div>
                </div>
                <div id="parameterVisualization" style="height: 400px;"></div>
                <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                    <a href="metamaterials-files/sparameters_static.html" class="demo-link" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 24px; border-radius: 25px; text-decoration: none; display: inline-flex; align-items: center; gap: 10px;">
                        <i class="fas fa-chart-line"></i> View S-Parameters Analysis
                    </a>
                    <a href="metamaterials-files/parameter_retrieval_static.html" class="demo-link" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 12px 24px; border-radius: 25px; text-decoration: none; display: inline-flex; align-items: center; gap: 10px;">
                        <i class="fas fa-calculator"></i> View Parameter Retrieval
                    </a>
                </div>
            </div>

            <!-- Publications and Impact -->
            <div class="visualization-container">
                <h2>Research Impact</h2>
                <!-- Publication metrics section - Will be added when publications become available -->
                <div style="text-align: center; padding: 40px; color: #9ca3af;">
                    <i class="fas fa-chart-line" style="font-size: 3em; color: #60a5fa; margin-bottom: 20px;"></i>
                    <p style="font-size: 1.1em;">Research metrics and publications will be displayed here as they become available.</p>
                </div>
            </div>

            <!-- Future Directions -->
            <div class="tech-innovation">
                <h2>Future Research Directions</h2>
                <div class="innovation-grid">
                    <div class="innovation-card">
                        <div class="innovation-icon"><i class="fas fa-bolt"></i></div>
                        <h3>Active & Tunable Metamaterials</h3>
                        <p>Integration with phase-change materials and MEMS for dynamically reconfigurable electromagnetic properties</p>
                    </div>
                    <div class="innovation-card">
                        <div class="innovation-icon"><i class="fas fa-quantum"></i></div>
                        <h3>Quantum Metamaterials</h3>
                        <p>Exploiting quantum coherence and entanglement for next-generation metamaterial functionalities</p>
                    </div>
                    <div class="innovation-card">
                        <div class="innovation-icon"><i class="fas fa-robot"></i></div>
                        <h3>AI-Driven Design</h3>
                        <p>Machine learning optimization of metamaterial geometries for multi-functional and broadband operation</p>
                    </div>
                </div>
            </div>

            <!-- Links to Additional Resources -->
            <div class="demo-section">
                <div class="container">
                    <h2>Explore Full Interactive Resources</h2>
                    <div class="demo-grid">
                        <a href="metamaterials-files/full_em_simulator_static.html" class="demo-card" style="text-decoration: none; color: inherit;">
                            <div class="demo-header">
                                <h3><i class="fas fa-play-circle"></i> Full EM Field Simulator</h3>
                            </div>
                            <div class="demo-content">
                                <p>Complete electromagnetic field simulation with real-time parameter adjustment</p>
                            </div>
                        </a>
                        <a href="metamaterials-files/fabrication_guide.html" class="demo-card" style="text-decoration: none; color: inherit;">
                            <div class="demo-header">
                                <h3><i class="fas fa-microscope"></i> Fabrication Process Guide</h3>
                            </div>
                            <div class="demo-content">
                                <p>Step-by-step nanofabrication procedures and best practices</p>
                            </div>
                        </a>
                        <a href="metamaterials-files/measurement_techniques.html" class="demo-card" style="text-decoration: none; color: inherit;">
                            <div class="demo-header">
                                <h3><i class="fas fa-chart-bar"></i> Characterization Methods</h3>
                            </div>
                            <div class="demo-content">
                                <p>THz-TDS, SNOM, and other measurement techniques explained</p>
                            </div>
                        </a>
                        <a href="metamaterials-files/applications_gallery_static.html" class="demo-card" style="text-decoration: none; color: inherit;">
                            <div class="demo-header">
                                <h3><i class="fas fa-images"></i> Applications Gallery</h3>
                            </div>
                            <div class="demo-content">
                                <p>Real-world applications: antennas, sensors, absorbers, and more</p>
                            </div>
                        </a>
                        <a href="metamaterials-files/theory_handbook_static.html" class="demo-card" style="text-decoration: none; color: inherit;">
                            <div class="demo-header">
                                <h3><i class="fas fa-book"></i> Theory Handbook</h3>
                            </div>
                            <div class="demo-content">
                                <p>Comprehensive theoretical background and mathematical formulations</p>
                            </div>
                        </a>
                        <a href="metamaterials-files/publications.html" class="demo-card" style="text-decoration: none; color: inherit;">
                            <div class="demo-header">
                                <h3><i class="fas fa-book-open"></i> Research References</h3>
                            </div>
                            <div class="demo-content">
                                <p>Key citations and foundational works in metamaterial science</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Removed deprecated 3D Metamaterial Structure Visualization function
        
        // Electromagnetic Response Chart
        function createPerformanceChart() {
            const frequency = [];
            const permittivity_real = [];
            const permittivity_imag = [];
            const permeability_real = [];
            const permeability_imag = [];
            const refractive_index = [];
            
            // Generate frequency sweep data
            for (let f = 0.1; f <= 10; f += 0.1) {
                frequency.push(f);
                
                // Lorentzian resonance model
                const f0 = 1.0; // Resonance at 1 THz
                const gamma = 0.2; // Damping
                const omega = 2 * Math.PI * f;
                const omega0 = 2 * Math.PI * f0;
                
                const denom = (omega0*omega0 - omega*omega)*(omega0*omega0 - omega*omega) + (gamma*omega)*(gamma*omega);
                
                // Electric response
                const eps_r = 1 - 0.8*(omega0*omega0 - omega*omega)/denom;
                const eps_i = 0.8*gamma*omega/denom;
                permittivity_real.push(eps_r);
                permittivity_imag.push(eps_i);
                
                // Magnetic response (shifted resonance)
                const f0_m = 1.2;
                const omega0_m = 2 * Math.PI * f0_m;
                const denom_m = (omega0_m*omega0_m - omega*omega)*(omega0_m*omega0_m - omega*omega) + (gamma*omega)*(gamma*omega);
                
                const mu_r = 1 - 0.7*(omega0_m*omega0_m - omega*omega)/denom_m;
                const mu_i = 0.7*gamma*omega/denom_m;
                permeability_real.push(mu_r);
                permeability_imag.push(mu_i);
                
                // Refractive index
                const n = Math.sqrt(eps_r * mu_r);
                refractive_index.push(n);
            }
            
            const trace1 = {
                x: frequency,
                y: permittivity_real,
                name: 'Re(ε)',
                type: 'scatter',
                line: {color: 'blue', width: 2}
            };
            
            const trace2 = {
                x: frequency,
                y: permeability_real,
                name: 'Re(μ)',
                type: 'scatter',
                line: {color: 'red', width: 2}
            };
            
            const trace3 = {
                x: frequency,
                y: refractive_index,
                name: 'n',
                type: 'scatter',
                line: {color: 'green', width: 2}
            };
            
            const trace4 = {
                x: frequency,
                y: frequency.map(() => 0),
                name: 'Zero Line',
                type: 'scatter',
                line: {color: 'gray', width: 1, dash: 'dash'},
                showlegend: false
            };
            
            const layout = {
                title: {
                    text: 'Frequency-Dependent Material Parameters',
                    font: {color: '#f59e0b', size: 20}
                },
                xaxis: {
                    title: 'Frequency (THz)',
                    titlefont: {color: '#9ca3af'},
                    tickfont: {color: '#9ca3af'},
                    gridcolor: '#374151'
                },
                yaxis: {
                    title: 'Parameter Value',
                    titlefont: {color: '#9ca3af'},
                    tickfont: {color: '#9ca3af'},
                    gridcolor: '#374151',
                    range: [-3, 3]
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.1)',
                font: {color: '#e5e7eb'},
                showlegend: true,
                legend: {
                    x: 0.02,
                    y: 0.98,
                    bgcolor: 'rgba(0,0,0,0.5)',
                    bordercolor: '#374151',
                    borderwidth: 1
                },
                annotations: [{
                    x: 1.1,
                    y: -2,
                    text: 'Negative Index Region',
                    showarrow: true,
                    arrowhead: 2,
                    arrowcolor: '#a855f7',
                    ax: 0,
                    ay: -30,
                    font: {
                        color: '#a855f7',
                        size: 12
                    }
                }]
            };
            
            Plotly.newPlot('performanceChart', [trace1, trace2, trace3, trace4], layout, {responsive: true});
        }
        
        // Wave Propagation Demo
        function createWaveDemo() {
            const x = [];
            const y = [];
            const z = [];
            
            // Create 2D wave pattern
            for (let i = 0; i < 50; i++) {
                const row_x = [];
                const row_y = [];
                const row_z = [];
                for (let j = 0; j < 50; j++) {
                    row_x.push(j);
                    row_y.push(i);
                    // Wave equation with metamaterial region
                    if (j > 20 && j < 30) {
                        // Inside metamaterial - negative phase velocity
                        row_z.push(Math.sin(0.5 * i - 0.3 * j));
                    } else {
                        // Normal medium
                        row_z.push(Math.sin(0.5 * i + 0.3 * j));
                    }
                }
                x.push(row_x);
                y.push(row_y);
                z.push(row_z);
            }
            
            const data = [{
                type: 'surface',
                x: x,
                y: y,
                z: z,
                colorscale: 'Viridis',
                showscale: false
            }];
            
            const layout = {
                title: {
                    text: 'Wave Propagation Through Metamaterial',
                    font: {color: '#f59e0b'}
                },
                scene: {
                    camera: {
                        eye: {x: 1.5, y: -1.5, z: 1.5}
                    },
                    xaxis: {title: 'X', visible: false},
                    yaxis: {title: 'Y', visible: false},
                    zaxis: {title: 'Amplitude', visible: false},
                    bgcolor: 'rgba(0,0,0,0)'
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                margin: {t: 40, b: 0, l: 0, r: 0}
            };
            
            Plotly.newPlot('waveDemo', data, layout);
        }
        
        // Cloaking Demo
        function createCloakingDemo() {
            // Simplified 2D field plot showing cloaking effect
            const trace1 = {
                x: [0, 1, 2, 3, 4],
                y: [1, 0.8, 0.2, 0.8, 1],
                name: 'Without Cloak',
                type: 'scatter',
                mode: 'lines+markers',
                line: {color: 'red', width: 2}
            };
            
            const trace2 = {
                x: [0, 1, 2, 3, 4],
                y: [1, 0.95, 0.9, 0.95, 1],
                name: 'With Cloak',
                type: 'scatter',
                mode: 'lines+markers',
                line: {color: 'blue', width: 2}
            };
            
            const layout = {
                title: {
                    text: 'Scattering Cross-Section',
                    font: {color: '#f59e0b'}
                },
                xaxis: {
                    title: 'Position',
                    titlefont: {color: '#9ca3af'},
                    tickfont: {color: '#9ca3af'},
                    gridcolor: '#374151'
                },
                yaxis: {
                    title: 'Field Intensity',
                    titlefont: {color: '#9ca3af'},
                    tickfont: {color: '#9ca3af'},
                    gridcolor: '#374151',
                    range: [0, 1.2]
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.1)',
                font: {color: '#e5e7eb'}
            };
            
            Plotly.newPlot('cloakingDemo', [trace1, trace2], layout);
        }
        
        // Dispersion Demo
        function createDispersionDemo() {
            const k = [];
            const omega_normal = [];
            const omega_meta = [];
            
            for (let i = 0; i < 100; i++) {
                const k_val = i * 0.1;
                k.push(k_val);
                omega_normal.push(3e8 * k_val); // Normal dispersion
                omega_meta.push(-2e8 * k_val + 5e8); // Backward wave
            }
            
            const trace1 = {
                x: k,
                y: omega_normal,
                name: 'Normal Material',
                type: 'scatter',
                line: {color: 'blue', width: 2}
            };
            
            const trace2 = {
                x: k,
                y: omega_meta,
                name: 'Metamaterial',
                type: 'scatter',
                line: {color: 'red', width: 2, dash: 'dash'}
            };
            
            const layout = {
                title: {
                    text: 'Dispersion Relation',
                    font: {color: '#f59e0b'}
                },
                xaxis: {
                    title: 'Wave Vector k',
                    titlefont: {color: '#9ca3af'},
                    tickfont: {color: '#9ca3af'},
                    gridcolor: '#374151'
                },
                yaxis: {
                    title: 'Frequency ω',
                    titlefont: {color: '#9ca3af'},
                    tickfont: {color: '#9ca3af'},
                    gridcolor: '#374151'
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.1)',
                font: {color: '#e5e7eb'}
            };
            
            Plotly.newPlot('dispersionDemo', [trace1, trace2], layout);
        }
        
        // Parameter Visualization
        function updateParameterVisualization() {
            const frequency = parseFloat(document.getElementById('frequency').value);
            const gapSize = parseInt(document.getElementById('gapSize').value);
            const thickness = parseInt(document.getElementById('thickness').value);
            
            document.getElementById('frequencyValue').textContent = frequency.toFixed(1);
            document.getElementById('gapSizeValue').textContent = gapSize;
            document.getElementById('thicknessValue').textContent = thickness;
            
            // Calculate effective parameters based on inputs
            const f_res = 1.0 + (50 - gapSize) * 0.02; // Resonance shifts with gap size
            const Q = thickness / 50; // Quality factor depends on thickness
            
            const freq_array = [];
            const n_eff = [];
            const transmission = [];
            
            for (let f = 0.1; f <= 10; f += 0.1) {
                freq_array.push(f);
                
                // Lorentzian response
                const delta = (f - f_res) / (0.2 / Q);
                const n = -2 / (1 + delta * delta);
                n_eff.push(n);
                
                // Transmission
                const T = Math.exp(-Math.abs(n) * 0.1);
                transmission.push(20 * Math.log10(T));
            }
            
            const trace1 = {
                x: freq_array,
                y: n_eff,
                name: 'Effective Index',
                type: 'scatter',
                line: {color: 'purple', width: 3}
            };
            
            const trace2 = {
                x: freq_array,
                y: transmission,
                name: 'Transmission (dB)',
                yaxis: 'y2',
                type: 'scatter',
                line: {color: 'orange', width: 2}
            };
            
            // Add marker for current frequency
            const current_idx = Math.round(frequency * 10 - 1);
            const trace3 = {
                x: [frequency],
                y: [n_eff[current_idx]],
                name: 'Operating Point',
                type: 'scatter',
                mode: 'markers',
                marker: {
                    size: 12,
                    color: 'red',
                    symbol: 'star'
                }
            };
            
            const layout = {
                title: {
                    text: `Metamaterial Response (Gap: ${gapSize}μm, Thickness: ${thickness}nm)`,
                    font: {color: '#f59e0b'}
                },
                xaxis: {
                    title: 'Frequency (THz)',
                    titlefont: {color: '#9ca3af'},
                    tickfont: {color: '#9ca3af'},
                    gridcolor: '#374151'
                },
                yaxis: {
                    title: 'Refractive Index',
                    titlefont: {color: '#a855f7'},
                    tickfont: {color: '#a855f7'},
                    gridcolor: '#374151'
                },
                yaxis2: {
                    title: 'Transmission (dB)',
                    titlefont: {color: '#fb923c'},
                    tickfont: {color: '#fb923c'},
                    overlaying: 'y',
                    side: 'right'
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.1)',
                font: {color: '#e5e7eb'},
                showlegend: true,
                legend: {
                    x: 0.02,
                    y: 0.98,
                    bgcolor: 'rgba(0,0,0,0.5)',
                    bordercolor: '#374151',
                    borderwidth: 1
                }
            };
            
            Plotly.newPlot('parameterVisualization', [trace1, trace2, trace3], layout);
        }
        
        // New 3D Visualization Functions
        let currentStructure = 'srr';
        
        function showStructure(type) {
            // Hide all parameter sections
            document.getElementById('srr-params').style.display = 'none';
            document.getElementById('fishnet-params').style.display = 'none';
            document.getElementById('wire-params').style.display = 'none';
            document.getElementById('multilayer-params').style.display = 'none';
            
            // Hide all structure displays
            document.getElementById('srr-display').style.display = 'none';
            document.getElementById('fishnet-display').style.display = 'none';
            document.getElementById('wire-display').style.display = 'none';
            document.getElementById('multilayer-display').style.display = 'none';
            
            // Remove active class from all buttons
            document.getElementById('srrBtn').classList.remove('active-structure');
            document.getElementById('fishnetBtn').classList.remove('active-structure');
            document.getElementById('wireBtn').classList.remove('active-structure');
            document.getElementById('multilayerBtn').classList.remove('active-structure');
            
            // Show selected params and display
            document.getElementById(type + '-params').style.display = 'block';
            document.getElementById(type + '-display').style.display = 'block';
            document.getElementById(type + 'Btn').classList.add('active-structure');
            
            currentStructure = type;
        }
        
        function generatePlotly3D() {
            // Hide the default visualization
            const defaultViz = document.getElementById('defaultFieldViz');
            if (defaultViz) {
                defaultViz.style.display = 'none';
            }
            
            // Generate appropriate 3D plot based on current structure
            if (currentStructure === 'srr') {
                createSRRFieldPlot();
            } else if (currentStructure === 'fishnet') {
                createFishnetFieldPlot();
            } else if (currentStructure === 'wire') {
                createWireFieldPlot();
            } else if (currentStructure === 'multilayer') {
                createMultilayerFieldPlot();
            }
        }
        
        function createSRRFieldPlot() {
            const data = [];
            
            // Create SRR field distribution
            const x = [], y = [], z = [], values = [];
            for (let i = -50; i <= 50; i += 5) {
                for (let j = -50; j <= 50; j += 5) {
                    for (let k = -20; k <= 20; k += 5) {
                        x.push(i);
                        y.push(j);
                        z.push(k);
                        
                        // Simulate field enhancement around SRR gaps
                        const r = Math.sqrt(i*i + j*j);
                        const theta = Math.atan2(j, i);
                        let field = 0;
                        
                        if (r > 30 && r < 50) {
                            // Ring region with gap enhancement
                            field = Math.exp(-Math.abs(r-40)/10) * (1 + 0.5*Math.cos(theta));
                            if (Math.abs(theta) < 0.2) field *= 3; // Gap enhancement
                        }
                        values.push(field);
                    }
                }
            }
            
            data.push({
                type: 'scatter3d',
                mode: 'markers',
                x: x,
                y: y,
                z: z,
                marker: {
                    size: 3,
                    color: values,
                    colorscale: 'Viridis',
                    opacity: 0.8,
                    colorbar: {title: '|E| Field'}
                },
                name: 'Electric Field'
            });
            
            const layout = {
                title: 'SRR Electric Field Distribution',
                scene: {
                    xaxis: {title: 'X (nm)'},
                    yaxis: {title: 'Y (nm)'},
                    zaxis: {title: 'Z (nm)'},
                    camera: {eye: {x: 1.5, y: 1.5, z: 1.5}}
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {color: '#e5e7eb'}
            };
            
            Plotly.newPlot('metamaterial3DField', data, layout);
        }
        
        function createFishnetFieldPlot() {
            // Create fishnet-specific field plot
            const data = [{
                type: 'surface',
                z: Array(50).fill().map((_, i) => 
                    Array(50).fill().map((_, j) => 
                        Math.sin(i/5) * Math.cos(j/5) * Math.exp(-(i-25)*(i-25)/500 - (j-25)*(j-25)/500)
                    )
                ),
                colorscale: 'Viridis',
                name: 'Field Distribution'
            }];
            
            const layout = {
                title: 'Fishnet Structure Field Distribution',
                scene: {
                    xaxis: {title: 'X (nm)'},
                    yaxis: {title: 'Y (nm)'},
                    zaxis: {title: 'Field Intensity'},
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {color: '#e5e7eb'}
            };
            
            Plotly.newPlot('metamaterial3DField', data, layout);
        }
        
        function createWireFieldPlot() {
            // Create wire array field plot
            const data = [{
                type: 'scatter3d',
                mode: 'markers',
                x: Array(1000).fill().map(() => Math.random() * 100 - 50),
                y: Array(1000).fill().map(() => Math.random() * 100 - 50),
                z: Array(1000).fill().map((_, i) => Math.sin(i/100) * 20),
                marker: {
                    size: 2,
                    color: Array(1000).fill().map((_, i) => i),
                    colorscale: 'Electric',
                    opacity: 0.8
                },
                name: 'Wire Array Field'
            }];
            
            const layout = {
                title: 'Wire Array Plasma Field',
                scene: {
                    xaxis: {title: 'X (nm)'},
                    yaxis: {title: 'Y (nm)'},
                    zaxis: {title: 'Z (nm)'},
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {color: '#e5e7eb'}
            };
            
            Plotly.newPlot('metamaterial3DField', data, layout);
        }
        
        function createMultilayerFieldPlot() {
            // Create multilayer field plot
            const data = [{
                type: 'isosurface',
                x: Array(10).fill().map((_, i) => i * 10),
                y: Array(10).fill().map((_, i) => i * 10),
                z: Array(10).fill().map((_, i) => i * 10),
                value: Array(1000).fill().map(() => Math.random()),
                isomin: 0.2,
                isomax: 0.8,
                colorscale: 'RdBu',
                caps: {x: {show: false}, y: {show: false}, z: {show: false}},
                name: 'Multilayer Field'
            }];
            
            const layout = {
                title: 'Multilayer Hyperbolic Dispersion',
                scene: {
                    xaxis: {title: 'X (nm)'},
                    yaxis: {title: 'Y (nm)'},
                    zaxis: {title: 'Z (nm)'},
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {color: '#e5e7eb'}
            };
            
            Plotly.newPlot('metamaterial3DField', data, layout);
        }
        
        // Initialize all visualizations
        document.addEventListener('DOMContentLoaded', function() {
            // CSS animation is shown by default, Plotly loads on demand
            createPerformanceChart();
            createWaveDemo();
            createCloakingDemo();
            createDispersionDemo();
            updateParameterVisualization();
            
            // Add event listeners for interactive controls
            document.getElementById('frequency').addEventListener('input', updateParameterVisualization);
            document.getElementById('gapSize').addEventListener('input', updateParameterVisualization);
            document.getElementById('thickness').addEventListener('input', updateParameterVisualization);
        });
    </script>
</body>
</html>